namespace = giga_aeternum

country_event = {
	id = giga_aeternum.1000
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { NOT = { has_global_flag = giga_core_aeternum_4 } }
			event_target:aeternum_birch_world = {
				add_district = district_giga_birch_structure
			}
		}
		else = {
			event_target:aeternum_birch_world = {
				add_district = district_giga_birch_void_structure
			}
		}
		country_event = { id = giga_aeternum.1001 days = 2 }
	}
}

country_event = {
	id = giga_aeternum.1001
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		event_target:birch_aeternum = {
			add_modifier = {
				modifier = aeternum_balance
				days = -1
			}
			if = {
				limit = { has_global_flag = giga_core_aeternum_2 }
				add_modifier = {
					modifier = aeternum_buff_2
					days = -1
				}
			}
			else_if = {
				limit = { has_global_flag = giga_core_aeternum_3 }
				add_modifier = {
					modifier = aeternum_buff_3
					days = -1
				}
			}
			else_if = {
				limit = { has_global_flag = giga_core_aeternum_4 }
				add_modifier = {
					modifier = aeternum_buff_4
					days = -1
				}
			}
		}
		event_target:aeternum_birch_world = {
			solar_system = { random_system_planet = { limit = { is_planet_class = pc_core_black_hole } set_name = "Aiondiaukko" } }
			if = {
				limit = { has_global_flag = giga_core_aeternum_4 }
				solar_system = {
					random_system_planet = { 
						limit = { is_planet_class = pc_core_black_hole }
						set_planet_size = 1 
					}
				}
			}
			if = {
				limit = { NOT = { has_global_flag = giga_core_aeternum_4 } }
				add_district = district_giga_birch_orykta
				add_district = district_giga_birch_ktisma
				add_district = district_giga_birch_physma
			}
			else = {
				add_district = district_giga_birch_void_orykta
				add_district = district_giga_birch_void_physma
				add_district = district_giga_birch_void_ktisma
			}

			katzen_clear_capitals = yes

			add_building = building_giga_aeternum_birch_capital
			add_building = building_giga_aeternum_ruler_computer

			add_building = building_giga_aeternum_housing
			add_building = building_giga_aeternum_housing

			add_building = building_giga_aeternum_leisure_center
			add_building = building_giga_aeternum_leisure_center

			add_building = building_giga_aeternum_quantum_reactor
			add_building = building_giga_aeternum_quantum_reactor

			add_building = building_giga_aeternum_ultrafarm
			add_building = building_giga_aeternum_ultrafarm

			add_building = building_giga_aeternum_psi_halls

			add_building = building_giga_aeternum_synthetizer

			add_modifier = {
				modifier = birch_world_decaying
				days = -1
			}

			add_deposit = d_aeternum_decaying_hyperstructure
			add_deposit = d_aeternum_decaying_hyperstructure
			add_deposit = d_aeternum_decaying_hyperstructure
			add_deposit = d_aeternum_decaying_hyperstructure
		}
	}
}

#CONTACT#
country_event = {
	id = giga_aeternum.2000
	title = "giga_aeternum.2000.name"
	desc = {
		text = "giga_aeternum.2000.desc.a"
	}

	diplomatic = yes
	custom_gui = "giga_aeternum_gui"
	is_triggered_only = yes

	force_open = yes

	trigger = {
		from = {
			is_country_type = dormant_aeternum
		}
		NOR = {
			has_country_flag = aeternum_diplomacy_engaged
			is_at_war_with = event_target:birch_aeternum
		}
	}

	picture_event_data = {
		portrait = event_target:birch_aeternum_robot
		graphical_culture = event_target:birch_aeternum
		room = aeternum_room
	}

	immediate = {
		set_country_flag = aeternum_diplomacy_engaged
	}

	option = {
		name = "giga_aeternum.2000.who"
		custom_gui = aeternum_event_option_entry
		is_dialog_only = yes
		response_text = "giga_aeternum.2000.who.response"
	}

	option = {
		name = "giga_aeternum.2000.howold"
		custom_gui = aeternum_event_option_entry
		is_dialog_only = yes
		response_text = "giga_aeternum.2000.howold.response"
	}

	option = {
		name = "giga_aeternum.2000.war"
		custom_tooltip = "giga_aeternum.2000.war.tooltip"
		response_text = "giga_aeternum.2000.war.response"
		custom_gui = aeternum_event_option_entry
		trigger = {
			NOT = { is_at_war_with = event_target:birch_aeternum }
			NOT = { has_global_flag = aeternum_awakening_started }
			NOT = { is_multiplayer = yes }
		}
		hidden_effect = {
			remove_country_flag = aeternum_diplomacy_engaged
			save_global_event_target_as = aeternum_war_not_aet
			declare_war = {
				target = event_target:birch_aeternum
				attacker_war_goal = wg_aeternum_defence
				effect ={
					save_global_event_target_as = aeternum_crusade
				}
			}
			country_event = { id = giga_aeternum.2001 days = 15 }
		}
	}

	option = {
		name = "giga_aeternum.2000.warawake"
		custom_tooltip = "giga_aeternum.2000.warawake.tooltip"
		response_text = "giga_aeternum.2000.warawake.response"
		custom_gui = aeternum_event_option_entry
		trigger = {
			NOT = { is_at_war_with = event_target:birch_aeternum }
			has_global_flag = aeternum_awakening_started
		}
		hidden_effect = {
			remove_country_flag = aeternum_diplomacy_engaged
			save_global_event_target_as = aeternum_war_not_aet
			declare_war = {
				target = event_target:birch_aeternum
				attacker_war_goal = wg_aeternum_defence
				effect ={
					save_global_event_target_as = aeternum_crusade
				}
			}
			country_event = { id = giga_aeternum.2001 days = 15 }
		}
	}

	option = {
		name = "giga_aeternum.2000.a"
		custom_gui = aeternum_event_option_entry
		default_hide_option = yes
		hidden_effect = {
			remove_country_flag = aeternum_diplomacy_engaged
		}
	}
}

#yo wtf
country_event = {
	id = giga_aeternum.2001
	title = "giga_aeternum.2001.name"
	desc = {
		text = "giga_aeternum.2001.desc"
	}

	diplomatic = yes
	custom_gui = "giga_aeternum_gui"
	is_triggered_only = yes

	force_open = yes

	picture_event_data = {
		portrait = event_target:birch_aeternum.ruler
		graphical_culture = event_target:birch_aeternum
		room = aeternum_room
	}

	immediate = {
		set_country_flag = aeternum_diplomacy_engaged
	}

	option = {
		name = "giga_aeternum.2001.a" #war
		response_text = "giga_aeternum.2001.a.response"
		custom_gui = aeternum_event_option_entry
		hidden_effect = {
			remove_country_flag = aeternum_diplomacy_engaged
			if = {
				limit = { has_global_flag = aeternum_awakening_started }
				country_event = { id = giga_aeternum.40001 days = 15 }
			}
			else = {
				country_event = { id = giga_aeternum.40010 days = 15 } #premature awakening
			}
		}
	}

	option = {
		name = "giga_aeternum.2001.b"
		response_text = "giga_aeternum.2001.b.response"
		custom_gui = aeternum_event_option_entry
		trigger = {
			NOR = {
				has_global_flag = aeternum_awakening_started
				has_global_flag = aeternum_awakening_ongoing
			}
		}
		hidden_effect = {
			every_war = {
				limit = {
					any_war_participant = { is_country_type = dormant_aeternum }
					any_war_participant = { is_country = ROOT }
				}
				end_war_effect = yes
			}
			remove_country_flag = aeternum_diplomacy_engaged
		}
	}
}

#CRETINS#
#CONTACT WHILE AT WAR#
country_event = {
	id = giga_aeternum.2002
	title = "giga_aeternum.2002.name"
	desc = {
		text = "giga_aeternum.2002.desc.a"
	}
	desc = {
		text = "giga_aeternum.2002.desc.b"
	}
	desc = {
		text = "giga_aeternum.2002.desc.c"
	}
	desc = {
		text = "giga_aeternum.2002.desc.d"
	}

	diplomatic = yes
	custom_gui = "giga_aeternum_gui"
	is_triggered_only = yes

	force_open = yes

	trigger = {
		from = {
			is_country_type = dormant_aeternum
		}
		is_at_war_with = event_target:birch_aeternum
		NOT = { has_country_flag = aeternum_diplomacy_engaged }
		has_global_flag = premature_aeternum_awakening
	}

	picture_event_data = {
		portrait = event_target:birch_aeternum.ruler
		graphical_culture = event_target:birch_aeternum
		room = aeternum_room
	}

	immediate = {
		set_country_flag = aeternum_diplomacy_engaged
	}

	option = {
		name = "giga_aeternum.2002.a"
		custom_gui = aeternum_event_option_entry
		hidden_effect = {
			remove_country_flag = aeternum_diplomacy_engaged
		}
	}
}

#CONTACT WHILE AT WAR AFTER AWAKENING#
country_event = {
	id = giga_aeternum.2003
	title = "giga_aeternum.2003.name"
	desc = {
		text = "giga_aeternum.2003.desc.a"
	}
	desc = {
		text = "giga_aeternum.2003.desc.b"
	}
	desc = {
		text = "giga_aeternum.2003.desc.c"
	}
	desc = {
		text = "giga_aeternum.2003.desc.d"
	}

	diplomatic = yes
	custom_gui = "giga_aeternum_gui"
	is_triggered_only = yes

	force_open = yes

	trigger = {
		from = {
			is_country_type = dormant_aeternum
		}
		NOT = { has_country_flag = aeternum_diplomacy_engaged }
		NOT = { has_global_flag = premature_aeternum_awakening }
		has_global_flag = aeternum_awakening_ongoing
	}

	picture_event_data = {
		portrait = event_target:birch_aeternum.ruler
		graphical_culture = event_target:birch_aeternum
		room = aeternum_room
	}

	immediate = {
		set_country_flag = aeternum_diplomacy_engaged
	}

	option = {
		name = "giga_aeternum.2003.a"
		custom_gui = aeternum_event_option_entry
		hidden_effect = {
			remove_country_flag = aeternum_diplomacy_engaged
		}
	}
}

#oh hey theres ppl in the core, cool
country_event = {
	id = giga_aeternum.2010
	title = "giga_aeternum.2010.name"
	desc = "giga_aeternum.2010.desc"
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	immediate = {
		country_event = { id = giga_aeternum.3009 days = 720 } #the agency
	}

	option = {
		name = "giga_aeternum.2010.a"
		hidden_effect = {
			every_country = {
				limit = { NOT = { has_communications = event_target:birch_aeternum } }
				establish_communications_no_message = event_target:birch_aeternum
			}
			every_system = {
					limit = { 
						exists = space_owner 
						space_owner = { is_country_type = dormant_aeternum }
					} 
				set_surveyed = {
					surveyed = yes
					surveyor = ROOT
				}
			}
		}
	}
}

#OH FUCK THEYRE WAKING UP
event = {
	id = giga_aeternum.30000
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		NOR = {
			has_global_flag = aeternum_awakening_started
			has_global_flag = aeternum_awakening_ongoing
			has_global_flag = aeternum_awakening_warned
		}
		any_country = { has_country_flag = aeternite_agency_unlocked }
		end_game_years_passed >= -10
	}

	immediate = {
		random = {
			chance = 50
			set_global_flag = aeternum_awakening_warned
			every_country = {
				limit = { is_ai = no }
				country_event = { id = giga_aeternum.3000 days = 10 random = 30 }
			}
			event_target:birch_aeternum = {
				country_event = { id = giga_aeternum.3003 days = 420 }
				if = {
					limit = { has_global_flag = giga_core_aeternum_1 }
					set_variable = {
						which = years_until_awakening
						value = 10
					}
				}
				if = {
					limit = { has_global_flag = giga_core_aeternum_2 }
					set_variable = {
						which = years_until_awakening
						value = 8
					}
				}
				else_if = {
					limit = { has_global_flag = giga_core_aeternum_3 }
					set_variable = {
						which = years_until_awakening
						value = 3
					}
				}
				else_if = {
					limit = { has_global_flag = giga_core_aeternum_4 }
					set_variable = {
						which = years_until_awakening
						value = 0
					}
				}
				else = {
					set_variable = {
						which = years_until_awakening
						value = 10
					}
				}
			}
		}
	}
}

country_event = {
	id = giga_aeternum.3000
	title = "giga_aeternum.3000.name"
	desc = "giga_aeternum.3000.desc"
	picture = GFX_evt_clocks
	show_sound = event_yellow_alert
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		NOR = {
			has_global_flag = aeternum_awakening_started
			has_global_flag = aeternum_awakening_ongoing
		}
	}

	option = {
		name = "giga_aeternum.3000.a"
		custom_tooltip = "giga_aeternum.3000.a.tooltip"
		hidden_effect = {
			event_target:birch_aeternum = {
				if = {
					limit = { has_global_flag = giga_core_aeternum_1 }
					set_variable = {
						which = years_until_awakening
						value = 10
					}
				}
				if = {
					limit = { has_global_flag = giga_core_aeternum_2 }
					set_variable = {
						which = years_until_awakening
						value = 8
					}
				}
				else_if = {
					limit = { has_global_flag = giga_core_aeternum_3 }
					set_variable = {
						which = years_until_awakening
						value = 3
					}
				}
				else_if = {
					limit = { has_global_flag = giga_core_aeternum_4 }
					set_variable = {
						which = years_until_awakening
						value = 0
					}
				}
				else = {
					set_variable = {
						which = years_until_awakening
						value = 10
					}
				}
			}
			country_event = { id = giga_aeternum.3001 days = 360 }
		}
	}
}

#OH FUCK THEYRE WAKING UP
country_event = {
	id = giga_aeternum.3001
	title = "giga_aeternum.3001.name"
	desc = "giga_aeternum.3001.desc"
	picture = GFX_evt_clocks
	show_sound = event_red_alert
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		NOT = {
			has_global_flag = aeternum_awakening_ongoing
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_global_flag = aeternum_awakening_started }
			}
			set_global_flag = aeternum_awakening_started
		}
	}

	option = {
		name = "giga_aeternum.3001.a"
		custom_tooltip = "giga_aeternum.3001.a.tooltip"
		if = {
			limit = { NOT = { has_event_chain = "aeternum_chain" }}
			begin_event_chain = {
				event_chain = "aeternum_chain"
				target = ROOT
			}
			create_point_of_interest = {
				id = aeternum_chain.1
				name = "aeternum_chain_1"
				desc = "aeternum_chain_1_desc"
				event_chain = "aeternum_chain"
				location = event_target:aeternum_birch_world
			}
		}
		hidden_effect = {
			event_target:birch_aeternum = {
				country_event = { id = giga_aeternum.5002 }
			}
			country_event = { id = giga_aeternum.3002 days = 180 }
		}
	}
}

#DELAY
country_event = {
	id = giga_aeternum.3002
	title = "giga_aeternum.3002.name"
	desc = "giga_aeternum.3002.desc"
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_started
		NOT = { has_country_flag = aeternum_delay_unlocked }
	}

	immediate = {
		set_country_flag = aeternum_delay_unlocked
	}

	option = {
		name = "giga_aeternum.3002.a"
	}
}

#tick the awakening down
country_event = {
	id = giga_aeternum.3003
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		NOT = { has_global_flag = aeternum_awakening_ongoing }
	}

	immediate = {
		event_target:birch_aeternum = {
			subtract_variable = {
				which = years_until_awakening
				value = 1
			}
			country_event = { id = giga_aeternum.3003 days = 360 }
			if = {
				limit = {
					check_variable = {
						which = years_until_awakening
						value = 2
					}
				}
				every_country = {
					country_event = { id = giga_aeternum.3004 }
				}
			}
			if = {
				limit = {
					check_variable = {
						which = years_until_awakening
						value <= 0
					}
				}
				event_target:birch_aeternum = {
					country_event = { id = giga_aeternum.4000 }
				}
			}
		}
	}
}

#only 2 years left
country_event = {
	id = giga_aeternum.3004
	title = "giga_aeternum.3004.name"
	desc = "giga_aeternum.3004.desc"
	picture = GFX_evt_fallen_empire
	show_sound = event_red_alert
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_started
	}

	option = {
		name = "giga_aeternum.3004.a"
	}
}


###THE AWAKENING###
#wardec'd before even starting to awaken
country_event = {
	id = giga_aeternum.40010
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		set_global_flag = aeternum_awakening_ongoing
		set_global_flag = premature_aeternum_awakening
		every_country = {
			limit = { is_ai = no }
			begin_event_chain = {
				event_chain = "aeternum_chain"
				target = ROOT
			}
			create_point_of_interest = {
				id = aeternum_chain.1
				name = "aeternum_chain_1"
				desc = "aeternum_chain_1_desc"
				event_chain = "aeternum_chain"
				location = event_target:aeternum_birch_world
			}
			event_target:birch_aeternum = {
				country_event = { id = giga_aeternum.5002 }
			}
			country_event = { id = giga_aeternum.4003 } #inform the players
		}
		every_country = {
			limit = {
				is_ai = no
				NOT = { has_country_flag = aeternite_agency_unlocked }
			}
			country_event = { id = giga_aeternum.3009 days = 10 } #if you dont have the agency for some reason lol
		}
		event_target:aet_core_planet_1 = {
			spawn_aeternite_strike_fleet = yes

			spawn_aeternite_troop_fleet = yes
			spawn_aeternite_colossus_fleet = yes
		}
		event_target:aet_core_planet_2 = {
			spawn_aeternite_troop_fleet = yes
		}
		event_target:aet_core_planet_3 = {
			spawn_aeternite_troop_fleet = yes
		}
		event_target:aet_core_planet_4 = {
			spawn_aeternite_colossus_fleet = yes
		}
		event_target:aet_core_star_1 = {
			spawn_aeternite_assault_fleet = yes
		}
		event_target:aet_core_star_2 = {
			spawn_aeternite_troop_fleet = yes
		}
		event_target:birch_aeternum = {
			set_variable = {
				which = aeternum_forge_count
				value = 0
			}
			country_event = { id = giga_aeternum.4100 days = 30 } #forges (kaiser is that you)
			country_event = { id = giga_aeternum.40000 } #wardecs on all AI empires one by one (to avoid duplicate wars)
			every_system_within_border = { #claim all nearby systems
				every_neighbor_system = {
					limit = {
						any_system_planet = { is_star = yes }
						NOR = {
							is_star_class = sc_dn		# Wild space compatibility
							exists = starbase
							exists = owner
							any_system_planet = {
								is_colony = yes
								owner = {
									NOT = { is_country_type = primitive }
								}
							}
							any_fleet_in_system = { #no hostiles
								controller = {
									OR = {
										is_at_war_with = event_target:birch_aeternum
										is_hostile = event_target:birch_aeternum
									}
								}
							}
						}
					}
					# create_starbase = { #Make a starbase
					# 	size = starbase_citadel
					# 	owner = event_target:birch_aeternum
					# }
					create_aeternum_citadel = yes
				}
			}
		}
	}
}

country_event = {
	id = giga_aeternum.4003
	title = "giga_aeternum.4003.name"
	desc = {
		text = "giga_aeternum.4003.desc"
	}
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_red_alert
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_ongoing
	}

	option = {
		name = "giga_aeternum.4003.a"
		hidden_effect = {
			country_event = { id = giga_aeternum.4002 }
		}
	}
}

#if they were wardec'd earlier, they will not enjoy the full awakening
#wardec'd while they were preparing
country_event = {
	id = giga_aeternum.40001
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_global_flag = aeternum_awakening_started
		set_global_flag = aeternum_awakening_ongoing
		set_global_flag = early_aeternum_awakening
		if = {
			limit = {
				OR = {
					last_resolution_changed = resolution_pre_emptive_aeternum_war
					last_resolution_changed = resolution_pre_emptive_aeternum_war_empire
				}
			}
			save_global_event_target_as = aeternum_war_not_aet
		}
		every_country = {
			limit = { is_ai = no }
			country_event = { id = giga_aeternum.4001 } #inform the players
		}
		every_country = {
			remove_aeternum_infra_bombing_modifiers = yes
			remove_aeternum_intel_scramble_modifiers = yes
			remove_aeternum_comms_scramble_modifiers = yes
			if = {
				limit = { has_special_project = INVESTIGATE_AETERNUM_ENGINEERING }
				abort_special_project = { type = INVESTIGATE_AETERNUM_ENGINEERING }
			}
			if = {
				limit = { has_special_project = INVESTIGATE_AETERNUM_COMMS }
				abort_special_project = { type = INVESTIGATE_AETERNUM_COMMS }
			}
			if = {
				limit = { has_special_project = INVESTIGATE_AETERNUM_INTEL }
				abort_special_project = { type = INVESTIGATE_AETERNUM_INTEL }
			}
			event_target:birch_aeternum = {
				set_faction_hostility = {
					set_hostile = yes
					set_neutral = no
					set_friendly = no
					target = prev
				}
			}
		}
		if = {
			limit = {
				event_target:birch_aeternum = { #right before they were meant to awaken --> no difference
					check_variable = {
						which = years_until_awakening
						value < 3
					}
				}
			}
			event_target:aet_core_gasgiant_1 = {
				spawn_aeternite_guardian_awaken_fleet = yes
				spawn_aeternite_assault_fleet = yes
				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_gasgiant_2 = {
				spawn_aeternite_guardian_awaken_fleet = yes
				spawn_aeternite_assault_fleet = yes
				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_planet_1 = {
				spawn_aeternite_strike_fleet = yes
				spawn_aeternite_assault_fleet = yes
				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_planet_2 = {
				spawn_aeternite_strike_fleet = yes
				spawn_aeternite_assault_fleet = yes
				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_planet_3 = {
				spawn_aeternite_strike_fleet = yes
				spawn_aeternite_assault_fleet = yes
				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_planet_4 = {
				spawn_aeternite_strike_fleet = yes
				spawn_aeternite_assault_fleet = yes
				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_star_1 = {
				spawn_aeternite_assault_fleet = yes
				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_star_2 = {
				spawn_aeternite_assault_fleet = yes
				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
		}
		else_if = {
			limit = {
				event_target:birch_aeternum = { #between 3 and 6 years
					check_variable = {
						which = years_until_awakening
						value >= 3
					}
					check_variable = {
						which = years_until_awakening
						value < 6
					}
				}
			}
			event_target:aet_core_gasgiant_1 = {
				spawn_aeternite_guardian_awaken_fleet = yes
				spawn_aeternite_assault_fleet = yes

				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_gasgiant_2 = {
				spawn_aeternite_guardian_awaken_fleet = yes
				spawn_aeternite_assault_fleet = yes

				spawn_aeternite_troop_fleet = yes
			}
			event_target:aet_core_planet_1 = {
				spawn_aeternite_strike_fleet = yes
				spawn_aeternite_assault_fleet = yes

				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_planet_2 = {
				spawn_aeternite_strike_fleet = yes
				spawn_aeternite_assault_fleet = yes

				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_planet_3 = {
				spawn_aeternite_assault_fleet = yes

				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_planet_4 = {
				spawn_aeternite_assault_fleet = yes

				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_star_1 = {
				spawn_aeternite_assault_fleet = yes

				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_star_2 = {
				spawn_aeternite_assault_fleet = yes

				spawn_aeternite_troop_fleet = yes
			}
		}
		else_if = {
			limit = {
				event_target:birch_aeternum = { #between 6 and 12 years
					check_variable = {
						which = years_until_awakening
						value >= 6
					}
					check_variable = {
						which = years_until_awakening
						value < 12
					}
				}
			}
			event_target:aet_core_gasgiant_1 = {
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_gasgiant_2 = {
				spawn_aeternite_guardian_awaken_fleet = yes
				spawn_aeternite_assault_fleet = yes

				spawn_aeternite_troop_fleet = yes
			}
			event_target:aet_core_planet_1 = {
				spawn_aeternite_strike_fleet = yes

				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_planet_2 = {
				spawn_aeternite_strike_fleet = yes
				spawn_aeternite_assault_fleet = yes

				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_planet_3 = {
				spawn_aeternite_assault_fleet = yes

				spawn_aeternite_troop_fleet = yes
			}
			event_target:aet_core_planet_4 = {

				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_star_1 = {
				spawn_aeternite_assault_fleet = yes
			}
			event_target:aet_core_star_2 = {
				spawn_aeternite_assault_fleet = yes

				spawn_aeternite_troop_fleet = yes
			}
		}
		else_if = {
			limit = {
				event_target:birch_aeternum = { #over 12 years
					check_variable = {
						which = years_until_awakening
						value >= 12
					}
				}
			}
			event_target:aet_core_gasgiant_1 = {
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_gasgiant_2 = {
				spawn_aeternite_guardian_awaken_fleet = yes
				spawn_aeternite_assault_fleet = yes
			}
			event_target:aet_core_planet_1 = {
				spawn_aeternite_strike_fleet = yes

				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_planet_2 = {
				spawn_aeternite_strike_fleet = yes

				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_planet_3 = {
				spawn_aeternite_troop_fleet = yes
			}
			event_target:aet_core_planet_4 = {
				spawn_aeternite_troop_fleet = yes
				spawn_aeternite_colossus_fleet = yes
			}
			event_target:aet_core_star_1 = {
				spawn_aeternite_assault_fleet = yes
			}
			event_target:aet_core_star_2 = {
				spawn_aeternite_troop_fleet = yes
			}
		}
		event_target:birch_aeternum = {
			set_variable = {
				which = aeternum_forge_count
				value = 0
			}
			country_event = { id = giga_aeternum.4100 days = 30 } #forges (kaiser is that you)
			country_event = { id = giga_aeternum.40000 } #wardecs on all AI empires one by one (to avoid duplicate wars)
			every_system_within_border = { #claim all nearby systems
				every_neighbor_system = {
					limit = {
						any_system_planet = { is_star = yes }
						NOR = {
							is_star_class = sc_dn		# Wild space compatibility
							exists = starbase
							exists = owner
							any_system_planet = {
								is_colony = yes
								owner = {
									NOT = { is_country_type = primitive }
								}
							}
							any_fleet_in_system = { #no hostiles
								controller = {
									OR = {
										is_at_war_with = event_target:birch_aeternum
										is_hostile = event_target:birch_aeternum
									}
								}
							}
						}
					}
					# create_starbase = { #Make a starbase
					# 	size = starbase_citadel
					# 	owner = event_target:birch_aeternum
					# }
					create_aeternum_citadel = yes
				}
			}
		}
	}
}

#this is if they were able to complete their awakening properly#
#they will receive two extra big fleets, as well as a dozen smaller assault fleets.
country_event = {
	id = giga_aeternum.4000
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_global_flag = aeternum_awakening_started
		set_global_flag = aeternum_awakening_ongoing
		every_country = {
			limit = { is_ai = no }
			country_event = { id = giga_aeternum.4001 } #inform the players
		}
		every_country = {
			remove_aeternum_infra_bombing_modifiers = yes
			remove_aeternum_intel_scramble_modifiers = yes
			remove_aeternum_comms_scramble_modifiers = yes
			if = {
				limit = { has_special_project = INVESTIGATE_AETERNUM_ENGINEERING }
				abort_special_project = { type = INVESTIGATE_AETERNUM_ENGINEERING }
			}
			if = {
				limit = { has_special_project = INVESTIGATE_AETERNUM_COMMS }
				abort_special_project = { type = INVESTIGATE_AETERNUM_COMMS }
			}
			if = {
				limit = { has_special_project = INVESTIGATE_AETERNUM_INTEL }
				abort_special_project = { type = INVESTIGATE_AETERNUM_INTEL }
			}
			event_target:birch_aeternum = {
				set_faction_hostility = {
					set_hostile = yes
					set_neutral = no
					set_friendly = no
					target = prev
				}
			}
		}
		event_target:aet_core_gasgiant_1 = {
			spawn_aeternite_guardian_awaken_fleet = yes
			spawn_aeternite_assault_fleet = yes
			spawn_aeternite_troop_fleet = yes
			spawn_aeternite_colossus_fleet = yes
		}
		event_target:aet_core_gasgiant_2 = {
			spawn_aeternite_guardian_awaken_fleet = yes
			spawn_aeternite_assault_fleet = yes
			spawn_aeternite_troop_fleet = yes
			spawn_aeternite_colossus_fleet = yes
		}
		event_target:aet_core_planet_1 = {
			spawn_aeternite_strike_fleet = yes
			spawn_aeternite_assault_fleet = yes
			spawn_aeternite_troop_fleet = yes
			spawn_aeternite_colossus_fleet = yes
		}
		event_target:aet_core_planet_2 = {
			spawn_aeternite_strike_fleet = yes
			spawn_aeternite_assault_fleet = yes
			spawn_aeternite_troop_fleet = yes
			spawn_aeternite_colossus_fleet = yes
		}
		event_target:aet_core_planet_3 = {
			spawn_aeternite_strike_fleet = yes
			spawn_aeternite_assault_fleet = yes
			spawn_aeternite_troop_fleet = yes
			spawn_aeternite_colossus_fleet = yes
		}
		event_target:aet_core_planet_4 = {
			spawn_aeternite_strike_fleet = yes
			spawn_aeternite_assault_fleet = yes
			spawn_aeternite_troop_fleet = yes
			spawn_aeternite_colossus_fleet = yes
		}
		event_target:aet_core_star_1 = {
			spawn_aeternite_assault_fleet = yes
			spawn_aeternite_troop_fleet = yes
			spawn_aeternite_colossus_fleet = yes
		}
		event_target:aet_core_star_2 = {
			spawn_aeternite_assault_fleet = yes
			spawn_aeternite_troop_fleet = yes
			spawn_aeternite_colossus_fleet = yes
		}
		event_target:birch_aeternum = {
			set_variable = {
				which = aeternum_forge_count
				value = 0
			}
			country_event = { id = giga_aeternum.4100 days = 30 } #forges (kaiser is that you)
			country_event = { id = giga_aeternum.40000 } #wardecs on all AI empires one by one (to avoid duplicate wars)
			every_system_within_border = { #claim all nearby systems
				every_neighbor_system = {
					limit = {
						any_system_planet = { is_star = yes }
						NOR = {
							is_star_class = sc_dn		# Wild space compatibility
							exists = starbase
							exists = owner
							any_system_planet = {
								is_colony = yes
								owner = {
									NOT = { is_country_type = primitive }
								}
							}
							any_fleet_in_system = { #no hostiles
								controller = {
									OR = {
										is_at_war_with = event_target:birch_aeternum
										is_hostile = event_target:birch_aeternum
									}
								}
							}
						}
					}
					# create_starbase = { #Make a starbase
					# 	size = starbase_aet
					# 	owner = event_target:birch_aeternum
					# }
					create_aeternum_citadel = yes
				}
			}
		}
	}
}

country_event = {
	id = giga_aeternum.40000
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_country = {
			limit = {
				OR = {
					is_country_type = default
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
					is_country_type = katzenartig_imperium
				}
				NOT = { is_at_war_with = event_target:birch_aeternum }
			}
			if = {
				limit = {
					exists = event_target:aeternum_crusade
				}
				join_war_on_side = {
					war = event_target:aeternum_crusade
					side = event_target:aeternum_war_not_aet
				}
			}
			else = {
				save_event_target_as = aet_war_selection
				event_target:birch_aeternum = {
					declare_war = {
						target = event_target:aet_war_selection
						attacker_war_goal = "wg_aeternum_conquest"
						name = "Aeternal Reclamation"
						effect ={
							save_global_event_target_as = aeternum_crusade
							event_target:aet_war_selection = {
								save_global_event_target_as = aeternum_war_not_aet
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				exists = event_target:birch_aeternum
				any_country = {
					OR = {
						is_country_type = default
						is_country_type = fallen_empire
						is_country_type = awakened_fallen_empire
						is_country_type = katzenartig_imperium
					}
					NOT = { is_at_war_with = event_target:birch_aeternum }
				}
			}
			country_event = { id = giga_aeternum.40000 days = 60 }
		}
		every_country = {
			limit = { NOT = { is_hostile = event_target:birch_aeternum } }
			event_target:birch_aeternum = {
				set_faction_hostility = {
					set_hostile = yes
					set_neutral = no
					set_friendly = no
					target = prev
				}
			}
		}
	}
}

country_event = {
	id = giga_aeternum.4001
	title = "giga_aeternum.4001.name"
	desc = {
		text = "giga_aeternum.4001.desc"
		trigger = { NOT = { has_global_flag = early_aeternum_awakening } }
	}
	desc = {
		text = "giga_aeternum.4001.early.desc"
		trigger = { has_global_flag = early_aeternum_awakening }
	}
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_red_alert
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_ongoing
	}

	option = {
		name = "giga_aeternum.4001.a"
		trigger = { NOT = { has_global_flag = early_aeternum_awakening } }
		hidden_effect = {
			country_event = { id = giga_aeternum.4002 }
		}
	}

	option = {
		name = "giga_aeternum.4001.b"
		trigger = { has_global_flag = early_aeternum_awakening }
		hidden_effect = {
			country_event = { id = giga_aeternum.4002 }
		}
	}
}

country_event = {
	id = giga_aeternum.4002
	title = "giga_aeternum.4002.name"
	desc = {
		text = "giga_aeternum.4002.desc"
		trigger = { NOT = { has_global_flag = pre_emptive_aeternum_war } }
	}
	desc = {
		text = "giga_aeternum.4002.desc.preemptive"
		trigger = { has_global_flag = pre_emptive_aeternum_war }
	}
	diplomatic = yes
	custom_gui = "giga_aeternum_gui"
	is_triggered_only = yes

	force_open = yes

	picture_event_data = {
		portrait = event_target:birch_aeternum.ruler
		graphical_culture = event_target:birch_aeternum
		room = aeternum_room
	}

	immediate = {
		set_country_flag = aeternum_diplomacy_engaged
		country_event = { id = giga_aeternum.4004 days = 30 }
	}

	option = {
		name = "giga_aeternum.4002.a.preemptive" #war
		custom_gui = aeternum_event_option_entry
		trigger = {
			has_global_flag = pre_emptive_aeternum_war
			NOR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
		hidden_effect = {
			remove_country_flag = aeternum_diplomacy_engaged
			if = {
				limit = { ROOT = { NOT = { is_at_war_with = event_target:birch_aeternum } } }
				if = {
					limit = { exists = event_target:aeternum_crusade }
					join_war_on_side = {
						war = event_target:aeternum_crusade
						side = event_target:aeternum_war_not_aet
					}
				}
				else = {
					event_target:birch_aeternum = {
						declare_war = {
							target = ROOT
							attacker_war_goal = "wg_aeternum_conquest"
							name = "Aeternal Reclamation"
							effect ={
								save_global_event_target_as = aeternum_crusade
								ROOT = {
									save_global_event_target_as = aeternum_war_not_aet
								}
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = "giga_aeternum.4002.a" #war
		custom_gui = aeternum_event_option_entry
		trigger = {
			NOR = {
				has_global_flag = pre_emptive_aeternum_war
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
		hidden_effect = {
			remove_country_flag = aeternum_diplomacy_engaged
			if = {
				limit = { ROOT = { NOR = { is_at_war_with = event_target:birch_aeternum is_same_empire = event_target:birch_aeternum } } }
				if = {
					limit = { exists = event_target:aeternum_crusade }
					join_war_on_side = {
						war = event_target:aeternum_crusade
						side = event_target:aeternum_war_not_aet
					}
				}
				else = {
					event_target:birch_aeternum = {
						declare_war = {
							target = ROOT
							attacker_war_goal = "wg_aeternum_conquest"
							name = "Aeternal Reclamation"
							effect ={
								save_global_event_target_as = aeternum_crusade
								ROOT = {
									save_global_event_target_as = aeternum_war_not_aet
								}
							}
						}
					}
				}
			}
		}
	}

	option = {
		name = "giga_aeternum.4002.purifier" #war
		custom_gui = aeternum_event_option_entry
		trigger = {
			has_valid_civic = civic_fanatic_purifiers
		}
		hidden_effect = {
			remove_country_flag = aeternum_diplomacy_engaged
			if = {
				limit = { ROOT = { NOT = { is_at_war_with = event_target:birch_aeternum } } }
				if = {
					limit = { exists = event_target:aeternum_crusade }
					join_war_on_side = {
						war = event_target:aeternum_crusade
						side = event_target:aeternum_war_not_aet
					}
				}
				else = {
					event_target:birch_aeternum = {
						declare_war = {
							target = ROOT
							attacker_war_goal = "wg_aeternum_conquest"
							name = "Aeternal Reclamation"
							effect ={
								save_global_event_target_as = aeternum_crusade
								ROOT = {
									save_global_event_target_as = aeternum_war_not_aet
								}
							}
						}
					}
				}
			}
		}
	}

	option = {
		name = "giga_aeternum.4002.swarm" #war
		custom_gui = aeternum_event_option_entry
		trigger = {
			has_valid_civic = civic_hive_devouring_swarm
		}
		hidden_effect = {
			remove_country_flag = aeternum_diplomacy_engaged
			if = {
				limit = { ROOT = { NOT = { is_at_war_with = event_target:birch_aeternum } } }
				if = {
					limit = { exists = event_target:aeternum_crusade }
					join_war_on_side = {
						war = event_target:aeternum_crusade
						side = event_target:aeternum_war_not_aet
					}
				}
				else = {
					event_target:birch_aeternum = {
						declare_war = {
							target = ROOT
							attacker_war_goal = "wg_aeternum_conquest"
							name = "Aeternal Reclamation"
							effect ={
								save_global_event_target_as = aeternum_crusade
								ROOT = {
									save_global_event_target_as = aeternum_war_not_aet
								}
							}
						}
					}
				}
			}
		}
	}

	option = {
		name = "giga_aeternum.4002.terminator" #war
		custom_gui = aeternum_event_option_entry
		trigger = {
			has_valid_civic = civic_machine_terminator
		}
		hidden_effect = {
			remove_country_flag = aeternum_diplomacy_engaged
			if = {
				limit = { ROOT = { NOT = { is_at_war_with = event_target:birch_aeternum } } }
				if = {
					limit = { exists = event_target:aeternum_crusade }
					join_war_on_side = {
						war = event_target:aeternum_crusade
						side = event_target:aeternum_war_not_aet
					}
				}
				else = {
					event_target:birch_aeternum = {
						declare_war = {
							target = ROOT
							attacker_war_goal = "wg_aeternum_conquest"
							name = "Aeternal Reclamation"
							effect ={
								save_global_event_target_as = aeternum_crusade
								ROOT = {
									save_global_event_target_as = aeternum_war_not_aet
								}
							}
						}
					}
				}
			}
		}
	}
}

country_event = {
	id = giga_aeternum.4004
	title = "giga_aeternum.4004.name"
	desc = "giga_aeternum.4004.desc"
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_radio_chatter
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_ongoing
	}

	option = {
		name = "giga_aeternum.4004.a"
		custom_tooltip = "giga_aeternum.4000.a.tooltip"
	}
}

planet_event = { #colossus
	id = giga_aeternum.4010
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		destroy_colony = yes
		change_pc = pc_shrouded
		every_country = {
			limit = {
				has_event_chain = "aeternum_chain"
			}
			add_event_chain_counter = {
				event_chain = "aeternum_chain"
				counter = "aeternum_shroud_count"
				amount = 1
			}
		}
	}
}

planet_event = { #bombing
	id = giga_aeternum.4011
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		planet_devastation = 100
		OR = {
			habitable_structure = no
			is_planet_class = pc_habitat
			is_planet_class = pc_gigaorbital_ring
			is_planet_class = pc_giga_elysium
		}
		from = { is_country_type = dormant_aeternum }
	}

	immediate = {
		if = {
			limit = { habitable_structure = yes }
			destroy_colony = yes
			remove_planet = yes
		}
		else = {
			destroy_colony = yes
			change_pc = pc_shrouded
		}
	}
}

#managing aeternite forges, monthly event
#forges are built around shrouded worlds, at a rate of 1 every 2 years, capping out at 10.
country_event = {
	id = giga_aeternum.4100
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_global_flag = aeternum_awakening_ongoing
		any_country = { is_country_type = dormant_aeternum }
	}

	immediate = {
		if = {
			limit = {
				any_country = { is_country_type = dormant_aeternum }
				any_country = {
					is_country_type = default
					NOT = { is_at_war_with = event_target:birch_aeternum }
				}
			}
			every_country = {
				limit = {
					is_country_type = default
					NOT = { is_at_war_with = event_target:birch_aeternum }
				}
				join_war_on_side = {
					war = event_target:aeternum_crusade
					side = event_target:aeternum_war_not_aet
				}
			}
		}
		event_target:aeternum_crusade = {
			set_war_flag = ignored_in_kaiser_fall
		}
		if = {
			limit = {
				any_country = { 
					has_completed_special_project_in_log = INVESTIGATE_AETERNUM_PLANETCRAFT 
					NOT = { has_country_flag = analysed_aeternite_planetcraft } 
				}
			}
			every_country = {#Failsafe
				limit = { 
					has_completed_special_project_in_log = INVESTIGATE_AETERNUM_PLANETCRAFT 
					NOT = { has_country_flag = analysed_aeternite_planetcraft } 
				}
				set_country_flag = analysed_aeternite_planetcraft
				while = {
					count = 3 
					increase_aeternite_intel = yes
				}
			}
		}
		if = {
			limit = {
				event_target:aeternum_birch_world = { #reset devastation
					has_modifier = birch_world_grand_shield
					planet_devastation > 1
				}
			}
			event_target:aeternum_birch_world = {
				add_planet_devastation = -100
			}
		}
		else_if = {
			limit = {
				event_target:aeternum_birch_world = {
					planet_devastation > 80
				}
			}
			event_target:aeternum_birch_world = {
				add_planet_devastation = -10
			}
		}
		if = { # resettle aeternite pops to birch world if abducted (no cheesing!)
			limit = {
				any_country = {
					NOT = { is_country = event_target:birch_aeternum }
					any_owned_species = {
						is_species = event_target:birch_aeternites
					}
				}
			}
			set_update_modifiers_batch = begin
			every_country = {
				limit = {
					NOT = { is_country = event_target:birch_aeternum }
					any_owned_species = {
						is_species = event_target:birch_aeternites
					}
				}
				every_owned_planet = {
					limit = {
						any_owned_species = {
							is_species = event_target:birch_aeternites
						}
					}
					every_owned_pop = {
						limit = {
							is_species = event_target:birch_aeternites
						}
						resettle_pop = {
							pop = THIS
							planet = event_target:aeternum_birch_world
						}	
					}
				}
			}
			set_update_modifiers_batch = end
		}
		if = {
			limit = { has_global_flag = giga_core_aeternum_1 }
			event_target:birch_aeternum = {
				set_variable = {
					which = max_allowed_aeternum_forges
					value = 10
				}
			}
		}
		else_if = {
			limit = { has_global_flag = giga_core_aeternum_2 }
			event_target:birch_aeternum = {
				set_variable = {
					which = max_allowed_aeternum_forges
					value = 20
				}
			}
		}
		else_if = {
			limit = { has_global_flag = giga_core_aeternum_3 }
			event_target:birch_aeternum = {
				set_variable = {
					which = max_allowed_aeternum_forges
					value = 30
				}
			}
		}
		else_if = {
			limit = { has_global_flag = giga_core_aeternum_4 }
			event_target:birch_aeternum = {
				set_variable = {
					which = max_allowed_aeternum_forges
					value = 999 #Lol
				}
			}
		}
		
		event_target:birch_aeternum = { # 28/1/23 - Bread Changes
			country_event = { id = giga_aeternum.4100 days = 30 } #do it again
			if = { #resettle pops to alondia
				limit = {
					event_target:aeternum_birch_world = { #alondia isnt getting invaded lol
						has_ground_combat = no
						has_orbital_bombardment = no
					}
				}
				set_update_modifiers_batch = begin
				every_owned_planet = {
					limit = {
						is_colony = yes
						owner = { is_country_type = dormant_aeternum }
						NOR = { 
							is_planet_class = pc_birch 
							is_planet_class = pc_void_birch #Lux aeternum no longer resettle the birch to the birch
						}
						has_ground_combat = no
						has_orbital_bombardment = no
					}

					if = { #shroud planets with less than 30 pops
						limit = { count_owned_pop = { count > 30 } } #Raised the colony clear cap so that it clears sooner, resulting in fewer bouts of monthly lag overall - Bread
						every_owned_pop = {
							limit = {
								planet = {
									is_colony = yes
									owner = { is_country_type = dormant_aeternum }
									NOR = { 
										is_planet_class = pc_birch 
										is_planet_class = pc_void_birch
									}
									has_ground_combat = no
									has_orbital_bombardment = no
								}
							}
							random = {
								chance = 25
								resettle_pop = {
									pop = THIS
									planet = event_target:aeternum_birch_world
								}
							}
						}
					}
					if = {
						limit = {  count_owned_pop = { count <= 30 } }
						every_owned_pop = {
							limit = {
								planet = {
									is_colony = yes
									owner = { is_country_type = dormant_aeternum }
									NOR = { 
										is_planet_class = pc_birch 
										is_planet_class = pc_void_birch
									}
									has_ground_combat = no
									has_orbital_bombardment = no
								}
							}
							resettle_pop = {
								pop = THIS
								planet = event_target:aeternum_birch_world
							}
						}
						destroy_colony = yes
						if = {
							limit = { NOT = { is_artificial = yes }  }
							change_pc = pc_shrouded
						}
						else_if = {
							limit = { 		
								giga_is_standard_ringworld = yes
							}
							change_pc = pc_ringworld_habitable_shrouded
							if = {
								limit = { has_planet_flag = giga_ringworld_gar }
								giga_set_ringworld_graphical_culture = {
									TARGET = this
									SOURCE = solar_system.starbase.owner
									SIZE = gargantuan
									TYPE = shrouded_habitable
								}
							}
							else_if = {
								limit = { has_planet_flag = giga_ringworld_beh } 
								giga_set_ringworld_graphical_culture = {
									TARGET = this
									SOURCE = solar_system.starbase.owner
									SIZE = behemoth
									TYPE = shrouded_habitable
								}
							}
							else_if = {
								limit = { has_planet_flag = giga_ringworld_tit } 
								giga_set_ringworld_graphical_culture = {
									TARGET = this
									SOURCE = solar_system.starbase.owner
									SIZE = titanic
									TYPE = shrouded_habitable
								}
							}
							else = {
								giga_set_ringworld_graphical_culture = {
									TARGET = this
									SOURCE = solar_system.starbase.owner
									SIZE = vanilla
									TYPE = shrouded_habitable
									VANILLA_TYPE = habitable
								}
							}
						}
						else_if = {
							limit = { 		
								is_planet_class = pc_squareworld_habitable
							}
							change_pc = pc_squareworld_shrouded_habitable #Not even the funny square is safe from me
						}
						else_if = {
							limit = {
								is_planet_class = pc_giga_penrose_habitable
							}
							change_pc = pc_giga_penrose_shrouded_habitable
						}
						else_if = {
							limit = {
								is_planet_class = pc_equatorial_shipyard
							}
							change_pc = pc_shrouded_equatorial_shipyard
						}
						else_if = {
							limit = {
								is_planet_class = pc_interstellar_ringworld_habitable
							}
							change_pc = pc_interstellar_shrouded_ringworld_habitable
						}
						else = { #kind of a stopgap until I can make proper shrouded habitable entities later
							add_modifier = {
								modifier = beacon_shrouded_habitable_structure
								days = -1
							}
							create_ambient_object = {
								type = aeternum_consecrated_shroud
								location = this
								use_3d_location = yes
								entity_scale_to_size = yes
							}
						}
						every_country = { #adds to the shroud counter, since apparently they shroud worlds from resettling also, and not only colossus. - Bread
							limit = {
								has_event_chain = "aeternum_chain"
							}
							add_event_chain_counter = {
								event_chain = "aeternum_chain"
								counter = "aeternum_shroud_count"
								amount = 1
							}
						}
					}
				}
				set_update_modifiers_batch = end
			}

			if = {
				limit = { NOT = { has_country_flag = alondia_made_ships_recently } } # The birch world makes ships
				event_target:aeternum_birch_world = {
					random_list = {
						50 = {
							spawn_aeternite_troop_fleet = yes
							spawn_aeternite_small_fleet = yes
						}
						50 = {
							spawn_aeternite_troop_fleet = yes
							spawn_aeternite_big_fleet = yes
						}
					}
				}
				set_timed_country_flag = {
					flag = alondia_made_ships_recently
					days = 720
				}
			}
			if = { # Claim nearby empty land
				limit = { NOT = { has_country_flag = aeternum_recently_claimed_land } }
				every_system_within_border = {
					every_neighbor_system = {
						limit = {
							any_system_planet = { is_star = yes }
							NOR = {
								is_star_class = sc_dn		# Wild space compatibility
								exists = starbase
								exists = owner
								any_system_planet = {
									is_colony = yes
									owner = {
										NOT = { is_country_type = primitive }
									}
								}
								any_fleet_in_system = { #no hostiles
									controller = {
										OR = {
											is_at_war_with = event_target:birch_aeternum
											is_hostile = event_target:birch_aeternum
										}
									}
								}
							}
						}
						# create_starbase = { #Make a starbase
						# 	size = starbase_citadel
						# 	owner = event_target:birch_aeternum
						# }
						create_aeternum_citadel = yes
					}
				}
				set_timed_country_flag = {
					flag = aeternum_recently_claimed_land
					days = 360
				}
			}
		}
		every_megastructure = { #Delete any aeternite war forges in construction in systems with hostile ships
			limit = {
				is_megastructure_type = aeternum_forge_0
				solar_system = {
					any_fleet_in_system = { #no hostiles
						controller = {
							OR = {
								is_at_war_with = event_target:birch_aeternum
								is_hostile = event_target:birch_aeternum
							}
						}
					}
				}
			}
			remove_megastructure = THIS
		}
		every_megastructure = { #Delete any finished war forges in system with ONLY hostile ships
			limit = {
				is_megastructure_type = aeternum_forge_1
				solar_system = {
					any_fleet_in_system = { #no hostiles
						controller = {
							OR = {
								is_at_war_with = event_target:birch_aeternum
								is_hostile = event_target:birch_aeternum
							}
						}
					}
					NOT = { any_fleet_in_system = { owner = { is_country_type = dormant_aeternum } } }
					space_owner = {
						OR = {
							NOT = { is_country_type = dormant_aeternum }
							NOT = { exists = THIS }
						}
					}
				}
			}
			planet = { save_global_event_target_as = aeternum_war_forge_destroyed_planet }
			remove_megastructure = THIS
			solar_system = {
				save_event_target_as = aeternum_war_forge_destroyed_system
				every_system_planet = {
					limit = { has_planet_flag = has_aeternite_forge }
					save_global_event_target_as = aeternum_war_forge_destroyed_planet
					remove_planet_flag = has_aeternite_forge
				}
			}
			space_owner = { country_event = { id = giga_aeternum.4102 } }
		}

		event_target:birch_aeternum = { #Try to build a new forge
			set_variable = {
				which = aeternum_forge_count
				value = 0
			}
			every_owned_megastructure = {
				limit = {
					OR = {
						is_megastructure_type = aeternum_forge_0
						is_megastructure_type = aeternum_forge_1
					}
				}
				event_target:birch_aeternum = {
					change_variable = {
						which = aeternum_forge_count
						value = 1
					}
				}
			}
			if = {
				limit = {
					NOT = { has_country_flag = aeternum_forge_built_recently }
					check_variable = {
						which = aeternum_forge_count
						value < max_allowed_aeternum_forges
					}
					any_planet_within_border = {
						is_planet_class = pc_shrouded
						NOT = { has_planet_flag = has_aeternite_forge }
						solar_system = {
							NOR = {
								any_system_megastructure = { is_megastructure_type = aeternum_forge_0 }
								any_system_megastructure = { is_megastructure_type = aeternum_forge_1 }
								any_ship_in_system = {
									controller = {
										OR = {
											is_hostile_to = event_target:birch_aeternum
											is_at_war_with = event_target:birch_aeternum
										}
									}
								}
							}
						}
					}
				}
				random_planet_within_border = {
					limit = {
						is_planet_class = pc_shrouded
						NOT = { has_planet_flag = has_aeternite_forge }
						solar_system = {
							NOR = {
								any_system_megastructure = { is_megastructure_type = aeternum_forge_0 }
								any_system_megastructure = { is_megastructure_type = aeternum_forge_1 }
								any_ship_in_system = {
									controller = {
										OR = {
											is_hostile_to = event_target:birch_aeternum
											is_at_war_with = event_target:birch_aeternum
										}
									}
								}
							}
						}
					}
					save_global_event_target_as = aeternum_forge_planet
					solar_system = {
						spawn_megastructure = {
							type = aeternum_forge_0
							planet = event_target:aeternum_forge_planet
							owner = event_target:birch_aeternum
						}
						random_system_megastructure = {
							limit = { is_megastructure_type = aeternum_forge_0 }
							upgrade_megastructure_to = aeternum_forge_1
						}
					}
					event_target:birch_aeternum = {
						if = {
							limit = { has_global_flag = giga_core_aeternum_1 }
							set_timed_country_flag = {
								flag = aeternum_forge_built_recently
								days = 720
							}
						}
						if = {
							limit = { has_global_flag = giga_core_aeternum_2 }
							set_timed_country_flag = {
								flag = aeternum_forge_built_recently
								days = 360
							}
						}
						if = {
							limit = { has_global_flag = giga_core_aeternum_3 }
							set_timed_country_flag = {
								flag = aeternum_forge_built_recently
								days = 180
							}
						}
						if = {
							limit = { has_global_flag = giga_core_aeternum_4 }
							set_timed_country_flag = {
								flag = aeternum_forge_built_recently
								days = 10
							}
						}
					}
				}
			}
		}
	}
}

#forges make ships
planet_event = {
	id = giga_aeternum.4101
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_planet_class = pc_shrouded
		has_planet_flag = has_aeternite_forge
		solar_system = {
			any_system_megastructure = { is_megastructure_type = aeternum_forge_1 }
			NOT = {
				any_ship_in_system = {
					controller = {
						OR = {
							is_hostile_to = event_target:birch_aeternum
							is_at_war_with = event_target:birch_aeternum
						}
					}
				}
			}
		}
	}

	immediate = {
		random_list = {
			50 = {
				spawn_aeternite_small_fleet = yes
			}
			50 = {
				spawn_aeternite_big_fleet = yes
			}
		}
		random_list = {
			100 = {}
			50 = {
				spawn_aeternite_colossus_fleet = yes
			}
			50 = {
				spawn_aeternite_troop_fleet = yes
			}
		}
		if = {
			limit = { planet_size > 3 }
			change_planet_size = -3
			planet_event = { id = giga_aeternum.4101 days = 1080 }
		}
		else = {
			every_system_megastructure = {
				limit = {
					planet = { is_same_value = ROOT }
				}
				remove_megastructure = THIS
			}
			remove_planet = yes
		}
	}
}

#forge blows up!
country_event = {
	id = giga_aeternum.4102
	title = "giga_aeternum.4102.name"
	desc = {
		text = "giga_aeternum.4102.desc.a"
		trigger = { NOT = { has_country_flag = blew_up_first_aeternite_forge } }
	}
	desc = {
		text = "giga_aeternum.4102.desc.b"
		trigger = { has_country_flag = blew_up_first_aeternite_forge }
	}
	picture = GFX_evt_surreal_visions
	show_sound = event_structural_collapse
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4102.a"
		trigger = {
			NOR = {
				has_country_flag = blew_up_first_aeternite_forge
				has_special_project = INVESTIGATE_AETERNUM_FORGE
			}
		}
		hidden_effect = { set_country_flag = blew_up_first_aeternite_forge }
		add_resource = {
			alloys = 25000
			physics_research = 10000
			sr_zro = 100
		}
		enable_special_project = {
			name = "INVESTIGATE_AETERNUM_FORGE"
			owner = root
		}
	}

	option = {
		name = "giga_aeternum.4102.b"
		custom_tooltip = "giga_aeternum_2_intel_tooltip"
		hidden_effect = {
			increase_aeternite_intel = yes
			increase_aeternite_intel = yes
		}
		trigger = { has_country_flag = blew_up_first_aeternite_forge }
		add_resource = {
			alloys = 25000
			physics_research = 10000
			sr_zro = 100
		}
	}
}

#forge analysed
country_event = {
	id = giga_aeternum.4103
	title = "giga_aeternum.4103.name"
	desc = "giga_aeternum.4103.desc"
	picture = GFX_evt_fallen_empire
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4103.a"
		custom_tooltip = "giga_aeternum_5_intel_tooltip"
		hidden_effect = {
			set_country_flag = analysed_aeternite_warforge
			while = {
				count = 5
				increase_aeternite_intel = yes
			}
		}
	}
}

#ship destroyed
country_event = {
	id = giga_aeternum.4110
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		from = { is_country_type = dormant_aeternum }
	}

	immediate = {
		if = {
			limit = {
				check_variable = {
					which = aeternite_intel_count
					value < 30
				}
			}
			random_list = {
				99 = {}
				1 = { ROOT = { country_event = { id = giga_aeternum.4111 } } }
			}
		}
	}
}

#ship blows up and gives data
country_event = {
	id = giga_aeternum.4111
	title = "giga_aeternum.4111.name"
	desc = "giga_aeternum.4111.desc"
	picture = GFX_evt_engineering_research
	show_sound = event_aeternum_intel_popup
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4111.a"
		custom_tooltip = "giga_aeternum_1_intel_tooltip"
		hidden_effect = {
			increase_aeternite_intel = yes
		}
	}
}

#its the kaiser!
country_event = {
	id = giga_aeternum.4120
	title = "giga_aeternum.4120.name"

	desc = {
		text = "giga_aeternum.4120.desc"
	}

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:flusion_douclaw
		room = "flusion_space_room"
	}

	option = { #bye!
		default_hide_option = yes
		name = "giga_aeternum.4120.a"
		hidden_effect = {
			country_event = { id = giga_aeternum.4121 }
		}
	}

	option = { #bye!
		default_hide_option = yes
		name = "giga_aeternum.4120.b"
	}
}

#buy 'em
country_event = {
	id = giga_aeternum.4121
	title = "giga_aeternum.4121.name"

	desc = {
		text = "giga_aeternum.4121.desc"
	}

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:flusion_douclaw
		room = "flusion_space_room"
	}

	option = { #bye!
		default_hide_option = yes
		name = "giga_aeternum.4121.a"
		response_text = "giga_aeternum.4121.a.response"
		custom_tooltip = "giga_aeternum.4121.a.tooltip"
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value > 25000
			}
		}
		add_resource = {
			energy = -25000
		}
		hidden_effect = {
			set_country_flag = kaiser_gave_aeternum_intel
			increase_kaiser_opinion = yes
			while = {
				count = 4
				increase_aeternite_intel = yes
			}
		}
	}

	option = { #bye!
		default_hide_option = yes
		name = "giga_aeternum.4121.b"
	}
}

#planetcraft broken
country_event = {
	id = giga_aeternum.4130
	title = "giga_aeternum.4130.name"
	desc = {
		text = "giga_aeternum.4130.desc.a"
		trigger = { NOT = { has_country_flag = blew_up_first_aeternite_planetcraft } }
	}
	desc = {
		text = "giga_aeternum.4130.desc.b"
		trigger = { has_country_flag = blew_up_first_aeternite_planetcraft }
	}

	picture = GFX_evt_large_explosion
	show_sound = event_structural_collapse
	is_triggered_only = yes

	trigger = {
		from = { is_country_type = dormant_aeternum }
		fromfromfrom = { is_ship_size = giga_aeternum_planetcraft }
	}

	immediate = {
		fromfromfrom = { save_event_target_as = aeternum_destroyed_planetcraft }
		fromfromfrom.solar_system = {
			save_global_event_target_as = aeternum_planetcraft_destroyed_system
			spawn_planet = {
				class = pc_giga_empty_space
				location = ROOT.fromfromfrom
				init_effect = { save_event_target_as = giga_temp_aet_aet_planet }
			}
			create_ambient_object = {
				type = planetcraft_death_explosion_effect
				location = ROOT.fromfromfrom
				duration = 30
				use_3d_location = yes
				entity_offset = 0
				scale = 1
			}
			create_ambient_object = {
				type = "aeternum_planetcraft_debris_field_object"
				location = ROOT.fromfromfrom
			}
			last_created_ambient_object = {
				save_event_target_as = giga_temp_aet_ambient_obj
			}
			spawn_megastructure = {
				type = aeternum_planetcraft_ruined
				owner = space_owner
				coords_from = event_target:giga_temp_aet_aet_planet
				init_effect = {
					save_event_target_as = giga_temp_aet_planet
				}
			}
			event_target:giga_temp_aet_aet_planet = { remove_planet = yes }
		}
	}

	option = {
		name = "giga_aeternum.4130.a"
		custom_tooltip = "giga_aeternum_2_intel_tooltip"
		trigger = { NOT = { has_country_flag = blew_up_first_aeternite_planetcraft } }
		event_target:giga_temp_aet_planet = {
			enable_special_project = {
				name = "INVESTIGATE_AETERNUM_PLANETCRAFT"
				location = this
				owner = root
			}
		}
		hidden_effect = {
			while = {
				count = 2
				increase_aeternite_intel = yes
			}
			set_country_flag = blew_up_first_aeternite_planetcraft
		}
	}

	option = {
		name = "giga_aeternum.4130.b"
		custom_tooltip = "giga_aeternum_2_intel_tooltip"
		trigger = { has_country_flag = blew_up_first_aeternite_planetcraft }
		hidden_effect = {
			while = {
				count = 2
				increase_aeternite_intel = yes
			}
		}
	}
}

#planetcraft analysed
ship_event = {
	id = giga_aeternum.4131
	title = "giga_aeternum.4131.name"
	desc = "giga_aeternum.4131.desc"
	picture = GFX_evt_fallen_empire
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4131.a"
		custom_tooltip = "giga_aeternum_3_intel_tooltip"
		hidden_effect = {
			owner = {
				set_country_flag = analysed_aeternite_planetcraft
				while = {
					count = 3
					increase_aeternite_intel = yes
				}
				event_target:giga_temp_aet_ambient_obj = { destroy_ambient_object = this }
			}
		}
	}
}

#yes
country_event = {
	id = giga_aeternum.4132
	title = "giga_aeternum.4132.name"
	desc = "giga_aeternum.4132.desc"
	picture = GFX_evt_fallen_empire
	show_sound = event_aeternum_intel_popup
	is_triggered_only = yes
	immediate = {
		set_country_flag = aeternite_planetcraft_possible
	}
	option = {
		name = "giga_aeternum.4132.a"
		add_research_option = giga_tech_aeternite_planetcraft
		add_tech_progress = {
			tech = giga_tech_aeternite_planetcraft
			progress = 0.15
		}
	}
}

#planetcraft repaired
country_event = {
	id = giga_aeternum.4133
	title = "giga_aeternum.4133.name"
	desc = "giga_aeternum.4133.desc"
	picture = GFX_evt_automated_dreadnought
	show_sound = event_ringworld_build_complete
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4133.a"
		add_resource = {
			influence = 50
		}
	}
}

#armor analysed
country_event = {
	id = giga_aeternum.4140
	title = "giga_aeternum.4140.name"
	desc = "giga_aeternum.4140.desc"
	picture = GFX_evt_engineering_research
	show_sound = event_aeternum_intel_popup
	is_triggered_only = yes
	immediate = {
		set_country_flag = aeternite_armor_possible
	}
	option = {
		name = "giga_aeternum.4140.a"
		add_research_option = giga_tech_aeternite_armor
		add_tech_progress = {
			tech = giga_tech_aeternite_armor
			progress = 0.20
		}
	}
}

#alondia
ship_event = {
	id = giga_aeternum.4200
	title = "giga_aeternum.4200.name"
	desc = {
		text = giga_aeternum.4200.a.desc
		trigger = {
			OR = {
				is_ship_class = shipclass_starbase #juggs
				is_ship_class = shipclass_military
				is_ship_class = shipclass_military_special
				is_ship_class = shipclass_transport
			}
		}
	}
	desc = {
		text = giga_aeternum.4200.b.desc
		trigger = {
			NOR = {
				is_ship_class = shipclass_starbase #juggs
				is_ship_class = shipclass_military
				is_ship_class = shipclass_military_special
				is_ship_class = shipclass_transport
			}
		}
	}
	picture = GFX_evt_binary_stars
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	trigger = {
		controller = { NOT = { has_country_flag = entered_alondia } }
		from = {
			has_star_flag = giga_core_03
		}
	}

	option = {
		name = "giga_aeternum.4200.a"
		hidden_effect = {
			controller = { set_country_flag = entered_alondia }
		}
	}
}

country_event = {
	id = giga_aeternum.4201
	title = "giga_aeternum.4201.name"
	desc = "giga_aeternum.4201.desc"
	picture = GFX_evt_binary_stars
	show_sound = event_aeternum_intel_popup
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4201.a"
		add_modifier = {
			modifier = disrupting_alondia_shield
			days = 1080
		}
		hidden_effect = {
			remove_country_flag = monitoring_aeternum
			set_country_flag = disrupting_alondia
			country_event = { id = giga_aeternum.4202 days = 1080 }
		}
	}

	option = {
		name = "giga_aeternum.4201.b"
		hidden_effect = {
			remove_country_flag = monitoring_aeternum
		}
	}
}

#rip the shield
country_event = {
	id = giga_aeternum.4202
	title = "giga_aeternum.4202.name"
	desc = "giga_aeternum.4202.desc"
	picture = GFX_evt_clocks
	show_sound = event_power_down
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = alondia_shield_gone }
	}

	option = {
		name = "giga_aeternum.4202.a"
		event_target:aeternum_birch_world = {
			remove_modifier = birch_world_grand_shield
		}
		hidden_effect = {
			remove_country_flag = disrupting_alondia
			if = {
				limit = { NOT = { has_global_flag = giga_core_aeternum_4 } }
				event_target:aeternum_birch_world = {
					set_planet_entity = { entity = birch_world_01_entity }
				}
			}

			if = {
				limit = { has_modifier = disrupting_alondia_shield }
				remove_modifier = disrupting_alondia_shield
			}
			set_global_flag = alondia_shield_gone
		}
	}
}

#Aeternum detection disruption
country_event = {
	id = giga_aeternum.4203
	title = "giga_aeternum.4203.name"
	desc = "giga_aeternum.4203.desc"
	picture = GFX_evt_psionic_battle
	show_sound = event_aeternum_intel_popup
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4203.a"
		custom_tooltip = "giga_aeternum.4203.a_tooltip"
		hidden_effect = {
			add_modifier = {
				modifier = disrupting_aiondia_detection
				days = 1080
			}
			remove_country_flag = monitoring_aeternum
			set_country_flag = disrupting_alondia #only able to hit detection or the shield, one at a time
			country_event = { id = giga_aeternum.4204 days = 1080 }
		}
	}

	option = {
		name = "giga_aeternum.4203.b"
		hidden_effect = {
			remove_country_flag = monitoring_aeternum
		}
	}
}

#Rip Aeternum Detection capabilities
country_event = {
	id = giga_aeternum.4204
	title = "giga_aeternum.4204.name"
	desc = "giga_aeternum.4204.desc"
	picture = GFX_evt_shroudwalker_enclave
	show_sound = event_power_down
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = aeternum_blind }
		NOT = { has_global_flag = aeternum_vanquished }
	}
	immediate = {#Pocket sand go!
		hidden_effect = {
			event_target:aeternum_birch_world = {
				solar_system = {
					set_star_flag = storm_system
					star = {
						create_ambient_object = {
							type = "aet_psi_storm_1"
							location = this
						}
						last_created_ambient_object = {
							set_location = {
								target = prev
								distance = 0
								angle = random
							}
							set_ambient_object_flag = aet_psi_storm
						}
					}
					add_modifier = {
						modifier = blinding_storm
					}
				}
			}
			event_target:birch_aeternum = {
				add_modifier = {
					modifier = aeternum_blind
					days = -1
				}
			}
		}
	}
	
	option = {
		name = "giga_aeternum.4204.a"
		hidden_effect = {
			remove_country_flag = disrupting_alondia
			if = {
				limit = { has_modifier = disrupting_aiondia_detection }
				remove_modifier = disrupting_aiondia_detection
			}
			set_global_flag = aeternum_blind
		}
	}
}

#fall of alondia
country_event = {
	id = giga_aeternum.4300
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		fromfrom = { has_planet_flag = aeternum_birch_world }
		has_global_flag = aeternum_awakening_ongoing
	}

	immediate = {
		# give_technology = { tech = giga_tech_birch_world_2 }
		# give_technology = { tech = giga_tech_birch_world_3 }
		# give_technology = { tech = giga_tech_birch_world_4 }
		set_country_flag = already_owned_aiondia
		fromfrom = {
			katzen_clear_capitals = yes
			if = {
				limit = {
					ROOT = { is_gestalt = no }
				}
				add_building = building_system_capital
			}
			else_if = {
				limit = {
					ROOT = { is_machine_empire = yes }
				}
				add_building = building_machine_system_capital
			}
			else_if = {
				limit = {
					ROOT = { is_hive_empire = no }
				}
				add_building = building_hive_major_capital
			}
		}
		this = { save_global_event_target_as = aeternite_conqueror }
		country_event = { id = giga_aeternum.4301 } #fall event
		every_country = {
			limit = {
				NOT = { is_country = event_target:aeternite_conqueror }
			}
			country_event = { id = giga_aeternum.4302 }
		}
		country_event = { id = giga_aeternum.4303 days = 15 }
	}
}

# Aiondia gets bombed and the aeternum takes the L
# This = Planet
# From = Bombarder
planet_event = {
	id = giga_aeternum.43001
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_planet_flag = aeternum_birch_world
		has_global_flag = aeternum_awakening_ongoing
	}

	immediate = {
		# give_technology = { tech = giga_tech_birch_world_2 }
		# give_technology = { tech = giga_tech_birch_world_3 }
		# give_technology = { tech = giga_tech_birch_world_4 }
		# set_country_flag = already_owned_aiondia 
		remove_all_buildings = yes #Aiondia bombed out, so all the ruined buildings should go bye
		set_global_flag = giga_aiondia_bombed
		from = { 
			save_global_event_target_as = aeternite_conqueror 
			country_event = { id = giga_aeternum.4301 } #fall event
			country_event = { id = giga_aeternum.4303 days = 15 }
		}
		every_country = {
			limit = {
				NOT = { is_country = event_target:aeternite_conqueror }
			}
			country_event = { id = giga_aeternum.4302 }
		}
	}
}

#AAA Won now go home
country_event = {
	id = giga_aeternum.8040
	title = "giga_aeternum.8040.name"
	desc = "giga_aeternum.8040.desc"
	picture = GFX_evt_arguing_senate
	show_sound = event_announcement
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.8040.a"
		custom_tooltip = "giga_aeternum.8040.a.tooltip"
	}
}
#AAA lost/ all members left
#This event should only fire in a very very few circumstances since its usually a gameover.
country_event = {
	id = giga_aeternum.8041
	title = "giga_aeternum.8041.name"
	desc = "giga_aeternum.8041.desc"
	picture = GFX_evt_arguing_senate
	show_sound = event_announcement
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.8041.a"
		custom_tooltip = "giga_aeternum.8041.a.tooltip"
	}
}
#AAA Disbanded in favor of empire
country_event = {
	id = giga_aeternum.8042
	title = "giga_aeternum.8042.name"
	desc = "giga_aeternum.8042.desc"
	picture = GFX_evt_arguing_senate
	show_sound = event_announcement
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.8042.a"
		custom_tooltip = "giga_aeternum.8042.a.tooltip"
	}
}
#alondia falls!
country_event = {
	id = giga_aeternum.4301
	title = "giga_aeternum.4301.name"
	desc = {
		trigger = { NOT = { has_global_flag = giga_aiondia_bombed } }	
		text = "giga_aeternum.4301.desc"
	}
	desc = {
		trigger = { has_global_flag = giga_aiondia_bombed }
		text = "giga_aeternum.4301.desc_bombed" #Aiondia got bombed, slightly different description
	}
	picture = GFX_evt_victorious_army
	show_sound = event_celebration
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4301.a"
		add_resource = {
			influence = 500
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
		}
		add_modifier = {
			modifier = defeated_aeternum
			days = -1
		}
		event_target:aeternum_birch_world = {
			add_modifier = {
				modifier = aet_birch_world_tech_debuff_1
				days = -1
			}
			add_modifier = {
				modifier = aet_birch_world_poorly_mapped_1
				days = -1
			}
		}
		hidden_effect = {
			country_event = { id = giga_aeternum.4305 days = 60 }
		}
	}
}

#alondia falls! (broadcast)
country_event = {
	id = giga_aeternum.4302
	title = "giga_aeternum.4302.name"
	desc = {
		trigger = { NOT = { has_global_flag = giga_aiondia_bombed } }	
		text = "giga_aeternum.4302.desc"
	}
	desc = {
		trigger = { has_global_flag = giga_aiondia_bombed }
		text = "giga_aeternum.4302.desc_bombed" #Aiondia got bombed, slightly different description
	}
	picture = GFX_evt_victorious_army
	show_sound = event_celebration
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4302.a"
	}
}

#aeternum dies
country_event = {
	id = giga_aeternum.4303
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_global_flag = aeternum_awakening_ongoing
		set_global_flag = aeternum_vanquished
		event_target:birch_aeternum = { destroy_country = yes }
		every_country = {
			country_event = { id = giga_aeternum.4304 }
			clear_aet_intel_modifier = yes
		}
		every_megastructure = {
			limit = {
				OR = {
					is_megastructure_type = aeternum_forge_0
					is_megastructure_type = aeternum_forge_1
				}
			}
			planet = {
				remove_planet_flag = has_aeternite_forge
				giga_clear_has_mega_flag = { MEGA = prev }
			}
			remove_megastructure = THIS
		}
		event_target:aeternite_conqueror = { #Achievement
			if = {
				limit = {
					NOT = { has_global_flag = giga_achievements_disabled }
					NOT = {
						has_country_flag = giga_achievement_aet1
					}
					NOR = {
						has_global_flag = giga_core_aeternum_2
						has_global_flag = giga_core_aeternum_3
					}
				}
				set_country_flag = giga_achievement_aet1
				set_timed_country_flag = { flag = giga_achievement_aet1_notification days = 30 }
				giga_achievement_sound = yes
			}
			if = {
				limit = {
					NOT = { has_global_flag = giga_achievements_disabled }
					NOT = {
						has_country_flag = giga_achievement_aet2
					}
					has_global_flag = giga_core_aeternum_2
				}
				set_country_flag = giga_achievement_aet1
				set_country_flag = giga_achievement_aet2
				set_timed_country_flag = { flag = giga_achievement_aet2_notification days = 30 }
				giga_achievement_sound = yes
			}
			if = {
				limit = {
					NOT = { has_global_flag = giga_achievements_disabled }
					NOT = {
						has_country_flag = giga_achievement_aet3
					}
					OR = {
						has_global_flag = giga_core_aeternum_3
						has_global_flag = giga_core_aeternum_4
					}
				}
				set_country_flag = giga_achievement_aet1
				set_country_flag = giga_achievement_aet2
				set_country_flag = giga_achievement_aet3
				set_timed_country_flag = { flag = giga_achievement_aet3_notification days = 30 }
				giga_achievement_sound = yes
			}
			if = {
				limit = {
					NOT = { has_global_flag = giga_achievements_disabled }
					has_global_flag = premature_aeternum_awakening
				}
				set_country_flag = giga_achievement_aet5
				set_timed_country_flag = { flag = giga_achievement_aet5_notification days = 30 }
				giga_achievement_sound = yes
			}
		}
	}
}

#end of aeternum!
country_event = {
	id = giga_aeternum.4304
	title = "giga_aeternum.4304.name"
	desc = "giga_aeternum.4304.desc"
	picture = GFX_evt_clocks
	show_sound = event_radio_chatter
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4304.a"
		hidden_effect = {
			if = {
				limit = {
					has_event_chain = aeternum_chain
					NOR = {
						has_special_project = INVESTIGATE_AETERNUM_FORGE
						has_special_project = INVESTIGATE_AETERNUM_PLANETCRAFT
						has_special_project = INVESTIGATE_AETERNUM_INTEL
					}
				}
				end_event_chain = aeternum_chain
			}
		}
	}
}

#alondia tech
country_event = {
	id = giga_aeternum.4305
	title = "giga_aeternum.4305.name"
	desc = {
		trigger = { NOT = { has_global_flag = giga_aiondia_bombed } }	
		text = "giga_aeternum.4305.desc"
	}
	desc = {
		trigger = { has_global_flag = giga_aiondia_bombed }
		text = "giga_aeternum.4305.desc_bombed" #Aiondia got bombed, slightly different description
	}
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4305.a"
		custom_tooltip = "giga_aeternum.4305.a.tooltip"
		hidden_effect = {
			country_event = { id = giga_aeternum.4312 days = 80 }
			country_event = { id = giga_aeternum.4313 days = 140 }
			country_event = { id = giga_aeternum.4320 days = 220 }
		}
	}
}

event = {
	id = giga_aeternum.4306
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_global_flag = aeternum_vanquished
		any_country = {
			any_planet_within_border = {
				is_colony = yes
				has_planet_flag = aeternum_birch_world
			}
		}
	}

	immediate = {
		random = {
			chance = 30
			event_target:aeternum_birch_world = {
				owner = {
					increase_aeternite_intel = yes
				}
			}
		}
	}
}

#ALONDIA MONTHLY EVENT
country_event = {
	id = giga_aeternum.4310
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_planet_within_border = {
			is_colony = yes
			has_planet_flag = aeternum_birch_world
			planet_is_hostile = no
		}
	}

	immediate = {
		if = { #aiondia conquered
			limit = { NOT = { has_country_flag = already_owned_aiondia } }
			set_country_flag = already_owned_aiondia
			if = {
				limit = { NOT = { has_global_flag = aeternum_vanquished } }
				country_event = { id = giga_aeternum.4303 days = 5 }
			}
			country_event = { id = giga_aeternum.4305 days = 60 }
			# if = {
			# 	limit = { NOT = { has_technology = giga_tech_birch_world_2 } }
			# 	give_technology = { tech = giga_tech_birch_world_2 }
			# }
			# if = {
			# 	limit = { NOT = { has_technology = giga_tech_birch_world_3 } }
			# 	give_technology = { tech = giga_tech_birch_world_3 }
			# }
			# if = {
			# 	limit = { NOT = { has_technology = giga_tech_birch_world_4 } }
			# 	give_technology = { tech = giga_tech_birch_world_4 }
			# }
			event_target:aeternum_birch_world = {
				clear_aet_birch_exp_modifier = yes
				clear_aet_birch_tech_modifier = yes
				add_modifier = {
					modifier = aet_birch_world_tech_debuff_1
					days = -1
				}
				add_modifier = {
					modifier = aet_birch_world_poorly_mapped_1
					days = -1
				}
			}
		}
		if = {
			limit = {
				event_target:aeternum_birch_world = {
					has_modifier = aet_birch_world_poorly_mapped_1
				}
				check_variable = {
					which = aiondia_explored_perc
					value >= 25
				}
			}
			event_target:aeternum_birch_world = {
				clear_aet_birch_exp_modifier = yes
				add_modifier = {
					modifier = aet_birch_world_poorly_mapped_2
					days = -1
				}
			}
		}
		else_if = {
			limit = {
				event_target:aeternum_birch_world = {
					has_modifier = aet_birch_world_poorly_mapped_2
				}
				check_variable = {
					which = aiondia_explored_perc
					value >= 50
				}
			}
			event_target:aeternum_birch_world = {
				clear_aet_birch_exp_modifier = yes
				add_modifier = {
					modifier = aet_birch_world_poorly_mapped_3
					days = -1
				}
			}
		}
		else_if = {
			limit = {
				event_target:aeternum_birch_world = {
					has_modifier = aet_birch_world_poorly_mapped_3
				}
				check_variable = {
					which = aiondia_explored_perc
					value >= 75
				}
			}
			event_target:aeternum_birch_world = {
				clear_aet_birch_exp_modifier = yes
				add_modifier = {
					modifier = aet_birch_world_poorly_mapped_4
					days = -1
				}
			}
		}
		else_if = {
			limit = {
				event_target:aeternum_birch_world = {
					has_modifier = aet_birch_world_poorly_mapped_4
				}
				check_variable = {
					which = aiondia_explored_perc
					value >= 100
				}
			}
			event_target:aeternum_birch_world = {
				clear_aet_birch_exp_modifier = yes
			}
		}
		if = {
			limit = {
				event_target:aeternum_birch_world = {
					has_modifier = aet_birch_world_tech_debuff_1
				}
				check_variable = {
					which = aeternite_intel_count
					value >= 40
				}
			}
			event_target:aeternum_birch_world = {
				clear_aet_birch_tech_modifier = yes
				add_modifier = {
					modifier = aet_birch_world_tech_debuff_2
					days = -1
				}
			}
			country_event = { id = giga_aeternum.43101 }
		}
		else_if = {
			limit = {
				event_target:aeternum_birch_world = {
					has_modifier = aet_birch_world_tech_debuff_2
				}
				check_variable = {
					which = aeternite_intel_count
					value >= 50
				}
			}
			event_target:aeternum_birch_world = {
				clear_aet_birch_tech_modifier = yes
				add_modifier = {
					modifier = aet_birch_world_tech_debuff_3
					days = -1
				}
			}
			country_event = { id = giga_aeternum.43101 }
		}
		else_if = {
			limit = {
				event_target:aeternum_birch_world = {
					has_modifier = aet_birch_world_tech_debuff_3
				}
				check_variable = {
					which = aeternite_intel_count
					value >= 60
				}
			}
			event_target:aeternum_birch_world = {
				clear_aet_birch_tech_modifier = yes
				add_modifier = {
					modifier = aet_birch_world_tech_debuff_4
					days = -1
				}
			}
			country_event = { id = giga_aeternum.43101 }
		}
		else_if = {
			limit = {
				event_target:aeternum_birch_world = {
					has_modifier = aet_birch_world_tech_debuff_4
				}
				check_variable = {
					which = aeternite_intel_count
					value >= 70
				}
			}
			event_target:aeternum_birch_world = {
				clear_aet_birch_tech_modifier = yes
			}
			country_event = { id = giga_aeternum.43102 }
		}
		if = {
			limit = {
				event_target:aeternum_birch_world = {
					has_modifier = birch_world_grand_shield
					planet_devastation > 1
				}
			}
			event_target:aeternum_birch_world = {
				add_planet_devastation = -100
			}
		}
		if = {
			limit = {
				event_target:aeternum_birch_world = {
					NOT = { has_deposit = d_aeternum_decaying_hyperstructure }
					has_modifier = birch_world_decaying
				}
			}
			country_event = { id = giga_aeternum.4311 }
		}
	}
}

#alondia understood
country_event = {
	id = giga_aeternum.43101
	title = "giga_aeternum.43101.name"
	desc = "giga_aeternum.43101.desc"
	picture = GFX_evt_physics_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.43101.a"
		custom_tooltip = "giga_aeternum.43101.a.tooltip"
		add_resource = {
			influence = 100
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 6
		}
	}
}

country_event = {
	id = giga_aeternum.43102
	title = "giga_aeternum.43102.name"
	desc = "giga_aeternum.43102.desc"
	picture = GFX_evt_clocks
	show_sound = event_celebration
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.43102.a"
		custom_tooltip = "giga_aeternum.43102.a.tooltip"
		add_resource = {
			influence = 300
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
		}
	}
}


#alondia repaired
country_event = {
	id = giga_aeternum.4311
	title = "giga_aeternum.4311.name"
	desc = "giga_aeternum.4311.desc"
	picture = GFX_evt_clocks
	show_sound = event_celebration
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4311.a"
		event_target:aeternum_birch_world = {
			remove_modifier = birch_world_decaying
		}
	}
}

#the shield
country_event = {
	id = giga_aeternum.4312
	title = "giga_aeternum.4312.name"
	desc = "giga_aeternum.4312.desc"
	picture = GFX_evt_binary_stars
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	immediate = {
		event_target:aeternum_birch_world = {
			set_planet_flag = aet_shield_toggle_possible
		}
	}

	option = {
		name = "giga_aeternum.4312.a"
		custom_tooltip = "giga_aeternum.4312.a.tooltip"
	}
}

#the beacon
country_event = {
	id = giga_aeternum.4313
	title = "giga_aeternum.4313.name"
	desc = { text = giga_aeternum.4313.desc trigger = { NOT = { has_global_flag = aeternum_blind } } }
	desc = { text = giga_aeternum.4313.blind.desc trigger = { has_global_flag = aeternum_blind } }
	picture = GFX_evt_surreal_visions
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes
	trigger = {
		# If the starbase building isn't there no event, although it should be there
		event_target:aeternum_birch_world = {
			solar_system.starbase = {
				count_starbase_buildings = { 
					type = giga_aiondia_listening_post 
					count = 1
				} 
			}
		}
	}
	immediate = {
		every_country = {
			limit = { has_modifier = disrupting_aiondia_detection }
			remove_modifier = disrupting_aiondia_detection
			remove_country_flag = disrupting_alondia
		}
	}

	option = {# you didn't blind them
		trigger = {
			NOT = { has_global_flag = aeternum_blind } 
		}
		name = "giga_aeternum.4313.a"
		# custom_tooltip = "giga_aeternum.4313.a.tooltip"
		hidden_effect = {
			country_event = { id = giga_aeternum.4314 days = 30 }
		}
	}

	option = {# you leave the siphons on
		trigger = {
			has_global_flag = aeternum_blind
		}
		name = "giga_aeternum.4313.b"
		custom_tooltip = "giga_aeternum.4313.b.tooltip"
		hidden_effect = {
			set_country_flag = slow_storm_end
			country_event = { id = giga_aeternum.4314 days = 1080 random = 60 }
		}
	}

	option = {# you turn them off
		trigger = {
			has_global_flag = aeternum_blind
		}
		name = "giga_aeternum.4313.c"
		custom_tooltip = "giga_aeternum.4313.c.tooltip"
		hidden_effect = {
			event_target:aeternum_birch_world = {
				solar_system = { 
					every_system_megastructure = {
						limit = {
							is_megastructure_type = psychic_hypersiphon_3_aeternum
						}
						set_timed_megastructure_flag = {
							flag = siphon_disabled
							days = 60
						}
					}
				}
			}
			set_country_flag = quick_storm_end
			country_event = { id = giga_aeternum.4314 days = 60 }
		}
	}

}

#It's Hungry
country_event = {
	id = giga_aeternum.4314
	title = "giga_aeternum.4314.name"
	desc = { text = giga_aeternum.4314.normal.desc trigger = { NOT = { has_global_flag = aeternum_blind } is_machine_empire = no } }
	desc = { text = giga_aeternum.4314.machine.desc trigger = { NOT = { has_global_flag = aeternum_blind  } is_machine_empire = yes } }
	desc = { text = giga_aeternum.4314.blind.desc trigger = { has_global_flag = aeternum_blind is_machine_empire = no } }
	desc = { text = giga_aeternum.4314.machine.blind.desc trigger = { has_global_flag = aeternum_blind is_machine_empire = yes } }
	picture = GFX_evt_zro_3
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	immediate = {
		event_target:aeternum_birch_world = {
			solar_system = { 
				if = {
					limit = {
						has_global_flag = aeternum_blind
					}
					remove_star_flag = storm_system
					every_ambient_object = {
						limit = { has_ambient_object_flag = aet_psi_storm}
						destroy_ambient_object = this
					}
					remove_modifier = blinding_storm
				}
			}
		}
	}

	option = { #purifier
		name = "giga_aeternum.4314.purifier.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_gestalt = no
			has_valid_civic = civic_fanatic_purifiers
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.purifier.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_gestalt = no
			has_valid_civic = civic_fanatic_purifiers
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.purifier.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_gestalt = no
			has_valid_civic = civic_fanatic_purifiers
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}

	option = { #spiritualist
		name = "giga_aeternum.4314.spirit.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_spiritualist = yes
			is_homicidal = no
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.spirit.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_spiritualist = yes
			is_homicidal = no
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.spirit.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_spiritualist = yes
			is_homicidal = no
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}
	
	option = { #materialist
		name = "giga_aeternum.4314.material.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_materialist = yes
			is_homicidal = no
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.material.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_materialist = yes
			is_homicidal = no
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.material.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_materialist = yes
			is_homicidal = no
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}
	
	option = { #Xenophobe
		name = "giga_aeternum.4314.phobe.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_xenophobe = yes
			is_spiritualist = no
			is_materialist = no
			is_homicidal = no
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.phobe.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_xenophobe = yes
			is_spiritualist = no
			is_materialist = no
			is_homicidal = no
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.phobe.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_xenophobe = yes
			is_spiritualist = no
			is_materialist = no
			is_homicidal = no
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}

	option = { #Xenophile
		name = "giga_aeternum.4314.phile.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_xenophile = yes
			is_spiritualist = no
			is_materialist = no
			is_homicidal = no
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.phile.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_xenophile = yes
			is_spiritualist = no
			is_materialist = no
			is_homicidal = no
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.phile.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_xenophile = yes
			is_spiritualist = no
			is_materialist = no
			is_homicidal = no
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}

	option = { #Egalitarian
		name = "giga_aeternum.4314.egal.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_egalitarian = yes
			is_xenophobe = no
			is_xenophile = no
			is_spiritualist = no
			is_materialist = no
			is_homicidal = no
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.egal.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_egalitarian = yes
			is_xenophobe = no
			is_xenophile = no
			is_spiritualist = no
			is_materialist = no
			is_homicidal = no
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.egal.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_egalitarian = yes
			is_xenophobe = no
			is_xenophile = no
			is_spiritualist = no
			is_materialist = no
			is_homicidal = no
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}

	option = { #Authoritarian
		name = "giga_aeternum.4314.auth.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_authoritarian = yes
			is_xenophobe = no
			is_xenophile = no
			is_spiritualist = no
			is_materialist = no
			is_homicidal = no
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.auth.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_authoritarian = yes
			is_xenophobe = no
			is_xenophile = no
			is_spiritualist = no
			is_materialist = no
			is_homicidal = no
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.auth.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_authoritarian = yes
			is_xenophobe = no
			is_xenophile = no
			is_spiritualist = no
			is_materialist = no
			is_homicidal = no
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}

	option = { #hive
		name = "giga_aeternum.4314.hive.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_hive_empire = yes
			NOT = { has_valid_civic = civic_hive_devouring_swarm } 
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.hive.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_hive_empire = yes
			NOT = { has_valid_civic = civic_hive_devouring_swarm } 
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.hive.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_hive_empire = yes
			NOT = { has_valid_civic = civic_hive_devouring_swarm } 
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}

	option = { #Machine
		name = "giga_aeternum.4314.machine.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_machine_empire = yes
			NOR = {
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_machine_terminator
				has_valid_civic = civic_machine_assimilator
			}
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.machine.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_machine_empire = yes
			NOR = {
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_machine_terminator
				has_valid_civic = civic_machine_assimilator
			}
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.machine.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_machine_empire = yes
			NOR = {
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_machine_terminator
				has_valid_civic = civic_machine_assimilator
			}
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}

	option = { #asimilator
		name = "giga_aeternum.4314.assimilator.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_machine_empire = yes
			has_valid_civic = civic_machine_assimilator
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.assimilator.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_machine_empire = yes
			has_valid_civic = civic_machine_assimilator
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.assimilator.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_machine_empire = yes
			has_valid_civic = civic_machine_assimilator
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}

	option = { #servitor
		name = "giga_aeternum.4314.servitor.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_machine_empire = yes
			has_valid_civic = civic_machine_servitor
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.servitor.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_machine_empire = yes
			has_valid_civic = civic_machine_servitor
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.servitor.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_machine_empire = yes
			has_valid_civic = civic_machine_servitor
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}

	option = { #exterminator
		name = "giga_aeternum.4314.exterminator.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_machine_empire = yes
			has_valid_civic = civic_machine_terminator
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.exterminator.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_machine_empire = yes
			has_valid_civic = civic_machine_terminator
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.exterminator.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_machine_empire = yes
			has_valid_civic = civic_machine_terminator
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}

	option = { #swarm
		name = "giga_aeternum.4314.swarm.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			is_hive_empire = yes
			has_valid_civic = civic_hive_devouring_swarm
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.swarm.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			is_hive_empire = yes
			has_valid_civic = civic_hive_devouring_swarm
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.swarm.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			is_hive_empire = yes
			has_valid_civic = civic_hive_devouring_swarm
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}

	option = { #default
		name = "giga_aeternum.4314.a"
		custom_tooltip = "giga_aeternum.4314.a.tooltip"
		trigger = {
			NOR = {
				is_hive_empire = yes
				is_machine_empire = yes
				is_authoritarian = yes
				is_xenophile = yes
				is_xenophobe = yes
				is_spiritualist = yes
				is_materialist = yes
				is_homicidal = yes
			}
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 10000
			max = 100000
		}
		hidden_effect = {
			dismantle_aiondia_listeningpost = yes
		}
	}
	option = {
		name = "giga_aeternum.4314.b"
		custom_tooltip = "giga_aeternum.4314.b.tooltip"
		trigger = {
			NOR = {
				is_hive_empire = yes
				is_machine_empire = yes
				is_authoritarian = yes
				is_xenophile = yes
				is_xenophobe = yes
				is_spiritualist = yes
				is_materialist = yes
				is_homicidal = yes
			}
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_starved
			}
		}
	}
	option = {
		name = "giga_aeternum.4314.c"
		custom_tooltip = "giga_aeternum.4314.c.tooltip"
		trigger = {
			NOR = {
				is_hive_empire = yes
				is_machine_empire = yes
				is_authoritarian = yes
				is_xenophile = yes
				is_xenophobe = yes
				is_spiritualist = yes
				is_materialist = yes
				is_homicidal = yes
			}
		}
		hidden_effect = {
			event_target:aeternum_birch_world.solar_system = {
				set_star_flag = beacon_feasts
			}
		}
	}
}

#map out Aiondia
country_event = {
	id = giga_aeternum.4320
	title = "giga_aeternum.4320.name"
	desc = "giga_aeternum.4320.desc"
	picture = GFX_evt_derelict_interior
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = can_explore_aiondia }
	}

	immediate = {
		event_target:global_event_country = {
			create_leader = {
				class = scientist
				traits = {
					trait = katzen_trait_elite
				}
				effect = {
					save_global_event_target_as = aet_exp_name_tool
				}
			}
		}
	}

	option = {
		name = "giga_aeternum.4320.a"
		custom_tooltip = "giga_aeternum.4320.a.tooltip"
		hidden_effect = {
			set_country_flag = can_explore_aiondia
			set_variable = {
				which = aiondia_explored_perc
				value = 1
			}
			set_variable = {
				which = aet_expedition_total_intel_count
				value = 0
			}
			set_variable = {
				which = aet_expedition_total_artifact_count
				value = 0
			}
			set_variable = {
				which = aet_expedition_total_discovery_count
				value = 0
			}
		}
	}
}

#expedition
country_event = {
	id = giga_aeternum.4321
	title = "giga_aeternum.4321.name"
	desc = "giga_aeternum.4321.desc"
	is_triggered_only = yes

	diplomatic = yes

	immediate = {
		save_global_event_target_as = aet_exp_sender
	}

	picture_event_data = {
		portrait = ROOT.species
		room = aeternum_monitor_room
	}

	option = { #mapping
		name = "giga_aeternum.3010.mapping"
		custom_tooltip = "aeternum_mapping_tooltip"
		trigger = {
			has_country_flag = can_explore_aiondia
		}
		allow = {
			hidden_trigger = {
				always = no
			}
		}
	}

	option = { #stats
		name = "giga_aeternum.3010.stats"
		custom_tooltip = "aeternum_stats_tooltip"
		trigger = {
			has_country_flag = doing_aiondia_expedition
		}
		allow = {
			hidden_trigger = {
				always = no
			}
		}
	}

	option = { #big exped
		name = "giga_aeternum.4321.big"
		custom_tooltip = "giga_aeternum.4321.big.tooltip"
		trigger = { NOR = { has_country_flag = doing_aiondia_expedition has_country_flag = aiondia_fully_mapped } }
		add_resource = {
			energy = -100000
			alloys = -40000
		}
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value > 100000
			}
			resource_stockpile_compare = {
				resource = alloys
				value > 40000
			}
		}
		hidden_effect = {
			set_country_flag = doing_aiondia_expedition
			set_country_flag = large_aiondia_exp
			set_variable = {
				which = aet_exp_engineer_count
				value = 0
			}
			set_variable = {
				which = aet_exp_panzer_count
				value = 0
			}
			set_variable = {
				which = aet_exp_smarties_count
				value = 0
			}
			set_variable = {
				which = aet_exp_return_time
				value = 60
			}
			set_variable = {
				which = aet_init_attach_capacity
				value = 5
			}
			set_variable = {
				which = aet_attach_capacity
				value = aet_init_attach_capacity
			}
			set_variable = {
				which = aet_exp_hp
				value = 150
			}
			set_variable = {
				which = aet_exp_attack
				value = 100
			}
			set_variable = {
				which = aet_exp_smarts
				value = 100
			}
			set_variable = {
				which = aet_exp_decay_monthly
				value = 100
			}
			add_modifier = {
				modifier = aet_exp_3
				days = 1800
			}
			event_target:aet_exp_name_tool = {
				set_name = "Colossal"
			}
			country_event = { id = giga_aeternum.4322 }
		}
	}

	option = { #med exped
		name = "giga_aeternum.4321.med"
		custom_tooltip = "giga_aeternum.4321.med.tooltip"
		trigger = { NOR = { has_country_flag = doing_aiondia_expedition has_country_flag = aiondia_fully_mapped } }
		add_resource = {
			energy = -75000
			alloys = -30000
		}
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value > 75000
			}
			resource_stockpile_compare = {
				resource = alloys
				value > 30000
			}
		}
		hidden_effect = {
			set_country_flag = doing_aiondia_expedition
			set_country_flag = med_aiondia_exp
			set_variable = {
				which = aet_exp_engineer_count
				value = 0
			}
			set_variable = {
				which = aet_exp_panzer_count
				value = 0
			}
			set_variable = {
				which = aet_exp_smarties_count
				value = 0
			}
			set_variable = {
				which = aet_exp_return_time
				value = 48
			}
			set_variable = {
				which = aet_init_attach_capacity
				value = 4
			}
			set_variable = {
				which = aet_attach_capacity
				value = aet_init_attach_capacity
			}
			set_variable = {
				which = aet_exp_hp
				value = 140
			}
			set_variable = {
				which = aet_exp_attack
				value = 90
			}
			set_variable = {
				which = aet_exp_smarts
				value = 90
			}
			set_variable = {
				which = aet_exp_decay_monthly
				value = 100
			}
			event_target:aet_exp_name_tool = {
				set_name = "Regular"
			}
			add_modifier = {
				modifier = aet_exp_2
				days = 1440
			}
			country_event = { id = giga_aeternum.4322 }
		}
	}

	option = { #small exped
		name = "giga_aeternum.4321.small"
		custom_tooltip = "giga_aeternum.4321.small.tooltip"
		trigger = { NOR = { has_country_flag = doing_aiondia_expedition has_country_flag = aiondia_fully_mapped } }
		add_resource = {
			energy = -60000
			alloys = -20000
		}
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value > 60000
			}
			resource_stockpile_compare = {
				resource = alloys
				value > 20000
			}
		}
		hidden_effect = {
			set_country_flag = doing_aiondia_expedition
			set_country_flag = small_aiondia_exp
			set_variable = {
				which = aet_exp_engineer_count
				value = 0
			}
			set_variable = {
				which = aet_exp_panzer_count
				value = 0
			}
			set_variable = {
				which = aet_exp_smarties_count
				value = 0
			}
			set_variable = {
				which = aet_exp_return_time
				value = 36
			}
			set_variable = {
				which = aet_init_attach_capacity
				value = 3
			}
			set_variable = {
				which = aet_attach_capacity
				value = aet_init_attach_capacity
			}
			set_variable = {
				which = aet_exp_hp
				value = 100
			}
			set_variable = {
				which = aet_exp_attack
				value = 80
			}
			set_variable = {
				which = aet_exp_smarts
				value = 80
			}
			set_variable = {
				which = aet_exp_decay_monthly
				value = 100
			}
			event_target:aet_exp_name_tool = {
				set_name = "Small"
			}
			country_event = { id = giga_aeternum.4322 }
			add_modifier = {
				modifier = aet_exp_1
				days = 1080
			}
		}
	}

	option = {
		name = "giga_aeternum.4321.tracktime"
		trigger = { has_country_flag = doing_aiondia_expedition }
		allow = {
			always = no
		}
	}

	option = { #forget it
		default_hide_option = yes
		name = "giga_aeternum.4321.bye"
		hidden_effect = {
			remove_country_flag = monitoring_aeternum
		}
	}
}

country_event = {
	id = giga_aeternum.4322
	title = "giga_aeternum.4322.name"
	desc = "giga_aeternum.4322.desc"
	picture = GFX_evt_excavation_team
	show_sound = event_machinery
	is_triggered_only = yes

	immediate = {
		save_global_event_target_as = aet_exp_sender
	}

	option = { #add engineers
		name = "giga_aeternum.4322.engineer"
		custom_tooltip = "giga_aeternum.4322.engineer.tooltip"
		allow = {
			hidden_trigger = {
				NOT = {
					check_variable = {
						which = aet_attach_capacity
						value = 0
					}
				}
				resource_stockpile_compare = {
					resource = alloys
					value > 6000
				}
			}
		}
		add_resource = {
			alloys = -6000
		}
		hidden_effect = {
			change_variable = {
				which = aet_exp_engineer_count
				value = 1
			}
			change_variable = {
				which = aet_attach_capacity
				value = -1
			}
			increase_exp_smarts_10 = yes

			decrease_exp_attack_10 = yes
			decrease_exp_attack_10 = yes

			increase_exp_hp_10 = yes

			change_variable = {
				which = aet_exp_decay_monthly
				value = -20
			}

			country_event = { id = giga_aeternum.4322 }
		}
	}

	option = { #ADD PANZERS
		name = "giga_aeternum.4322.panzer"
		custom_tooltip = "giga_aeternum.4322.panzer.tooltip"
		allow = {
			hidden_trigger = {
				NOT = {
					check_variable = {
						which = aet_attach_capacity
						value = 0
					}
				}
				resource_stockpile_compare = {
					resource = alloys
					value > 10000
				}
			}
		}
		add_resource = {
			alloys = -10000
		}

		hidden_effect = {
			change_variable = {
				which = aet_exp_panzer_count
				value = 1
			}
			change_variable = {
				which = aet_attach_capacity
				value = -1
			}
			decrease_exp_smarts_10 = yes
			decrease_exp_smarts_10 = yes

			increase_exp_attack_10 = yes
			increase_exp_attack_10 = yes
			increase_exp_attack_10 = yes

			increase_exp_hp_10 = yes
			country_event = { id = giga_aeternum.4322 }
		}
	}

	option = { #add smarties
		name = "giga_aeternum.4322.smart"
		custom_tooltip = "giga_aeternum.4322.smart.tooltip"
		allow = {
			hidden_trigger = {
				NOT = {
					check_variable = {
						which = aet_attach_capacity
						value = 0
					}
				}
				resource_stockpile_compare = {
					resource = alloys
					value > 7500
				}
			}
		}
		add_resource = {
			alloys = -7500
		}
		hidden_effect = {
			change_variable = { which = aet_exp_smarties_count value = 1 }
			change_variable = { which = aet_attach_capacity value = -1 }
			increase_exp_smarts_10 = yes
			increase_exp_smarts_10 = yes
			increase_exp_smarts_10 = yes

			decrease_exp_attack_10 = yes

			decrease_exp_hp_10 = yes
			country_event = { id = giga_aeternum.4322 }
		}
	}

	option = {
		name = "giga_aeternum.4322.a"
		hidden_effect = {
			country_event = { id = giga_aeternum.4323 }
		}
	}
}

country_event = {
	id = giga_aeternum.4323
	title = "giga_aeternum.4323.name"
	desc = "giga_aeternum.4323.desc"
	picture = GFX_evt_archaeology_camp
	show_sound = event_ringworld_build_complete
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4323.a"
		custom_tooltip = "giga_aeternum.4323.a.tooltip"
		hidden_effect = {
			remove_country_flag = monitoring_aeternum
		}
	}
}

#expedition complete!
country_event = {
	id = giga_aeternum.4400
	title = "giga_aeternum.4400.name"
	desc = "giga_aeternum.4400.desc"
	picture = GFX_evt_archaeology_camp
	show_sound = event_ringworld_build_complete
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { has_country_flag = small_aiondia_exp }
			random_list = {
				1 = { set_variable = { which = aet_exp_intel_acquired value = 2 } }
				1 = { set_variable = { which = aet_exp_intel_acquired value = 3 } }
			}
			remove_modifier = aet_exp_1
			set_variable = { which = aet_explored_perc value = 5 }
		}
		if = {
			limit = { has_country_flag = med_aiondia_exp }
			random_list = {
				1 = { set_variable = { which = aet_exp_intel_acquired value = 3 } }
				1 = { set_variable = { which = aet_exp_intel_acquired value = 4 } }
				1 = { set_variable = { which = aet_exp_intel_acquired value = 5 } }
			}
			remove_modifier = aet_exp_2
			set_variable = { which = aet_explored_perc value = 10 }
		}
		if = {
			limit = { has_country_flag = large_aiondia_exp }
			random_list = {
				1 = { set_variable = { which = aet_exp_intel_acquired value = 4 } }
				1 = { set_variable = { which = aet_exp_intel_acquired value = 5 } }
				1 = { set_variable = { which = aet_exp_intel_acquired value = 6 } }
			}
			remove_modifier = aet_exp_3
			set_variable = { which = aet_explored_perc value = 15 }
		}
		change_variable = {
			which = aiondia_explored_perc
			value = aet_explored_perc
		}
		change_variable = {
			which = aet_expedition_total_intel_count
			value = aet_exp_intel_acquired
		}
		if = {
			limit = {
				check_variable = {
					which = aiondia_explored_perc
					value >= 100
				}
				NOT = { has_country_flag = aiondia_fully_mapped }
			}
			set_variable = {
				which = aiondia_explored_perc
				value = 100
			}
			country_event = { id = giga_aeternum.4402 days = 15 }
			set_country_flag = aiondia_fully_mapped
		}
	}

	option = {
		name = "giga_aeternum.4400.a"
		custom_tooltip = "giga_aeternum.4400.a.tooltip"
		if = {
			limit = {
				has_ancrel = yes
			}
			if = {
				limit = { has_country_flag = large_aiondia_exp }
				random_list = {
					1 = { add_resource = { minor_artifacts = 1000 } hidden_effect = { change_variable = { which = aet_expedition_total_artifact_count value = 1000 } } }
					1 = { add_resource = { minor_artifacts = 1250 } hidden_effect = { change_variable = { which = aet_expedition_total_artifact_count value = 1250 } } }
					1 = { add_resource = { minor_artifacts = 1500 } hidden_effect = { change_variable = { which = aet_expedition_total_artifact_count value = 1500 } } }
				}
			}
			if = {
				limit = { has_country_flag = med_aiondia_exp }
				random_list = {
					1 = { add_resource = { minor_artifacts = 500 } hidden_effect = {  change_variable = { which = aet_expedition_total_artifact_count value = 500 } } }
					1 = { add_resource = { minor_artifacts = 750 } hidden_effect = { change_variable = { which = aet_expedition_total_artifact_count value = 750 } } }
					1 = { add_resource = { minor_artifacts = 1000 } hidden_effect = { change_variable = { which = aet_expedition_total_artifact_count value = 1000 } } }
				}
			}
			if = {
				limit = { has_country_flag = small_aiondia_exp }
				random_list = {
					1 = { add_resource = { minor_artifacts = 250 } hidden_effect = { change_variable = { which = aet_expedition_total_artifact_count value = 250 } } }
					1 = { add_resource = { minor_artifacts = 350 } hidden_effect = { change_variable = { which = aet_expedition_total_artifact_count value = 350 } } }
					1 = { add_resource = { minor_artifacts = 500 } hidden_effect = {  change_variable = { which = aet_expedition_total_artifact_count value = 500 } } }
				}
			}
		}
		hidden_effect = {
			while = {
				limit = {
					check_variable = {
						which = aet_exp_intel_acquired
						value > 0
					}
				}
				increase_aeternite_intel = yes
				subtract_variable = {
					which = aet_exp_intel_acquired
					value = 1
				}
			}
			remove_country_flag = doing_aiondia_expedition
		}
	}
}

#expedition failed early
country_event = {
	id = giga_aeternum.4401
	title = "giga_aeternum.4401.name"
	desc = "giga_aeternum.4401.desc"
	picture = GFX_evt_archaeologists_escaping
	show_sound = event_collapsing_ruins
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { has_country_flag = small_aiondia_exp }
			set_variable = { which = aet_exp_intel_acquired value = 1 }
			remove_modifier = aet_exp_1
			if = {
				limit = { check_variable = { which = aet_exp_return_time value < 30 } }
				set_variable = { which = aet_explored_perc value = 1 }
			}
			else_if = {
				limit = { check_variable = { which = aet_exp_return_time value < 20 } }
				set_variable = { which = aet_explored_perc value = 2 }
			}
			else_if = {
				limit = { check_variable = { which = aet_exp_return_time value < 10 } }
				set_variable = { which = aet_explored_perc value = 3 }
			}
		}
		if = {
			limit = { has_country_flag = med_aiondia_exp }
			random_list = {
				1 = { set_variable = { which = aet_exp_intel_acquired value = 1 } }
				1 = { set_variable = { which = aet_exp_intel_acquired value = 2 } }
			}
			remove_modifier = aet_exp_2
			if = {
				limit = { check_variable = { which = aet_exp_return_time value < 48 } }
				set_variable = { which = aet_explored_perc value = 3 }
			}
			else_if = {
				limit = { check_variable = { which = aet_exp_return_time value < 40 } }
				set_variable = { which = aet_explored_perc value = 4 }
			}
			else_if = {
				limit = { check_variable = { which = aet_exp_return_time value < 30 } }
				set_variable = { which = aet_explored_perc value = 5 }
			}
			else_if = {
				limit = { check_variable = { which = aet_exp_return_time value < 20 } }
				set_variable = { which = aet_explored_perc value = 6 }
			}
			else_if = {
				limit = { check_variable = { which = aet_exp_return_time value < 10 } }
				set_variable = { which = aet_explored_perc value = 8 }
			}
		}
		if = {
			limit = { has_country_flag = large_aiondia_exp }
			random_list = {
				1 = { set_variable = { which = aet_exp_intel_acquired value = 1 } }
				1 = { set_variable = { which = aet_exp_intel_acquired value = 2 } }
				1 = { set_variable = { which = aet_exp_intel_acquired value = 3 } }
			}
			remove_modifier = aet_exp_3
			if = {
				limit = { check_variable = { which = aet_exp_return_time value < 60 } }
				set_variable = { which = aet_explored_perc value = 2 }
			}
			else_if = {
				limit = { check_variable = { which = aet_exp_return_time value < 50 } }
				set_variable = { which = aet_explored_perc value = 4 }
			}
			else_if = {
				limit = { check_variable = { which = aet_exp_return_time value < 40 } }
				set_variable = { which = aet_explored_perc value = 6 }
			}
			else_if = {
				limit = { check_variable = { which = aet_exp_return_time value < 30 } }
				set_variable = { which = aet_explored_perc value = 8 }
			}
			else_if = {
				limit = { check_variable = { which = aet_exp_return_time value < 20 } }
				set_variable = { which = aet_explored_perc value = 9 }
			}
			else_if = {
				limit = { check_variable = { which = aet_exp_return_time value < 10 } }
				set_variable = { which = aet_explored_perc value = 11 }
			}
		}
		change_variable = {
			which = aiondia_explored_perc
			value = aet_explored_perc
		}
		change_variable = {
			which = aet_expedition_total_intel_count
			value = aet_exp_intel_acquired
		}
		if = {
			limit = {
				check_variable = {
					which = aiondia_explored_perc
					value >= 100
				}
				NOT = { has_country_flag = aiondia_fully_mapped }
			}
			set_variable = {
				which = aiondia_explored_perc
				value = 100
			}
			country_event = { id = giga_aeternum.4402 days = 15 }
			set_country_flag = aiondia_fully_mapped
		}
	}

	option = {
		name = "giga_aeternum.4401.a"
		custom_tooltip = "giga_aeternum.4401.a.tooltip"
		hidden_effect = {
			while = {
				limit = {
					check_variable = {
						which = aet_exp_intel_acquired
						value > 0
					}
				}
				increase_aeternite_intel = yes
				subtract_variable = {
					which = aet_exp_intel_acquired
					value = 1
				}
			}
			remove_country_flag = doing_aiondia_expedition
		}
	}
}

#fully mapped out
country_event = {
	id = giga_aeternum.4402
	title = "giga_aeternum.4402.name"
	desc = "giga_aeternum.4402.desc"
	picture = GFX_evt_ship_in_orbit_3
	show_sound = event_celebration
	is_triggered_only = yes

	option = {
		name = "giga_aeternum.4402.a"
		add_resource = {
			influence = 500
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_global_flag = giga_achievements_disabled }
					NOT = {
						has_country_flag = giga_achievement_aet6
					}
				}
				set_country_flag = giga_achievement_aet6
				set_timed_country_flag = { flag = giga_achievement_aet6_notification days = 30 }
				giga_achievement_sound = yes
			}
		}
	}
}

#monthly event for expeditions
country_event = {
	id = giga_aeternum.43230
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = doing_aiondia_expedition
	}

	immediate = {
		change_variable = {
			which = aet_exp_return_time
			value = -1
		}
		if = {
			limit = {
				check_variable = {
					which = aet_exp_return_time
					value <= 0
				}
			}
			country_event = { id = giga_aeternum.4400 }
		}
		else_if = {
			limit = { #destroyed early :(
				check_variable = {
					which = aet_exp_hp
					value <= 0
				}
			}
			country_event = { id = giga_aeternum.4401 }
		}
		else = {
			if = { 	#random stuff!
				limit = { NOR = { has_country_flag = recent_aet_exp_anomaly has_country_flag = aet_exp_anomaly_ongoing check_variable = { which = aet_exp_return_time value <= 2 } } }
				random_list = {
					120 = {} #nothing
					15 = { #under attack
						set_timed_country_flag = {
							flag = recent_aet_exp_anomaly
							days = 160
						}
						randomize_aet_loc_4 = yes
						set_random_aet_resilience_encounter = yes
						set_country_flag = aet_random_hostile_encounter
						calculate_aet_success_chance_strength = yes
						execute_aet_expedition_anomaly = yes
					}
					10 = { #ppl tryna reach the edge (spoiler, they cant)
						set_timed_country_flag = {
							flag = recent_aet_exp_anomaly
							days = 160
						}
						country_event = { id = giga_aeternum.4329 days = 20 random = 20 }
					}
					10 = { #swchimm
						set_timed_country_flag = {
							flag = recent_aet_exp_anomaly
							days = 160
						}
						country_event = { id = giga_aeternum.4328 days = 20 random = 20 }
					}
					10 = { #civilisation
						set_timed_country_flag = {
							flag = recent_aet_exp_anomaly
							days = 300
						}
						set_random_aet_resilience_value_civilization = yes
						country_event = { id = giga_aeternum.4327 days = 20 random = 20 }
					}
					10 = { #ancient data cache
						set_timed_country_flag = {
							flag = recent_aet_exp_anomaly
							days = 160
						}
						country_event = { id = giga_aeternum.4324 days = 20 random = 20 }
					}
					10 = { #bigass ship
						set_timed_country_flag = {
							flag = recent_aet_exp_anomaly
							days = 160
						}
						country_event = { id = giga_aeternum.4326 days = 20 random = 20 }
					}
					10 = { #douclaw (what is he doing here?!)
						set_timed_country_flag = {
							flag = recent_aet_exp_anomaly
							days = 160
						}
						country_event = { id = giga_aeternum.4325 days = 20 random = 20 }
						modifier = {
							factor = 0
							NOT = { has_global_flag = katzenartig_imperium_defeated }
						}
						modifier = {
							factor = 0
							OR = {
								has_valid_civic = civic_fanatic_purifiers
								has_valid_civic = civic_hive_devouring_swarm
								has_valid_civic = civic_machine_terminator
							}
						}
						modifier = {
							factor = 0
							has_global_flag = douclaw_found_on_aiondia
						}
						modifier = { #Douclaw stayed in the succession crisis
							factor = 0
							has_global_flag = giga_douclaw_stayed_behind
						}
					}
				}
			}
			random_list = {
				0 = {
					change_variable = {
						which = aet_exp_hp
						value = -1
					}
					modifier = { add = 100 check_variable = { which = aet_exp_decay_monthly value = 100 } }
					modifier = { add = 90 check_variable = { which = aet_exp_decay_monthly value = 90 } }
					modifier = { add = 80 check_variable = { which = aet_exp_decay_monthly value = 80 } }
					modifier = { add = 70 check_variable = { which = aet_exp_decay_monthly value = 70 } }
					modifier = { add = 60 check_variable = { which = aet_exp_decay_monthly value = 60 } }
					modifier = { add = 50 check_variable = { which = aet_exp_decay_monthly value = 50 } }
					modifier = { add = 40 check_variable = { which = aet_exp_decay_monthly value = 40 } }
					modifier = { add = 30 check_variable = { which = aet_exp_decay_monthly value = 30 } }
					modifier = { add = 20 check_variable = { which = aet_exp_decay_monthly value = 20 } }
					modifier = { add = 10 check_variable = { which = aet_exp_decay_monthly value = 10 } }
					modifier = { add = 0 check_variable = { which = aet_exp_decay_monthly value = 0 } }
				}
				100 = {
					modifier = { add = -100 check_variable = { which = aet_exp_decay_monthly value = 100 } }
					modifier = { add = -90 check_variable = { which = aet_exp_decay_monthly value = 90 } }
					modifier = { add = -80 check_variable = { which = aet_exp_decay_monthly value = 80 } }
					modifier = { add = -70 check_variable = { which = aet_exp_decay_monthly value = 70 } }
					modifier = { add = -60 check_variable = { which = aet_exp_decay_monthly value = 60 } }
					modifier = { add = -50 check_variable = { which = aet_exp_decay_monthly value = 50 } }
					modifier = { add = -40 check_variable = { which = aet_exp_decay_monthly value = 40 } }
					modifier = { add = -30 check_variable = { which = aet_exp_decay_monthly value = 30 } }
					modifier = { add = -20 check_variable = { which = aet_exp_decay_monthly value = 20 } }
					modifier = { add = -10 check_variable = { which = aet_exp_decay_monthly value = 10 } }
					modifier = { add = 0 check_variable = { which = aet_exp_decay_monthly value = 0 } }
				}
			}
		}
	}
}

#random event where u get shot by stuff
country_event = {
	id = giga_aeternum.4330
	title = "giga_aeternum.4330.name"
	desc = {
		text = "giga_aeternum.4330.desc.oof"
		trigger = {
			check_variable = {
				which = aet_exp_integ_damage
				value > 0
			}
		}
	}
	desc = {
		text = "giga_aeternum.4330.desc.yay"
		trigger = {
			check_variable = {
				which = aet_exp_integ_damage
				value <= 0
			}
		}
	}
	picture = GFX_evt_ground_combat
	show_sound = event_air_raid_siren
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				check_variable = {
					which = aet_exp_integ_damage
					value > 0
				}
			}
			subtract_variable = {
				which = aet_exp_hp
				value = aet_exp_integ_damage
			}
		}
	}

	option = {
		name = "giga_aeternum.4330.a" #DAMN
		custom_tooltip = "giga_aeternum_exp_integ_damage_tooltip"
		trigger = {
			check_variable = {
				which = aet_exp_integ_damage
				value > 0
			}
		}
	}

	option = {
		name = "giga_aeternum.4330.a.won" #fought back
		trigger = {
			check_variable = { which = aet_exp_integ_damage value <= 0 }
			check_variable = { which = aet_loc_value value = 1 }
		}
		add_resource = {
			alloys = 7500
			volatile_motes = 1500
		}
		hidden_effect = {
			change_variable = {
				which = aet_expedition_total_discovery_count
				value = 1
			}
		}
	}

	option = {
		name = "giga_aeternum.4330.b.won" #fought back
		trigger = {
			check_variable = { which = aet_exp_integ_damage value <= 0 }
			check_variable = { which = aet_loc_value value = 2 }
		}
		add_resource = {
			alloys = 10000
			energy = 20000
		}
		if = {
			limit = {
				has_ancrel = yes
			}
			add_resource = {
				minor_artifacts = 500
			}
		}
		hidden_effect = {
			change_variable = {
				which = aet_expedition_total_artifact_count
				value = 500
			}
			change_variable = {
				which = aet_expedition_total_discovery_count
				value = 1
			}
		}
	}

	option = {
		name = "giga_aeternum.4330.c.won" #fought back
		custom_tooltip = "giga_aeternum_1_intel_tooltip"
		trigger = {
			check_variable = { which = aet_exp_integ_damage value <= 0 }
			check_variable = { which = aet_loc_value value = 3 }
		}
		add_monthly_resource_mult = {
			resource = engineering_research
			value = 12
		}
		if = {
			limit = {
				has_ancrel = yes
			}
			add_resource = {
				minor_artifacts = 500
			}
		}
		hidden_effect = {
			increase_aeternite_intel = yes
			change_variable = {
				which = aet_expedition_total_artifact_count
				value = 500
			}
			change_variable = {
				which = aet_expedition_total_discovery_count
				value = 1
			}
			change_variable = {
				which = aet_expedition_total_intel_count
				value = 1
			}
		}
	}

	option = {
		name = "giga_aeternum.4330.d.won" #fought back
		add_resource = {
			alloys = 7500
			minerals = 20000
		}
		trigger = {
			check_variable = { which = aet_exp_integ_damage value <= 0 }
			check_variable = { which = aet_loc_value value = 4 }
		}
		hidden_effect = {
			change_variable = {
				which = aet_expedition_total_discovery_count
				value = 1
			}
		}
	}
}

#giant threader
country_event = {
	id = giga_aeternum.4329
	title = "giga_aeternum.4329.name"
	desc = "giga_aeternum.4329.desc"
	picture = GFX_evt_underground_city
	show_sound = event_machinery
	is_triggered_only = yes

	immediate = {
		set_variable = {
			which = aet_success_chance
			value = 0
		}
		set_random_aet_complexity_value = yes
		set_random_aet_resilience_value = yes
		calculate_aet_success_chance_practicality = yes
		calculate_aet_success_chance_strength_2 = yes
	}

	option = {
		name = "giga_aeternum.4329.a" #talk
		custom_tooltip = "giga_aeternum_practicality_resilience_tooltip"
		hidden_effect = {
			set_country_flag = aet_exp_anomaly_ongoing
			set_country_flag = aet_exp_giant_tank_diplomacy
			execute_aet_expedition_anomaly = yes
		}
	}

	option = {
		name = "giga_aeternum.4329.b" #boom
		custom_tooltip = "giga_aeternum_resilience_tooltip"
		hidden_effect = {
			set_variable = {
				which = aet_success_chance
				value = aet_success_chance_2
			}
			set_country_flag = aet_exp_anomaly_ongoing
			set_country_flag = aet_exp_giant_tank_boom
			execute_aet_expedition_anomaly = yes
		}
	}

	option = {
		name = "giga_aeternum.4329.c" #whatever lol
	}
}

#hi
country_event = {
	id = giga_aeternum.43291
	title = "giga_aeternum.43291.name"
	desc = "giga_aeternum.43291.desc"
	picture = GFX_evt_underground_city
	show_sound = event_radio_chatter
	is_triggered_only = yes

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
		clear_global_event_target = aet_birch_civilisation
		create_species = {
			name = random
			class = random_non_machine
			portrait = random
			traits = random
			homeworld = event_target:aeternum_birch_world
			effect = {
				save_global_event_target_as = aet_birch_civilisation
			}
		}
	}

	option = {
		name = "giga_aeternum.43291.a"
		hidden_effect = {
			country_event = { id = giga_aeternum.43292 }
			change_variable = {
				which = aet_expedition_total_discovery_count
				value = 1
			}
		}
	}
}

#yes we are going to the eeeedgeee (idea by deimos)
country_event = {
	id = giga_aeternum.43292
	title = "giga_aeternum.43292.name"
	desc = "giga_aeternum.43292.desc"
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:aet_birch_civilisation
		room = aet_giant_tank_room
	}

	option = {
		name = "giga_aeternum.43292.a"
		response_text = "giga_aeternum.43292.a.response"
		is_dialog_only = yes
	}

	option = {
		name = "giga_aeternum.43292.b"
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value >= 10000
			}
			resource_stockpile_compare = {
				resource = alloys
				value >=5000
			}
		}
		hidden_effect = {
			country_event = { id = giga_aeternum.43293 }
		}
		add_resource = {
			energy = 10000
			alloys = 5000
		}
	}

	option = {
		name = "giga_aeternum.43292.c"
		custom_tooltip = "giga_aeternum.43292.c.tooltip"
		hidden_effect = {
			country_event = { id = giga_aeternum.43294 }
		}
	}
}

country_event = {  #thank :)
	id = giga_aeternum.43293
	title = "giga_aeternum.43293.name"
	desc = "giga_aeternum.43293.desc"
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:aet_birch_civilisation
		room = aet_giant_tank_room
	}

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
	}

	option = {
		name = "giga_aeternum.43293.a"
		custom_tooltip = "giga_aeternum.43293.a.tooltip"
		hidden_effect = {
			increase_aeternite_intel = yes
			change_variable = {
				which = aet_expedition_total_intel_count
				value = 1
			}
		}
	}
}

country_event = { #NO
	id = giga_aeternum.43294
	title = "giga_aeternum.43294.name"
	desc = "giga_aeternum.43294.desc"
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:aet_birch_civilisation
		room = aet_giant_tank_room
	}

	option = {
		name = "giga_aeternum.43294.a"
		hidden_effect = {
			country_event = { id = giga_aeternum.43295 }
		}
	}
}

country_event = { #AAAAAH
	id = giga_aeternum.43295
	title = "giga_aeternum.43295.name"
	desc = "giga_aeternum.43295.desc"
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		room = no_video_feed_room
	}

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
	}

	option = {
		name = "giga_aeternum.43295.a"
		custom_tooltip = "giga_aeternum.43295.a.tooltip"
		add_resource = {
			alloys = 15000
			rare_crystals = 1000
			volatile_motes = 1000
			exotic_gases = 1000
		}
	}
}


#they shoot you
country_event = {
	id = giga_aeternum.43296
	title = "giga_aeternum.43296.name"
	desc = {
		text = "giga_aeternum.43296.desc.oof"
		trigger = {
			check_variable = {
				which = aet_exp_integ_damage
				value > 0
			}
		}
	}
	desc = {
		text = "giga_aeternum.43296.desc.yay"
		trigger = {
			check_variable = {
				which = aet_exp_integ_damage
				value <= 0
			}
		}
	}
	picture = GFX_evt_ground_combat
	show_sound = event_planetary_riot
	is_triggered_only = yes

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
		if = {
			limit = {
				check_variable = {
					which = aet_exp_integ_damage
					value > 0
				}
			}
			subtract_variable = {
				which = aet_exp_hp
				value = aet_exp_integ_damage
			}
		}
	}

	option = {
		name = "giga_aeternum.43296.a"
		custom_tooltip = "giga_aeternum_exp_integ_damage_tooltip"
		trigger = {
			check_variable = {
				which = aet_exp_integ_damage
				value > 0
			}
		}
	}

	option = {
		name = "giga_aeternum.43296.b"
		trigger = {
			check_variable = {
				which = aet_exp_integ_damage
				value <= 0
			}
		}
		add_resource = {
			alloys = 25000
		}
		if = {
			limit = {
				has_ancrel = yes
			}
			add_resource = {
				minor_artifacts = 500
			}
		}
		hidden_effect = {
			change_variable = {
				which = aet_expedition_total_discovery_count
				value = 1
			}
			change_variable = {
				which = aet_expedition_total_artifact_count
				value = 500
			}
		}
	}
}

country_event = { #you shoot em
	id = giga_aeternum.43297
	title = "giga_aeternum.43297.name"
	desc = "giga_aeternum.43297.desc"
	picture = GFX_evt_large_explosion
	show_sound = event_structural_collapse

	is_triggered_only = yes

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
		random_list = {
			1 = { set_variable = { which = aet_exp_integ_damage value = 2 } }
			1 = { set_variable = { which = aet_exp_integ_damage value = 5 } }
			1 = { set_variable = { which = aet_exp_integ_damage value = 8 } }
			1 = { set_variable = { which = aet_exp_integ_damage value = 10 } }
		}
		subtract_variable = {
			which = aet_exp_hp
			value = aet_exp_integ_damage
		}
	}

	option = {
		name = "giga_aeternum.43297.a"
		custom_tooltip = "giga_aeternum_exp_integ_damage_tooltip"
		add_resource = {
			alloys = 30000
			rare_crystals = 1500
			volatile_motes = 1500
			exotic_gases = 1500
			sr_living_metal = 500
			nanites = 250
			minor_artifacts = 500
		}
		hidden_effect = {
			change_variable = {
				which = aet_expedition_total_discovery_count
				value = 1
			}
			change_variable = {
				which = aet_expedition_total_artifact_count
				value = 500
			}
		}
	}
}


#under the sea
country_event = {
	id = giga_aeternum.4328
	title = "giga_aeternum.4328.name"
	desc = "giga_aeternum.4328.desc"
	picture = GFX_evt_ocean
	show_sound = pc_ocean
	is_triggered_only = yes

	immediate = {
		set_variable = {
			which = aet_success_chance
			value = 0
		}
		set_country_flag = aet_exp_giga_ocean
		set_random_aet_complexity_value = yes
		calculate_aet_success_chance_practicality = yes
	}

	option = {
		name = "giga_aeternum.4328.a"
		custom_tooltip = "giga_aeternum_practicality_tooltip"
		hidden_effect = {
			set_country_flag = aet_exp_anomaly_ongoing
			execute_aet_expedition_anomaly = yes
		}
	}

	option = {
		name = "giga_aeternum.4328.b"
		hidden_effect = {
			remove_country_flag = aet_exp_giga_ocean
		}
	}
}

#the water
country_event = {
	id = giga_aeternum.43281
	title = "giga_aeternum.43281.name"
	desc = {
		text = "giga_aeternum.43281.desc.a" #prison
		trigger = {
			check_variable = {
				which = aet_loc_value
				value = 1
			}
		}
	}
	desc = {
		text = "giga_aeternum.43281.desc.b" #gigantic fission reactor
		trigger = {
			check_variable = {
				which = aet_loc_value
				value = 2
			}
		}
	}
	desc = {
		text = "giga_aeternum.43281.desc.c" #leaking into the singularity
		trigger = {
			check_variable = {
				which = aet_loc_value
				value = 3
			}
		}
	}
	desc = {
		text = "giga_aeternum.43281.desc.d" #huge skeleton
		trigger = {
			check_variable = {
				which = aet_loc_value
				value = 4
			}
		}
	}
	picture = GFX_evt_underwater_ruins
	show_sound = event_sensor_ping
	is_triggered_only = yes

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
		change_variable = {
			which = aet_expedition_total_discovery_count
			value = 1
		}
	}

	option = {
		name = "giga_aeternum.43281.a"
		custom_tooltip = "giga_aeternum_1_intel_tooltip"
		trigger = { check_variable = { which = aet_loc_value value = 1 } }
		hidden_effect = {
			increase_aeternite_intel = yes
			change_variable = {
				which = aet_expedition_total_intel_count
				value = 1
			}
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = 24
		}
		add_resource = {
			influence = 50
		}
	}

	option = {
		name = "giga_aeternum.43281.b"
		trigger = { check_variable = { which = aet_loc_value value = 2 } }
		allow = {
			resource_stockpile_compare = {
				resource = alloys
				value > 10000
			}
		}
		event_target:aeternum_birch_world = { add_deposit = d_aeternum_gigantic_fission_reactor }
		add_resource = {
			influence = 50
			alloys = -10000
		}
	}

	option = {
		name = "giga_aeternum.43281.b.scrap"
		trigger = { check_variable = { which = aet_loc_value value = 2 } }
		add_resource = {
			influence = 50
			alloys = 25000
			energy = 50000
			volatile_motes = 5000
			rare_crystals = 5000
		}
	}

	option = {
		name = "giga_aeternum.43281.c"
		trigger = { check_variable = { which = aet_loc_value value = 3 } }
		add_monthly_resource_mult = {
			resource = physics_research
			value = 12
		}
	}

	option = {
		name = "giga_aeternum.43281.d"
		custom_tooltip = "giga_aeternum_1_intel_tooltip"
		trigger = { check_variable = { which = aet_loc_value value = 4 } }
		hidden_effect = {
			increase_aeternite_intel = yes
			change_variable = {
				which = aet_expedition_total_intel_count
				value = 1
			}
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = 12
		}
	}
}

#a civilisation just chillin' there lol
country_event = {
	id = giga_aeternum.4327
	title = "giga_aeternum.4327.name"
	desc = {
		text = "giga_aeternum.4327.desc.a"
		trigger = { has_country_flag = aet_exp_civ_primitive }
	}
	desc = {
		text = "giga_aeternum.4327.desc.b"
		trigger = { has_country_flag = aet_exp_civ_space }
	}
	desc = {
		text = "giga_aeternum.4327.desc.c"
		trigger = { has_country_flag = aet_exp_civ_fe }
	}
	picture = GFX_evt_metropolis
	show_sound = event_radio_chatter
	is_triggered_only = yes

	immediate = {
		create_species = {
			name = random
			class = random_non_machine
			portrait = random
			traits = random
			homeworld = event_target:aeternum_birch_world
			effect = {
				save_global_event_target_as = aet_birch_civilisation
			}
		}
		set_variable = {
			which = aet_success_chance
			value = 0
		}
		if = {
			limit = { check_variable = { which = aet_anomaly_resilience value < 80 } } #primitives
			set_random_aet_complexity_value_100_200 = yes
			set_country_flag = aet_exp_civ_primitive
		}
		if = {
			limit = {
				check_variable = { which = aet_anomaly_resilience value >= 80 } #space age
				check_variable = { which = aet_anomaly_resilience value < 200 }
			}
			set_random_aet_complexity_value_100_200 = yes
			change_variable = {
				which = aet_anomaly_complexity
				value = 50
			}
			set_country_flag = aet_exp_civ_space
		}
		if = {
			limit = { check_variable = { which = aet_anomaly_resilience value >= 200 } } #FE
			set_random_aet_complexity_value_100_200 = yes
			change_variable = {
				which = aet_anomaly_complexity
				value = 150
			}
			set_country_flag = aet_exp_civ_fe
		}
		calculate_aet_success_chance_practicality = yes
		calculate_aet_success_chance_strength_2 = yes
	}

	option = { #talk it out :)
		name = "giga_aeternum.4327.a"
		custom_tooltip = "giga_aeternum_practicality_tooltip"
		trigger = {
			katzen_is_genocidal = no
			OR = {
				is_gestalt = no
				AND = {
					is_gestalt = yes
					has_valid_civic = civic_machine_servitor
				}
			}
		}
		hidden_effect = {
			set_country_flag = aet_exp_civ_diplomacy
			set_country_flag = aet_exp_anomaly_ongoing
			execute_aet_expedition_anomaly = yes
		}
	}

	option = { #rev up the panzers bois
		name = "giga_aeternum.4327.b"
		custom_tooltip = "giga_aeternum_resilience_tooltip"
		hidden_effect = {
			set_country_flag = aet_exp_anomaly_ongoing
			set_country_flag = aet_exp_civ_conquest
			set_variable = {
				which = aet_success_chance
				value = aet_success_chance_2
			}
			execute_aet_expedition_anomaly = yes
		}
	}

	option = { #a preserve!
		name = "giga_aeternum.4327.c"
		if = {
			limit = { has_country_flag = aet_exp_civ_primitive }
			event_target:aeternum_birch_world = {
				add_deposit = d_exp_civ_primitive_preserve
			}
		}
		if = {
			limit = { has_country_flag = aet_exp_civ_space }
			event_target:aeternum_birch_world = {
				add_deposit = d_exp_civ_space_preserve
			}
		}
		if = {
			limit = { has_country_flag = aet_exp_civ_fe }
			event_target:aeternum_birch_world = {
				add_deposit = d_exp_civ_fe_preserve
			}
		}
		hidden_effect = {
			remove_country_flag = aet_exp_anomaly_ongoing
			if = { limit = { has_country_flag = aet_exp_civ_primitive } remove_country_flag = aet_exp_civ_primitive }
			if = { limit = { has_country_flag = aet_exp_civ_space } remove_country_flag = aet_exp_civ_space }
			if = { limit = { has_country_flag = aet_exp_civ_fe } remove_country_flag = aet_exp_civ_fe }
		}
		allow = {
			resource_stockpile_compare = {
				resource = alloys
				value > 15000
			}
		}
		add_resource = {
			alloys = -15000
		}
	}

	option = { #whatever
		name = "giga_aeternum.4327.d"
		hidden_effect = {
			remove_country_flag = aet_exp_anomaly_ongoing
			if = { limit = { has_country_flag = aet_exp_civ_primitive } remove_country_flag = aet_exp_civ_primitive }
			if = { limit = { has_country_flag = aet_exp_civ_space } remove_country_flag = aet_exp_civ_space }
			if = { limit = { has_country_flag = aet_exp_civ_fe } remove_country_flag = aet_exp_civ_fe }
		}
	}
}

#annexation successful
country_event = {
	id = giga_aeternum.43271
	title = "giga_aeternum.43271.name"
	desc = "giga_aeternum.43271.desc"
	picture = GFX_evt_diplomatic_visit
	show_sound = event_celebration
	is_triggered_only = yes

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
		change_variable = {
			which = aet_expedition_total_discovery_count
			value = 1
		}
	}

	option = { #hi
		name = "giga_aeternum.43271.a"
		custom_tooltip = "birch_gain_20_pops"
		trigger = {
			has_country_flag = aet_exp_civ_primitive
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = 24
		}
		hidden_effect = {
			if = { limit = { has_country_flag = aet_exp_civ_primitive } remove_country_flag = aet_exp_civ_primitive }
			if = { limit = { has_country_flag = aet_exp_civ_space } remove_country_flag = aet_exp_civ_space }
			if = { limit = { has_country_flag = aet_exp_civ_fe } remove_country_flag = aet_exp_civ_fe }
			event_target:aeternum_birch_world = {
				create_pop = {
					species = event_target:aet_birch_civilisation
					count = 20
				}
				every_owned_pop = {
					limit = { is_species = event_target:aet_birch_civilisation }
					add_modifier = {
						modifier = culture_shock_machine_age
						days = 3600
					}
				}
			}
		}
	}

	option = { #hi
		name = "giga_aeternum.43271.b"
		custom_tooltip = "birch_gain_40_pops"
		trigger = {
			has_country_flag = aet_exp_civ_space
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = 36
		}

		hidden_effect = {
			event_target:aeternum_birch_world = {
				create_pop = {
					species = event_target:aet_birch_civilisation
					count = 40
				}
			}
			if = { limit = { has_country_flag = aet_exp_civ_primitive } remove_country_flag = aet_exp_civ_primitive }
			if = { limit = { has_country_flag = aet_exp_civ_space } remove_country_flag = aet_exp_civ_space }
			if = { limit = { has_country_flag = aet_exp_civ_fe } remove_country_flag = aet_exp_civ_fe }
			event_target:aeternum_birch_world = {
				every_owned_pop = {
					limit = { is_species = event_target:aet_birch_civilisation }
					add_modifier = {
						modifier = culture_shock_early_space_age
						days = 1800
					}
				}
			}
		}
	}

	option = { #hi
		name = "giga_aeternum.43271.c"
		custom_tooltip = "birch_gain_80_pops"
		trigger = {
			has_country_flag = aet_exp_civ_fe
		}
		hidden_effect = {
			event_target:aeternum_birch_world = {
				create_pop = {
					species = event_target:aet_birch_civilisation
					count = 80
				}
			}
			if = { limit = { has_country_flag = aet_exp_civ_primitive } remove_country_flag = aet_exp_civ_primitive }
			if = { limit = { has_country_flag = aet_exp_civ_space } remove_country_flag = aet_exp_civ_space }
			if = { limit = { has_country_flag = aet_exp_civ_fe } remove_country_flag = aet_exp_civ_fe }
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = 48
		}
	}
}

#annexation failed
country_event = {
	id = giga_aeternum.43272
	title = "giga_aeternum.43272.name"
	desc = "giga_aeternum.43272.desc"
	picture = GFX_evt_assembly_fight
	show_sound = event_planetary_riot
	is_triggered_only = yes

	immediate = {
		calculate_aet_success_chance_strength = yes

	}

	option = { #fuck it panzer time
		name = "giga_aeternum.43272.a"
		custom_tooltip = "giga_aeternum_resilience_tooltip"
		hidden_effect = {
			set_country_flag = aet_exp_civ_conquest
			execute_aet_expedition_anomaly = yes
		}
	}

	option = { #whatever!
		name = "giga_aeternum.43272.b"
		hidden_effect = {
			if = { limit = { has_country_flag = aet_exp_civ_primitive } remove_country_flag = aet_exp_civ_primitive }
			if = { limit = { has_country_flag = aet_exp_civ_space } remove_country_flag = aet_exp_civ_space }
			if = { limit = { has_country_flag = aet_exp_civ_fe } remove_country_flag = aet_exp_civ_fe }
			remove_country_flag = aet_exp_anomaly_ongoing
		}
	}
}

#conquest succesful
country_event = {
	id = giga_aeternum.43273
	title = "giga_aeternum.43273.name"
	desc = "giga_aeternum.43273.desc"
	picture = GFX_evt_victorious_army
	show_sound = event_ground_battle
	is_triggered_only = yes

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
		change_variable = {
			which = aet_expedition_total_discovery_count
			value = 1
		}
		random_list = {
			1 = { set_variable = { which = aet_exp_integ_damage value = 2 } }
			1 = { set_variable = { which = aet_exp_integ_damage value = 5 } }
			1 = { set_variable = { which = aet_exp_integ_damage value = 8 } }
			1 = { set_variable = { which = aet_exp_integ_damage value = 10 } }
		}
		subtract_variable = {
			which = aet_exp_hp
			value = aet_exp_integ_damage
		}
	}

	option = { #hi
		name = "giga_aeternum.43273.a"
		custom_tooltip = "birch_gain_20_pops"
		trigger = {
			has_country_flag = aet_exp_civ_primitive
		}
		event_target:aeternum_birch_world = {
			create_pop = {
				species = event_target:aet_birch_civilisation
				count = 20
			}
		}
		add_resource = {
			alloys = 10000
		}
		hidden_effect = {
			if = { limit = { has_country_flag = aet_exp_civ_primitive } remove_country_flag = aet_exp_civ_primitive }
			if = { limit = { has_country_flag = aet_exp_civ_space } remove_country_flag = aet_exp_civ_space }
			if = { limit = { has_country_flag = aet_exp_civ_fe } remove_country_flag = aet_exp_civ_fe }
			event_target:aeternum_birch_world = {
				every_owned_pop = {
					limit = { is_species = event_target:aet_birch_civilisation }
					add_modifier = {
						modifier = culture_shock_machine_age
						days = 7200
					}
					add_modifier = {
						modifier = pop_recently_conquered
						days = 3600
					}
				}
			}
		}
	}

	option = { #hi
		name = "giga_aeternum.43273.b"
		custom_tooltip = "birch_gain_40_pops"
		trigger = {
			has_country_flag = aet_exp_civ_space
		}
		event_target:aeternum_birch_world = {
			create_pop = {
				species = event_target:aet_birch_civilisation
				count = 40
			}
		}
		add_resource = {
			alloys = 30000
		}
		hidden_effect = {
			if = { limit = { has_country_flag = aet_exp_civ_primitive } remove_country_flag = aet_exp_civ_primitive }
			if = { limit = { has_country_flag = aet_exp_civ_space } remove_country_flag = aet_exp_civ_space }
			if = { limit = { has_country_flag = aet_exp_civ_fe } remove_country_flag = aet_exp_civ_fe }
			event_target:aeternum_birch_world = {
				every_owned_pop = {
					limit = { is_species = event_target:aet_birch_civilisation }
					add_modifier = {
						modifier = culture_shock_early_space_age
						days = 3600
					}
					add_modifier = {
						modifier = pop_recently_conquered
						days = 3600
					}
				}
			}
		}
	}

	option = { #hi
		name = "giga_aeternum.43273.c"
		custom_tooltip = "birch_gain_80_pops"
		trigger = {
			has_country_flag = aet_exp_civ_fe
		}
		add_resource = {
			alloys = 50000
		}
		event_target:aeternum_birch_world = {
			set_update_modifiers_batch = begin #Helps reduce lag from making all the pops
			create_pop = {
				species = event_target:aet_birch_civilisation
				count = 80
			}
			set_update_modifiers_batch = end
		}
		hidden_effect = {
			if = { limit = { has_country_flag = aet_exp_civ_primitive } remove_country_flag = aet_exp_civ_primitive }
			if = { limit = { has_country_flag = aet_exp_civ_space } remove_country_flag = aet_exp_civ_space }
			if = { limit = { has_country_flag = aet_exp_civ_fe } remove_country_flag = aet_exp_civ_fe }
			event_target:aeternum_birch_world = {
				every_owned_pop = {
					limit = { is_species = event_target:aet_birch_civilisation }
					add_modifier = {
						modifier = pop_recently_conquered
						days = 3600
					}
				}
			}
		}
	}
}

#conquest failed (bruh)
country_event = {
	id = giga_aeternum.43274
	title = "giga_aeternum.43274.name"
	desc = "giga_aeternum.43274.desc"
	picture = GFX_evt_surrender
	show_sound = event_planetary_riot
	is_triggered_only = yes

	immediate = {
		pit_aet_strength_against_failure_resilience = yes
		if = {
			limit = {
				check_variable = {
					which = aet_exp_integ_damage
					value > 0
				}
			}
			subtract_variable = {
				which = aet_exp_hp
				value = aet_exp_integ_damage
			}
		}
	}

	option = {
		name = "giga_aeternum.43274.a"
		custom_tooltip = "giga_aeternum_exp_integ_damage_tooltip"
		hidden_effect = {
			remove_country_flag = aet_exp_anomaly_ongoing
			if = { limit = { has_country_flag = aet_exp_civ_primitive } remove_country_flag = aet_exp_civ_primitive }
			if = { limit = { has_country_flag = aet_exp_civ_space } remove_country_flag = aet_exp_civ_space }
			if = { limit = { has_country_flag = aet_exp_civ_fe } remove_country_flag = aet_exp_civ_fe }
		}
	}
}

#humongous crashed freighter
country_event = {
	id = giga_aeternum.4326
	title = "giga_aeternum.4326.name"
	desc = "giga_aeternum.4326.desc"
	picture = GFX_evt_relic_shipyard
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	immediate = {
		set_variable = {
			which = aet_success_chance
			value = 0
		}
		set_country_flag = aet_exp_crashed_freighter
		set_random_aet_complexity_value = yes
		set_random_aet_resilience_value = yes
		calculate_aet_success_chance_practicality = yes
	}

	option = {
		name = "giga_aeternum.4326.a"
		custom_tooltip = "giga_aeternum_practicality_resilience_tooltip"
		hidden_effect = {
			set_country_flag = aet_exp_anomaly_ongoing
			execute_aet_expedition_anomaly = yes
		}
	}

	option = {
		name = "giga_aeternum.4326.b"
		hidden_effect = {
			remove_country_flag = aet_exp_crashed_freighter
		}
	}
}

country_event = {
	id = giga_aeternum.43261
	title = "giga_aeternum.43261.name"
	desc = {
		text = "giga_aeternum.43261.desc.a" #generation ship
		trigger = { check_variable = { which = aet_loc_value value = 1 } }
	}
	desc = {
		text = "giga_aeternum.43261.desc.b" #aeternite titan
		trigger = { check_variable = { which = aet_loc_value value = 2 } }
	}
	desc = {
		text = "giga_aeternum.43261.desc.c" #trying to flee
		trigger = { check_variable = { which = aet_loc_value value = 3 } }
	}
	desc = {
		text = "giga_aeternum.43261.desc.d" #odd ship
		trigger = { check_variable = { which = aet_loc_value value = 4 } }
	}
	picture = GFX_evt_ship_in_orbit
	show_sound = event_machinery
	is_triggered_only = yes

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
		change_variable = {
			which = aet_expedition_total_discovery_count
			value = 1
		}
	}

	option = {
		name = "giga_aeternum.43261.a"
		trigger = { check_variable = { which = aet_loc_value value = 1 } }
		add_monthly_resource_mult = {
			resource = engineering_research
			value = 24
		}
		add_resource = {
			influence = 150
			rare_crystals = 1000
			volatile_motes = 1000
			exotic_gases = 1000
			alloys = 35000
		}
	}

	option = {
		name = "giga_aeternum.43261.b.noeng"
		custom_tooltip = "giga_aeternum_1_intel_tooltip"
		trigger = { check_variable = { which = aet_loc_value value = 2 } check_variable = { which = aet_exp_engineer_count value = 0 } }
		hidden_effect = {
			increase_aeternite_intel = yes
			change_variable = {
				which = aet_expedition_total_intel_count
				value = 1
			}
		}
	}

	option = {
		name = "giga_aeternum.43261.b.eng"
		custom_tooltip = "giga_aeternum.43261.b.eng.tooltip"
		trigger = { check_variable = { which = aet_loc_value value = 2 } check_variable = { which = aet_exp_engineer_count value >= 1 } }
		hidden_effect = {
			increase_aeternite_intel = yes
			change_variable = {
				which = aet_expedition_total_intel_count
				value = 1
			}
			event_target:aeternum_birch_world = {
				create_fleet = {
					name = "Aeternite Titan"
					settings = {
						spawn_debris = no
						can_change_composition = yes
						can_disband = no
						can_upgrade = no
						uses_naval_capacity = yes
						is_boss = yes
					}
					effect = {
						set_owner = ROOT
						create_ship = {
							name = random
							design = "Havittaja"
							prefix = no
						}
						set_formation_scale = 1
						set_location = {
							target = event_target:aeternum_birch_world
							distance = 15
							angle = random
						}
					}
				}
			}
		}
	}

	option = {
		name = "giga_aeternum.43261.c"
		trigger = { check_variable = { which = aet_loc_value value = 3 } }
		add_monthly_resource_mult = {
			resource = society_research
			value = 24
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 12
		}
		add_resource = {
			influence = 150
			alloys = 25000
		}
	}

	option = {
		name = "giga_aeternum.43261.d"
		trigger = { check_variable = { which = aet_loc_value value = 4 } }
		add_monthly_resource_mult = {
			resource = physics_research
			value = 36
		}
		if = {
			limit = { NOT = { has_modifier = aet_crashed_freighter_cool_ftl } }
			add_modifier = {
				modifier = aet_crashed_freighter_cool_ftl
				days = -1
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = 12
			}
		}
	}
}

country_event = {
	id = giga_aeternum.43262
	title = "giga_aeternum.43262.name"
	desc = {
		text = "giga_aeternum.43262.desc.oof"
		trigger = {
			check_variable = {
				which = aet_exp_integ_damage
				value > 0
			}
		}
	}
	desc = {
		text = "giga_aeternum.43262.desc.yay"
		trigger = {
			check_variable = {
				which = aet_exp_integ_damage
				value <= 0
			}
		}
	}
	picture = GFX_evt_ground_combat
	show_sound = event_ground_battle
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				check_variable = {
					which = aet_exp_integ_damage
					value > 0
				}
			}
			subtract_variable = {
				which = aet_exp_hp
				value = aet_exp_integ_damage
			}
		}
	}

	option = {
		name = "giga_aeternum.43262.a"
		custom_tooltip = "giga_aeternum_exp_integ_damage_tooltip"
		trigger = { check_variable = { which = aet_exp_integ_damage value > 0 } }
	}

	option = {
		name = "giga_aeternum.43262.b"
		trigger = { check_variable = { which = aet_exp_integ_damage value <= 0 } }
	}
}


#crashed ship (douclaw!)
country_event = {
	id = giga_aeternum.4325
	title = "giga_aeternum.4325.name"
	desc = "giga_aeternum.4325.desc"
	picture = GFX_evt_crashed_station
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	immediate = {
		set_variable = {
			which = aet_success_chance
			value = 0
		}
		set_country_flag = aet_exp_crashed_ship
		set_random_aet_complexity_value = yes
		calculate_aet_success_chance_practicality = yes
	}

	option = {
		name = "giga_aeternum.4325.a"
		custom_tooltip = "giga_aeternum_practicality_tooltip"
		hidden_effect = {
			set_country_flag = aet_exp_anomaly_ongoing
			execute_aet_expedition_anomaly = yes
		}
	}

	option = {
		name = "giga_aeternum.4325.b"
		hidden_effect = {
			remove_country_flag = aet_exp_crashed_ship
		}
	}
}

#DOUCLAW?!
country_event = {
	id = giga_aeternum.43251
	title = "giga_aeternum.43251.name"
	desc = "giga_aeternum.43251.desc"
	picture = GFX_evt_medieval_alien_civilization
	show_sound = event_pre_ftl_civilization
	is_triggered_only = yes

	immediate = {
		set_global_flag = douclaw_found_on_aiondia
		remove_country_flag = aet_exp_anomaly_ongoing
	}

	option = {
		name = "giga_aeternum.43251.a"
		hidden_effect = {
			country_event = { id = giga_aeternum.43252 }
			change_variable = {
				which = aet_expedition_total_discovery_count
				value = 1
			}
		}
	}
}

#hi douclaw
country_event = {
	id = giga_aeternum.43252
	title = "giga_aeternum.43252.name"
	desc = "giga_aeternum.43252.desc"
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:flusion_douclaw
		room = douclaw_room
	}

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
		if = {
			limit = {
				NOT = {
					any_galaxy_species = {
						is_species = event_target:douclaw_portrait
					}
				}
				exists = event_target:gigaflusion
			}
			event_target:gigaflusion = {
				create_species = {
					name = "Katzen"
					plural = "Katzens"
					class = POUCHKINN
					portrait = douclaw
					homeworld = THIS
					traits = {
						trait = trait_pc_continental_preference
						trait = trait_adaptive
						trait = trait_quick_learners
						trait = trait_traditional
						trait = trait_sedentary
						trait = trait_wasteful
						trait = katzen_trait_martial
					}
					effect = {
						save_global_event_target_as = douclaw_portrait
					}
				}
			}
		}
		event_target:global_event_country = {
			create_leader = {
				class = commander
				species = event_target:douclaw_portrait
				name = "Douclaw MacCathur"
				skill = 8
				gender = male
				set_age = 342
				traits = {
					trait = katzen_trait_elite
					trait = katzen_trait_nukelad
					trait = katzen_trait_blitzkrieg
					trait = katzen_trait_survivalist
					trait = leader_trait_cyborg
				}
				effect = {
					save_global_event_target_as = flusion_douclaw
					set_douclaw_real_portrait = yes
				}
			}
		}
	}

	option = {
		name = "giga_aeternum.43252.a"
		is_dialog_only = yes
		response_text = "giga_aeternum.43252.a.response"
	}

	option = {
		name = "giga_aeternum.43252.b"
		is_dialog_only = yes
		response_text = "giga_aeternum.43252.b.response"
	}

	option = {
		name = "giga_aeternum.43252.c"
		response_text = "giga_aeternum.43252.c.response"
		custom_tooltip = "giga_aeternum.43252.c.tooltip"
		create_leader = {
			class = commander
			species = event_target:douclaw_portrait
			name = "Douclaw MacCathur"
			skill = 8
			gender = male
			set_age = 342
			traits = {
				trait = katzen_trait_elite
				trait = katzen_trait_nukelad
				trait = katzen_trait_blitzkrieg
				trait = katzen_trait_survivalist
				trait = leader_trait_cyborg
			}
			effect = {
				save_global_event_target_as = flusion_douclaw
				set_douclaw_real_portrait = yes
			}
		}
	}

	option = {
		name = "giga_aeternum.43252.d"
		response_text = "giga_aeternum.43252.d.response"
		add_resource = {
			influence = 50
		}
	}
}

#nothing of interest (general)
country_event = {
	id = giga_aeternum.43253
	title = "giga_aeternum.43253.name"
	desc = "giga_aeternum.43253.desc"
	picture = GFX_evt_desert
	show_sound = event_ghost_town
	is_triggered_only = yes

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
	}

	option = {
		name = "giga_aeternum.43253.a"
		if = {
			limit = {
				has_ancrel = yes
			}
			add_resource = {
				minor_artifacts = 100
			}
		}
		hidden_effect = {
			change_variable = {
				which = aet_expedition_total_artifact_count
				value = 10
			}
		}
	}
}

#Ancient ruins
country_event = {
	id = giga_aeternum.4324
	title = "giga_aeternum.4324.name"
	desc = "giga_aeternum.4324.desc"
	picture = GFX_evt_city_ruins
	show_sound = event_ghost_town
	is_triggered_only = yes

	immediate = {
		set_variable = {
			which = aet_success_chance
			value = 0
		}
		set_country_flag = aet_exp_ancient_ruins
		set_random_aet_complexity_value = yes
		calculate_aet_success_chance_practicality = yes
	}

	option = {
		name = "giga_aeternum.4324.a"
		custom_tooltip = "giga_aeternum_practicality_tooltip"
		hidden_effect = {
			set_country_flag = aet_exp_anomaly_ongoing
			execute_aet_expedition_anomaly = yes
		}
	}

	option = {
		name = "giga_aeternum.4324.b"
		hidden_effect = {
			remove_country_flag = aet_exp_ancient_ruins
		}
	}
}

#ruins charted!
country_event = {
	id = giga_aeternum.43241
	title = "giga_aeternum.43241.name"
	desc = "giga_aeternum.43241.desc"
	picture = GFX_evt_ancient_artifact
	show_sound = event_activating_unknown_technology
	is_triggered_only = yes

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
	}

	option = {
		name = "giga_aeternum.43241.a"
		custom_tooltip = "giga_aeternum_1_intel_tooltip"
		if = {
			limit = {
				has_ancrel = yes
			}
			add_resource = {
				minor_artifacts = 1500
			}
		}
		trigger = {
			OR = {
				check_variable = {
					which = aet_loc_value
					value = 1
				}
				check_variable = {
					which = aet_loc_value
					value = 2
				}
			}
		}
		hidden_effect = {
			increase_aeternite_intel = yes
			change_variable = {
				which = aet_expedition_total_artifact_count
				value = 1500
			}
			change_variable = {
				which = aet_expedition_total_discovery_count
				value = 1
			}
			change_variable = {
				which = aet_expedition_total_intel_count
				value = 1
			}
		}
	}

	option = {
		name = "giga_aeternum.43241.b"
		custom_tooltip = "giga_aeternum_1_intel_tooltip"
		if = {
			limit = {
				has_ancrel = yes
			}
			add_resource = {
				minor_artifacts = 500
			}
		}
		trigger = {
			check_variable = {
				which = aet_loc_value
				value = 3
			}
		}
		add_monthly_resource_mult = {
			resource = physics_research
			value = 12
		}
		hidden_effect = {
			increase_aeternite_intel = yes
			change_variable = {
				which = aet_expedition_total_artifact_count
				value = 500
			}
			change_variable = {
				which = aet_expedition_total_discovery_count
				value = 1
			}
			change_variable = {
				which = aet_expedition_total_intel_count
				value = 1
			}
			random_list = {
				1 = { set_variable = { which = aet_exp_integ_damage value = 10 } }
				1 = { set_variable = { which = aet_exp_integ_damage value = 15 } }
				1 = { set_variable = { which = aet_exp_integ_damage value = 20 } }
			}
			subtract_variable = {
				which = aet_exp_hp
				value = aet_exp_integ_damage
			}
		}
	}
}

#ruins failure!
country_event = {
	id = giga_aeternum.43242
	title = "giga_aeternum.43242.name"
	desc = "giga_aeternum.43242.desc"
	picture = GFX_evt_collapsing_roof
	show_sound = event_structural_collapse
	is_triggered_only = yes

	immediate = {
		remove_country_flag = aet_exp_anomaly_ongoing
		random_list = {
			1 = { set_variable = { which = aet_exp_integ_damage value = 10 } }
			1 = { set_variable = { which = aet_exp_integ_damage value = 15 } }
			1 = { set_variable = { which = aet_exp_integ_damage value = 20 } }
			1 = { set_variable = { which = aet_exp_integ_damage value = 25 } }
		}
	}

	option = {
		name = "giga_aeternum.43242.a"
		custom_tooltip = "giga_aeternum_exp_integ_damage_tooltip"
	}
}

#THE AGENCY (ooo)

country_event = { #agency established
	id = giga_aeternum.3009
	title = "giga_aeternum.3009.name"
	desc = "giga_aeternum.3009.desc"
	is_triggered_only = yes
	picture = GFX_evt_fallen_empire
	show_sound = event_mystic_reveal

	trigger = {
		NOT = { has_country_flag = aeternite_agency_unlocked }
	}

	option = { #clues
		name = "giga_aeternum.3009.a"
		custom_tooltip = "giga_aeternum.3009.a.tooltip"
		hidden_effect = {
			set_country_flag = gigas_diplo_engaged
			set_country_flag = aeternite_agency_unlocked
			set_variable = {
				which = aeternite_intel_count
				value = 0
			}
			increase_aeternite_intel = yes
		}
	}
}

country_event = {
	id = giga_aeternum.3010
	title = "giga_aeternum.3010.name"

	desc = {
		text = "giga_aeternum.3010.desc.early.a"
		trigger = {
			NOR = {
				has_global_flag = aeternum_awakening_started
				has_global_flag = aeternum_awakening_ongoing
			}
		}
	}
	desc = {
		text = "giga_aeternum.3010.desc.early.b"
		trigger = {
			NOR = {
				has_global_flag = aeternum_awakening_started
				has_global_flag = aeternum_awakening_ongoing
			}
		}
	}
	desc = {
		text = "giga_aeternum.3010.desc.early.c"
		trigger = {
			NOR = {
				has_global_flag = aeternum_awakening_started
				has_global_flag = aeternum_awakening_ongoing
			}
		}
	}

	desc = {
		text = "giga_aeternum.3010.desc.preawaken.a"
		trigger = {
			has_global_flag = aeternum_awakening_started
			event_target:birch_aeternum = { check_variable = { which = years_until_awakening value >= 5 } }
		}
	}
	desc = {
		text = "giga_aeternum.3010.desc.preawaken.b"
		trigger = {
			has_global_flag = aeternum_awakening_started
			event_target:birch_aeternum = { check_variable = { which = years_until_awakening value >= 5 } }
		}
	}
	desc = {
		text = "giga_aeternum.3010.desc.preawaken.c"
		trigger = {
			has_global_flag = aeternum_awakening_started
			event_target:birch_aeternum = { check_variable = { which = years_until_awakening value >= 5 } }
		}
	}

	desc = {
		text = "giga_aeternum.3010.desc.soonawaken.a"
		trigger = {
			has_global_flag = aeternum_awakening_started
			event_target:birch_aeternum = { check_variable = { which = years_until_awakening value < 5 } }
		}
	}
	desc = {
		text = "giga_aeternum.3010.desc.soonawaken.b"
		trigger = {
			has_global_flag = aeternum_awakening_started
			event_target:birch_aeternum = { check_variable = { which = years_until_awakening value < 5 } }
		}
	}
	desc = {
		text = "giga_aeternum.3010.desc.soonawaken.c"
		trigger = {
			has_global_flag = aeternum_awakening_started
			event_target:birch_aeternum = { check_variable = { which = years_until_awakening value < 5 } }
		}
	}

	desc = {
		text = "giga_aeternum.3010.desc.atwar.a"
		trigger = {
			has_global_flag = aeternum_awakening_ongoing
		}
	}
	desc = {
		text = "giga_aeternum.3010.desc.atwar.b"
		trigger = {
			has_global_flag = aeternum_awakening_ongoing
		}
	}
	desc = {
		text = "giga_aeternum.3010.desc.atwar.c"
		trigger = {
			has_global_flag = aeternum_awakening_ongoing
		}
	}

	desc = {
		text = "giga_aeternum.3010.desc.gone.a"
		trigger = {
			has_global_flag = aeternum_vanquished
		}
	}
	desc = {
		text = "giga_aeternum.3010.desc.gone.b"
		trigger = {
			has_global_flag = aeternum_vanquished
		}
	}
	desc = {
		text = "giga_aeternum.3010.desc.gone.c"
		trigger = {
			has_global_flag = aeternum_vanquished
		}
	}

	is_triggered_only = yes

	diplomatic = yes

	trigger = {
		OR = {
			any_country = { is_country_type = dormant_aeternum }
			has_global_flag = aeternum_vanquished
		}
	}

	picture_event_data = {
		portrait = ROOT.species
		room = aeternum_monitor_room
	}

	immediate = {
		set_country_flag = monitoring_aeternum
		set_variable = {
			which = aeternite_damage_bonus
			value = aeternite_intel_count
		}
		multiply_variable = {
			which = aeternite_damage_bonus
			value = 5
		}
	}

	option = { #clues
		name = "giga_aeternum.3010.cluesvanquished"
		custom_tooltip = "aeternum_cluesvanquished_tooltip"
		trigger = {
			has_global_flag = aeternum_vanquished
			# any_owned_planet = { has_planet_flag = aeternum_birch_world }
		}
		allow = {
			hidden_trigger = {
				always = no
			}
		}
	}

	option = { #mapping
		name = "giga_aeternum.3010.mapping"
		custom_tooltip = "aeternum_mapping_tooltip"
		trigger = {
			has_country_flag = can_explore_aiondia
			any_owned_planet = { has_planet_flag = aeternum_birch_world }
		}
		allow = {
			hidden_trigger = {
				always = no
			}
		}
	}

	option = { #expedition
		name = "giga_aeternum.3010.expedition"
		trigger = {
			has_country_flag = can_explore_aiondia
			any_owned_planet = { has_planet_flag = aeternum_birch_world }
		}
		hidden_effect = {
			country_event = { id = giga_aeternum.4321 }
		}
	}

	option = { #clues
		name = "giga_aeternum.3010.clues"
		custom_tooltip = "aeternum_clues_tooltip"
		trigger = {
			NOT = { has_global_flag = aeternum_vanquished }
		}
		allow = {
			hidden_trigger = {
				always = no
			}
		}
	}

	option = { #countdown
		name = "giga_aeternum.3010.countdown"
		custom_tooltip = "aeternum_countdown_tooltip"
		trigger = {
			has_global_flag = aeternum_awakening_started
		}
		allow = {
			hidden_trigger = {
				always = no
			}
		}
	}

	option = { #clues
		name = "giga_aeternum.3010.howclues"
		response_text = "giga_aeternum.3010.howclues.response"
		is_dialog_only = yes
		trigger = {
			NOT = { has_global_flag = aeternum_vanquished }
		}
	}

	option = { #bring down the shield
		name = "giga_aeternum.3010.alondiashield"
		trigger = {
			has_global_flag = aeternum_awakening_ongoing
			has_country_flag = entered_alondia
			NOT = { any_country = { has_country_flag = disrupting_alondia } }
			NOT = { has_global_flag = alondia_shield_gone }
			NOT = { has_global_flag = aeternum_vanquished }
		}
		allow = {
			custom_tooltip = {
				fail_text = "needs_10_aet_intel"
				check_variable = {
					which = aeternite_intel_count
					value >= 10
				}
			}
		}
		hidden_effect = {
			country_event = { id = giga_aeternum.4201 }
		}
	}

	option = { #blow up the lighthouse
		name = "giga_aeternum.3010.alondialisteningpost"
		custom_tooltip = "aeternum_listeningpost_tooltip"
		trigger = {
			has_global_flag = aeternum_awakening_ongoing
			NOT = { has_global_flag = aeternum_vanquished }
			NOT = { any_country = { has_country_flag = disrupting_alondia } }
			NOT = { has_global_flag = aeternum_blind }
		}
		allow = {
			custom_tooltip = {
				fail_text = "needs_10_aet_intel"
				check_variable = {
					which = aeternite_intel_count
					value >= 10
				}
			}
		}
		hidden_effect = {
			country_event = { id = giga_aeternum.4203 }
		}
	}

	option = { #planetcraft
		name = "giga_aeternum.3010.planetcraft"
		trigger = {
			NOT = { has_country_flag = got_aeternite_planetcraft_tech }
			OR = {
				AND = {
					has_global_flag = aeternum_awakening_ongoing
					NOT = { has_global_flag = aeternum_vanquished }
				}
				AND = {
					has_global_flag = aeternum_vanquished
					OR = {
						has_country_flag = analysed_aeternite_planetcraft
						has_special_project = INVESTIGATE_AETERNUM_PLANETCRAFT
					}
				}
			}
		}
		allow = {
			has_technology = giga_tech_war_planet
			custom_tooltip = {
				fail_text = "needs_20_aet_intel"
				check_variable = {
					which = aeternite_intel_count
					value >= 20
				}
			}
			custom_tooltip = {
				fail_text = "analysed_aeternite_planetcraft_tooltip"
				has_country_flag = analysed_aeternite_planetcraft
			}
		}
		hidden_effect = {
			country_event = { id = giga_aeternum.4132 }
			set_country_flag = got_aeternite_planetcraft_tech
			remove_country_flag = monitoring_aeternum
		}
	}

	option = { #armor
		name = "giga_aeternum.3010.armor"
		trigger = {
			NOT = { has_country_flag = got_aeternite_armor_tech }
			OR = {
				AND = {
					has_global_flag = aeternum_awakening_ongoing
					NOT = { has_global_flag = aeternum_vanquished }
				}
				AND = {
					has_global_flag = aeternum_vanquished
					OR = {
						has_country_flag = analysed_aeternite_warforge
						has_special_project = INVESTIGATE_AETERNUM_FORGE
					}
				}
			}
		}
		allow = {
			has_technology = tech_ship_armor_5 #CHANGE ONCE COMP REWORK IS OUT
			custom_tooltip = {
				fail_text = "needs_12_aet_intel"
				check_variable = {
					which = aeternite_intel_count
					value >= 12
				}
			}
			custom_tooltip = {
				fail_text = "analysed_aeternite_armor_tooltip"
				has_country_flag = analysed_aeternite_warforge
			}
		}
		hidden_effect = {
			country_event = { id = giga_aeternum.4140 }
			set_country_flag = got_aeternite_armor_tech
			remove_country_flag = monitoring_aeternum
		}
	}

	option = { #investigate subspace network
		name = "giga_aeternum.3010.a"
		custom_tooltip = "giga_aeternum.3010.a.tooltip"
		trigger = {
			has_country_flag = aeternum_delay_unlocked
			NOT = { has_country_flag = aeternum_subspace_unlocked }
			has_global_flag = aeternum_awakening_started
		}
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value > 50000
			}
			NOT = { has_special_project = INVESTIGATE_AETERNUM_COMMS }
		}
		add_resource = { energy = -50000 }
		enable_special_project = {
			name = "INVESTIGATE_AETERNUM_COMMS"
			owner = root
		}
		hidden_effect = {
			remove_country_flag = monitoring_aeternum
		}
	}

	option = { #scramble subspace comms
		name = "giga_aeternum.3010.subspace"
		trigger = {
			has_country_flag = aeternum_subspace_unlocked
			has_global_flag = aeternum_awakening_started
		}
		allow = {
			hidden_trigger = {
				NOR = {
					any_country = { has_aeternum_scramble_comms_modifier = yes }
					event_target:birch_aeternum = {
						check_variable = {
							which = aeternum_comms_scramble_count
							value > 5
						}
					}
				}
			}
		}
		hidden_effect = {
			country_event = { id = giga_aeternum.3021 }
		}
	}

	option = { #investigate their megas
		name = "giga_aeternum.3010.b"
		custom_tooltip = "giga_aeternum.3010.b.tooltip"
		trigger = {
			has_country_flag = aeternum_delay_unlocked
			NOT = { has_country_flag = aeternum_engineering_unlocked }
			has_global_flag = aeternum_awakening_started
		}
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value > 50000
			}
			NOT = { has_special_project = INVESTIGATE_AETERNUM_ENGINEERING }
		}
		enable_special_project = {
			name = "INVESTIGATE_AETERNUM_ENGINEERING"
			owner = root
		}
		add_resource = { energy = -50000 }
		hidden_effect = {
			remove_country_flag = monitoring_aeternum
		}
	}

	option = { #bombard them
		name = "giga_aeternum.3010.infrabombing"
		trigger = {
			has_country_flag = aeternum_engineering_unlocked
			has_global_flag = aeternum_awakening_started
		}
		allow = {
			hidden_trigger = {
				NOR = {
					any_country = { has_aeternum_infra_bomb_modifier = yes }
					event_target:birch_aeternum = {
						check_variable = {
							which = aeternum_infra_bombing_count
							value > 3
						}
					}
				}
			}
		}
		hidden_effect = {
			country_event = { id = giga_aeternum.3041 }
		}
	}

	option = { #investigate their own intelligence data
		name = "giga_aeternum.3010.c"
		custom_tooltip = "giga_aeternum.3010.c.tooltip"
		trigger = {
			has_country_flag = aeternum_delay_unlocked
			NOT = { has_country_flag = aeternum_intel_unlocked }
			has_global_flag = aeternum_awakening_started
		}
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value > 50000
			}
			NOT = { has_special_project = INVESTIGATE_AETERNUM_INTEL }
		}
		enable_special_project = {
			name = "INVESTIGATE_AETERNUM_INTEL"
			owner = root
		}
		add_resource = { energy = -50000 }
		hidden_effect = {
			remove_country_flag = monitoring_aeternum
		}
	}

	option = { #make them think we are weak
		name = "giga_aeternum.3010.intel"
		trigger = {
			has_country_flag = aeternum_intel_unlocked
			has_global_flag = aeternum_awakening_started
		}
		allow = {
			hidden_trigger = {
				NOR = {
					any_country = { has_aeternum_scramble_intel_modifier = yes }
					event_target:birch_aeternum = {
						check_variable = {
							which = aeternum_intel_scramble_count
							value > 6
						}
					}
				}
			}
		}
		hidden_effect = {
			country_event = { id = giga_aeternum.3031 }
		}
	}

	option = { #bye
		default_hide_option = yes
		name = "giga_aeternum.3010.bye"
		hidden_effect = {
			remove_country_flag = monitoring_aeternum
		}
	}
}

###DELAY THEM###
#engineering investigated
country_event = {
	id = giga_aeternum.3040
	title = "giga_aeternum.3040.name"
	desc = "giga_aeternum.3040.desc"
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_started
		NOT = { has_country_flag = aeternum_engineering_unlocked }
	}

	immediate = {
		set_country_flag = aeternum_engineering_unlocked
		increase_aeternite_intel = yes
		increase_aeternite_intel = yes
		event_target:birch_aeternum = {
			set_variable = {
				which = aeternum_bombard_mineral_cost #mineral cost
				value = 250
			}
			set_variable = {
				which = aeternum_bombard_alloy_cost #alloy cost
				value = 100
			}
			set_variable = {
				which = aeternum_infra_bombing_count #amount of times it has been done
				value = 0
			}
		}
	}

	option = {
		name = "giga_aeternum.3040.a"
		custom_tooltip = "giga_aeternum_2_intel_tooltip"
	}
}

#event to do it
country_event = {
	id = giga_aeternum.3041
	title = "giga_aeternum.3041.name"
	desc = "giga_aeternum.3041.desc"
	is_triggered_only = yes

	diplomatic = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_started
	}

	picture_event_data = {
		portrait = ROOT.species
		room = aeternum_monitor_room
	}

	option = { #yes
		name = "giga_aeternum.3041.a"
		custom_tooltip = "giga_aeternum.3041.a.tooltip"
		add_resource = {
			energy = -100000
		}
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value > 100000
			}
		}
		hidden_effect = {
			random_list = {
				1 = {
					event_target:birch_aeternum = {
						set_variable = {
							which = aeternum_infra_bombing_awake_delay_value
							value = 2
						}
					}
					modifier = {
						factor = 2
						has_global_flag = giga_core_aeternum_2
					}
					modifier = {
						factor = 30
						has_global_flag = giga_core_aeternum_3
					}
				}
				1 = {
					event_target:birch_aeternum = {
						set_variable = {
							which = aeternum_infra_bombing_awake_delay_value
							value = 3
						}
					}
					modifier = {
						factor = 2
						has_global_flag = giga_core_aeternum_2
					}
					modifier = {
						factor = 10
						has_global_flag = giga_core_aeternum_3
					}
				}
				1 = {
					event_target:birch_aeternum = {
						set_variable = {
							which = aeternum_infra_bombing_awake_delay_value
							value = 4
						}
					}
					modifier = {
						factor = 2
						has_global_flag = giga_core_aeternum_2
					}
				}
				1 = {
					event_target:birch_aeternum = {
						set_variable = {
							which = aeternum_infra_bombing_awake_delay_value
							value = 5
						}
					}
					modifier = {
						factor = 2
						has_global_flag = giga_core_aeternum_2
					}
				}
				1 = {
					event_target:birch_aeternum = {
						set_variable = {
							which = aeternum_infra_bombing_awake_delay_value
							value = 6
						}
					}
				}
			}
			set_aeternum_infra_bombing_modifier = yes
			remove_country_flag = monitoring_aeternum
			country_event = { id = giga_aeternum.3042 days = 1080 } #CHANGE TO 2.5 YEARS
		}
	}

	option = { #forget it
		default_hide_option = yes
		name = "giga_aeternum.3021.forgetit"
		hidden_effect = {
			remove_country_flag = monitoring_aeternum
		}
	}
}

#it is done
country_event = {
	id = giga_aeternum.3042
	title = "giga_aeternum.3042.name"
	desc = "giga_aeternum.3042.desc"
	picture = GFX_evt_exploding_ship
	show_sound = event_alien_signal
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_started
	}

	immediate = {
		remove_aeternum_infra_bombing_modifiers = yes
		event_target:birch_aeternum = {
			change_variable = {
				which = years_until_awakening
				value = aeternum_infra_bombing_awake_delay_value
			}
			change_variable = {
				which = aeternum_infra_bombing_count
				value = 1
			}
			if = {
				limit = { check_variable = { which = aeternum_infra_bombing_count value = 1 } }
				set_variable = { which = aeternum_bombard_mineral_cost value = 1000 }
				set_variable = { which = aeternum_bombard_alloy_cost value = 500 }
			}
			else_if = {
				limit = { check_variable = { which = aeternum_infra_bombing_count value = 2 } }
				set_variable = { which = aeternum_bombard_mineral_cost value = 2500 }
				set_variable = { which = aeternum_bombard_alloy_cost value = 1500 }
			}
			else_if = {
				limit = { check_variable = { which = aeternum_infra_bombing_count value = 3 } }
				set_variable = { which = aeternum_bombard_mineral_cost value = 5000 }
				set_variable = { which = aeternum_bombard_alloy_cost value = 2500 }
			}
		}
	}

	option = { #yes
		name = "giga_aeternum.3042.a"
	}
}

#INTEL STUFF
#intel investigated
country_event = {
	id = giga_aeternum.3030
	title = "giga_aeternum.3030.name"
	desc = "giga_aeternum.3030.desc"
	picture = GFX_evt_fallen_empire
	show_sound = event_alien_signal
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_started
		NOT = { has_country_flag = aeternum_intel_unlocked }
	}

	immediate = {
		set_country_flag = aeternum_intel_unlocked
		increase_aeternite_intel = yes
		event_target:birch_aeternum = {
			set_variable = {
				which = aeternum_intel_society_cost #society cost in %
				value = 30
			}
			set_variable = {
				which = aeternum_intel_scramble_count #amount of times it has been done
				value = 0
			}
		}
	}

	option = {
		name = "giga_aeternum.3030.a"
		custom_tooltip = "giga_aeternum_1_intel_tooltip"
	}
}

#event to do it
country_event = {
	id = giga_aeternum.3031
	title = "giga_aeternum.3031.name"
	desc = "giga_aeternum.3031.desc"
	is_triggered_only = yes

	diplomatic = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_started
	}

	picture_event_data = {
		portrait = ROOT.species
		room = aeternum_monitor_room
	}

	option = { #yes
		name = "giga_aeternum.3031.a"
		custom_tooltip = "giga_aeternum.3031.a.tooltip"
		add_resource = {
			energy = -75000
			influence = -300
		}
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value > 75000
			}
			resource_stockpile_compare = {
				resource = influence
				value > 300
			}
		}
		hidden_effect = {
			set_aeternum_intel_scramble_modifier = yes
			remove_country_flag = monitoring_aeternum
			country_event = { id = giga_aeternum.3032 days = 1080 } #CHANGE TO 2 YEARS
			random_list = {
				1 = {
					event_target:birch_aeternum = {
						set_variable = {
							which = aeternum_intel_scramble_awake_delay_value
							value = 2
						}
					}
					modifier = {
						factor = 2
						has_global_flag = giga_core_aeternum_2
					}
					modifier = {
						factor = 30
						has_global_flag = giga_core_aeternum_3
					}
				}
				1 = {
					event_target:birch_aeternum = {
						set_variable = {
							which = aeternum_intel_scramble_awake_delay_value
							value = 3
						}
					}
					modifier = {
						factor = 2
						has_global_flag = giga_core_aeternum_2
					}
					modifier = {
						factor = 10
						has_global_flag = giga_core_aeternum_3
					}
				}
				1 = {
					event_target:birch_aeternum = {
						set_variable = {
							which = aeternum_intel_scramble_awake_delay_value
							value = 4
						}
					}
					modifier = {
						factor = 2
						has_global_flag = giga_core_aeternum_2
					}
				}
				1 = {
					event_target:birch_aeternum = {
						set_variable = {
							which = aeternum_intel_scramble_awake_delay_value
							value = 5
						}
					}
					modifier = {
						factor = 2
						has_global_flag = giga_core_aeternum_2
					}
				}
				1 = {
					event_target:birch_aeternum = {
						set_variable = {
							which = aeternum_intel_scramble_awake_delay_value
							value = 6
						}
					}
				}
			}
		}
	}

	option = { #forget it
		default_hide_option = yes
		name = "giga_aeternum.3021.forgetit"
		hidden_effect = {
			remove_country_flag = monitoring_aeternum
		}
	}
}

#it is done
country_event = {
	id = giga_aeternum.3032
	title = "giga_aeternum.3032.name"
	desc = "giga_aeternum.3032.desc"
	picture = GFX_evt_fallen_empire
	show_sound = event_alien_signal
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_started
	}

	immediate = {
		remove_aeternum_intel_scramble_modifiers = yes
		event_target:birch_aeternum = {
			change_variable = {
				which = years_until_awakening
				value = aeternum_intel_scramble_awake_delay_value
			}
			change_variable = {
				which = aeternum_intel_scramble_count
				value = 1
			}
			multiply_variable = {
				which = aeternum_intel_society_cost
				value = 1.5
			}
		}
	}

	option = { #yes
		name = "giga_aeternum.3022.a"
	}
}

#subspace network investigated
#DELAY
country_event = {
	id = giga_aeternum.3020
	title = "giga_aeternum.3020.name"
	desc = "giga_aeternum.3020.desc"
	picture = GFX_evt_physics_research
	show_sound = event_alien_signal
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_started
		NOT = { has_country_flag = aeternum_subspace_unlocked }
	}

	immediate = {
		set_country_flag = aeternum_subspace_unlocked
		increase_aeternite_intel = yes
		event_target:birch_aeternum = {
			set_variable = {
				which = speed_debuff #speed debuff
				value = 0
			}
			set_variable = {
				which = aeternum_comms_scramble_cost #monthly EC cost
				value = 500
			}
			set_variable = {
				which = aeternum_comms_scramble_count #amount of times it has been done
				value = 0
			}
		}
	}

	option = {
		name = "giga_aeternum.3020.a"
		custom_tooltip = "giga_aeternum_1_intel_tooltip"
	}
}

#event to do it
country_event = {
	id = giga_aeternum.3021
	title = "giga_aeternum.3021.name"
	desc = "giga_aeternum.3021.desc"
	is_triggered_only = yes

	diplomatic = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_started
	}

	picture_event_data = {
		portrait = ROOT.species
		room = aeternum_monitor_room
	}

	immediate = {
		set_country_flag = aeternum_subspace_unlocked
	}

	option = { #yes
		name = "giga_aeternum.3021.a"
		custom_tooltip = "giga_aeternum.3021.a.tooltip"
		hidden_effect = {
			set_aeternum_comms_scramble_modifier = yes
			remove_country_flag = monitoring_aeternum
			country_event = { id = giga_aeternum.3022 days = 1080 } #CHANGE TO 3 YEARS
		}
	}

	option = { #forget it
		default_hide_option = yes
		name = "giga_aeternum.3021.forgetit"
		hidden_effect = {
			remove_country_flag = monitoring_aeternum
		}
	}
}

#it is done
country_event = {
	id = giga_aeternum.3022
	title = "giga_aeternum.3022.name"
	desc = "giga_aeternum.3022.desc"
	picture = GFX_evt_glitchy_matrix
	show_sound = event_alien_signal
	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = dormant_aeternum }
		has_global_flag = aeternum_awakening_started
	}

	immediate = {
		remove_aeternum_comms_scramble_modifiers = yes
		event_target:birch_aeternum = {
			set_aeternum_speed_debuff = yes
			if = {
				limit = { has_global_flag = giga_core_aeternum_1 }
				change_variable = {
					which = years_until_awakening
					value = 8
				}
			}
			else_if = {
				limit = { has_global_flag = giga_core_aeternum_2 }
				change_variable = {
					which = years_until_awakening
					value = 4
				}
			}
			else_if = {
				limit = { has_global_flag = giga_core_aeternum_3 }
				change_variable = {
					which = years_until_awakening
					value = 2
				}
			}
			else_if = {
				limit = { has_global_flag = giga_core_aeternum_4 }
				change_variable = {
					which = years_until_awakening
					value = 0
				}
			}
			change_variable = {
				which = speed_debuff
				value = 15
			}
			change_variable = {
				which = aeternum_comms_scramble_count
				value = 1
			}
			if = {
				limit = { check_variable = { which = aeternum_comms_scramble_count value = 1 } }
				set_variable = { which = aeternum_comms_scramble_cost value = 1000 }
			}
			else_if = {
				limit = { check_variable = { which = aeternum_comms_scramble_count value = 2 } }
				set_variable = { which = aeternum_comms_scramble_cost value = 2500 }
			}
			else_if = {
				limit = { check_variable = { which = aeternum_comms_scramble_count value = 3 } }
				set_variable = { which = aeternum_comms_scramble_cost value = 4000 }
			}
			else_if = {
				limit = { check_variable = { which = aeternum_comms_scramble_count value = 4 } }
				set_variable = { which = aeternum_comms_scramble_cost value = 7000 }
			}
			else_if = {
				limit = { check_variable = { which = aeternum_comms_scramble_count value = 5 } }
				set_variable = { which = aeternum_comms_scramble_cost value = 12000 }
			}
			else_if = {
				limit = { check_variable = { which = aeternum_comms_scramble_count value = 6 } }
				set_variable = { which = aeternum_comms_scramble_cost value = 16000 }
			}
		}
	}

	option = { #yes
		name = "giga_aeternum.3022.a"
	}
}

###COUNT FOR EVENT CHAIN###
#Count Aeternite ships destroyed
country_event = {
	id = giga_aeternum.5000

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		fromfrom = {
			OR = {
				is_ship_size = giga_aeternum_corvette
				is_ship_size = giga_aeternum_cruiser
				is_ship_size = giga_aeternum_battleship
				is_ship_size = giga_aeternum_titan
				is_ship_size = giga_aeternum_planetcraft
			}
		}
		is_country_type = dormant_aeternum
	}

	immediate = {
		every_country = {
			limit = {
				has_event_chain = "aeternum_chain"
			}
			add_event_chain_counter = {
				event_chain = "aeternum_chain"
				counter = "aeternum_ships_lost"
				amount = 1
			}
			add_event_chain_counter = {
				event_chain = "aeternum_chain"
				counter = "aeternum_ship_count"
				amount = -1
			}
		}
	}
}

#Count ships destroyed by Aeternum
country_event = {
	id = giga_aeternum.5001

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		is_country_type = dormant_aeternum
	}

	immediate = {
		every_country = {
			limit = {
				has_event_chain = "aeternum_chain"
			}
			add_event_chain_counter = {
				event_chain = "aeternum_chain"
				counter = "ships_lost_to_aeternum"
				amount = 1
			}
		}
	}
}

country_event = {
	id = giga_aeternum.5002

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		any_country = {
			is_country_type = dormant_aeternum
		}
	}

	immediate = {
		country_event = { id = giga_aeternum.5002 days = 30 } #Count again
		every_owned_ship = { #counts ships
			limit = {
				NOT = { has_ship_flag = aeternum_already_counted }
				OR = {
					is_ship_size = giga_aeternum_corvette
					is_ship_size = giga_aeternum_cruiser
					is_ship_size = giga_aeternum_battleship
					is_ship_size = giga_aeternum_titan
					is_ship_size = giga_aeternum_planetcraft
				}
			}
			set_ship_flag = aeternum_already_counted
			every_country = {
				limit = {
					has_event_chain = "aeternum_chain"
				}
				add_event_chain_counter = {
					event_chain = "aeternum_chain"
					counter = "aeternum_ship_count"
					amount = 1
				}
			}
		}
		every_owned_megastructure = { #count forges
			limit = {
				is_megastructure_type = aeternum_forge_1
				NOT = {
					solar_system = {
						has_star_flag = aeternum_already_counted_forge
					}
				}
			}
			solar_system = {
				set_star_flag = aeternum_already_counted_forge
			}
			every_country = {
				limit = {
					has_event_chain = "aeternum_chain"
				}
				add_event_chain_counter = {
					event_chain = "aeternum_chain"
					counter = "aeternum_warforge_count"
					amount = 1
				}
			}
		}
		every_system = { #remove destroyed forges
			limit = {
				has_star_flag = aeternum_already_counted_forge
				NOT = {
					any_system_megastructure = {
						is_megastructure_type = aeternum_forge_1
					}
				}
			}
			remove_star_flag = aeternum_already_counted_forge
			every_country = {
				limit = {
					has_event_chain = "aeternum_chain"
				}
				add_event_chain_counter = {
					event_chain = "aeternum_chain"
					counter = "aeternum_warforge_count"
					amount = -1
				}
			}
		}
		every_system_within_border = { #count systems
			limit = {
				NOT = { has_star_flag = aeternum_already_counted }
			}
			set_star_flag = aeternum_already_counted
			every_country = {
				limit = {
					has_event_chain = "aeternum_chain"
				}
				add_event_chain_counter = {
					event_chain = "aeternum_chain"
					counter = "aeternum_system_count"
					amount = 1
				}
			}
		}
		every_system = { #remove captured systems
			limit = {
				has_star_flag = aeternum_already_counted
				OR = {
					AND = {
						exists = owner
						owner = {
							NOT = { is_country_type = dormant_aeternum }
						}
					}
					NOT = { exists = owner }
				}
			}
			remove_star_flag = aeternum_already_counted
			every_country = {
				limit = {
					has_event_chain = "aeternum_chain"
				}
				add_event_chain_counter = {
					event_chain = "aeternum_chain"
					counter = "aeternum_system_count"
					amount = -1
				}
			}
		}
	}
}

#galcom stuff
country_event = { #galcom does intel stuff
	id = giga_aeternum.8000
	title = "giga_aeternum.8000.name"
	desc = "giga_aeternum.8000.desc"
	picture = GFX_evt_physics_research
	show_sound = event_sensor_ping

	is_triggered_only = yes

	option = {
		name = "giga_aeternum.8000.a"
		add_modifier = {
			modifier = aeternum_research_cooperative
			days = 1800
		}
		hidden_effect = {
			country_event = { id = giga_aeternum.8001 days = 1800 } #CHANGE
		}
	}
}

country_event = { #yay
	id = giga_aeternum.8001
	title = "giga_aeternum.8001.name"
	desc = "giga_aeternum.8001.desc"
	picture = GFX_evt_physics_research
	show_sound = event_laboratory_sound

	is_triggered_only = yes

	option = {
		name = "giga_aeternum.8001.a"
		custom_tooltip = "giga_aeternum.8001.a.tooltip"
		remove_modifier = aeternum_research_cooperative
		add_resource = {
			influence = 100
		}
		add_monthly_resource_mult = {
			resource = unity
			value = 6
		}
		hidden_effect = {
			while = {
				count = 3
				increase_aeternite_intel = yes
			}
			every_country = {
				limit = {
					is_ai = yes
					NOT = { has_modifier = galcom_aeternite_intel_buff }
				}
				add_modifier = {
					modifier = galcom_aeternite_intel_buff
					days = -1
				}
			}
		}
	}
}

#Form megafed
country_event = { 
	id = giga_aeternum.8010
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		random_country = { #pick president
			limit = {
				is_galactic_community_member = yes
				is_ai = no
			}
			set_country_flag = giga_aeternite_league_leader
			save_global_event_target_as = giga_aeternite_league_leader
			set_timed_country_flag = { flag = ai_no_leave_fed days = 10800 }
			if = {
				limit = { has_federation = yes }
				leave_alliance = { override_requirements = yes }
			}
			set_country_flag = ai_no_leave_fed
			join_alliance = {
				who = event_target:giga_aeternite_league_leader
				name = "Anti-Aeternite Alliance"
				override_requirements = yes
			}
			set_country_flag = is_in_anti_aeternite_alliance
			federation = {
				set_federation_type = default_federation
				set_federation_flag = anti_aeternite_alliance
				add_cohesion = 100
				add_federation_experience = 7000
				save_global_event_target_as = anti_aeternite_federation
				set_federation_succession_term = years_40
			}
		}
		every_country = { #join the AAA
			limit = {
				is_galactic_community_member = yes
				NOT = { has_country_flag = giga_aeternite_league_leader }
			}
			set_timed_country_flag = {
				flag = ai_no_leave_fed
				days = 9000
			}
			if = {
				limit = { has_federation = yes }
				leave_alliance = { override_requirements = yes }
			}
			join_alliance = {
				who = event_target:giga_aeternite_league_leader
				override_requirements = yes
			}
			set_country_flag = is_in_anti_aeternite_alliance
			federation = {
				add_cohesion = 100
				add_federation_experience = 150
			}
			if = {
				limit = { is_at_war = yes }
				every_war = { remove_war_participant = prev }
			}
		}
		every_country = {
			limit = { has_country_flag = is_in_anti_aeternite_alliance }
			every_country = {
				limit = { has_country_flag = is_in_anti_aeternite_alliance NOT = { is_same_empire = PREV } }
				add_opinion_modifier = {
					who = PREV
					modifier = opinion_put_differences_aside_aeternum
				}
			}
		}
		every_country = {
			country_event = { id = giga_aeternum.8011 }
		}
	}
}

country_event = { #galcom forms AAA
	id = giga_aeternum.8011
	title = "giga_aeternum.8011.name"
	desc = "giga_aeternum.8011.desc"
	picture = GFX_evt_galactic_senate
	show_sound = event_celebration

	is_triggered_only = yes

	option = {
		name = "giga_aeternum.8011.a"
		custom_tooltip = "giga_aeternum.8011.a.tooltip"
		if = {
			limit = { has_country_flag = is_in_anti_aeternite_alliance }
			add_modifier = {
				modifier = anti_aeternite_league_emergency
				days = -1
			}
		}
	}
}


country_event = { #New Galcom members join AAA
	id = giga_aeternum.8012
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_global_flag = galcom_anti_aeternite_league_formed
		NOT = { is_active_resolution = resolution_custodian_form_empire }
	}

	immediate = {
		event_target:anti_aeternite_federation = {
			federation_leader = { save_event_target_as = event_target:giga_aeternite_league_leader }
		}
		if = {
			limit = { has_federation = yes }
			leave_alliance = { override_requirements = yes }
		}
		join_alliance = {
			who = event_target:giga_aeternite_league_leader
			name = "Anti-Aeternite Alliance"
			override_requirements = yes
		}
		if = {
			limit = { is_at_war = yes }
			every_war = { remove_war_participant = prev }
		}
		set_timed_country_flag = {
			flag = ai_no_leave_fed
			days = 9000
		}
		add_modifier = {
			modifier = anti_aeternite_league_emergency
			days = -1
		}
	}
}

country_event = { #Remove countries from AAA
	id = giga_aeternum.8013
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_global_flag = galcom_anti_aeternite_league_formed
		NOT = { is_active_resolution = resolution_custodian_form_empire }
	}

	immediate = {
		event_target:anti_aeternite_federation = {
			federation_leader = { save_event_target_as = event_target:giga_aeternite_league_leader }
		}
		if = {
			limit = {
				has_federation = yes
				federation = { has_federation_flag = anti_aeternite_alliance } 
			}
			leave_alliance = { override_requirements = yes }
		}
		remove_modifier = anti_aeternite_league_emergency
	}
}

#Invite FEs
country_event = { 
	id = giga_aeternum.8020
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				any_country = {
					NOT = { has_country_flag = already_invited_to_aaa }
					OR = {
						is_country_type = fallen_empire
						is_country_type = awakened_fallen_empire
					}
				}
			}
			random_country = {
				limit = {
					NOT = { has_country_flag = already_invited_to_aaa }
					OR = {
						is_country_type = fallen_empire
						is_country_type = awakened_fallen_empire
					} 
				}
				save_global_event_target_as = precursor_invited_to_aaa
			}
			#We picked a FE to invite now let's determine if they say yes or no
			event_target:precursor_invited_to_aaa = {
				set_country_flag = already_invited_to_aaa
				random_list = {
					80 = { #Joins
						set_country_flag = precursor_joined_aaa
						set_timed_country_flag = {
							flag = ai_no_leave_fed
							days = 9000
						}
						add_modifier = {
							modifier = anti_aeternite_league_emergency
							days = -1
						}
						if = {
							limit = { has_federation = yes }
							leave_alliance = { override_requirements = yes }
						}
						event_target:anti_aeternite_federation = {
							federation_leader = { save_event_target_as = event_target:giga_aeternite_league_leader }
						}
						join_alliance = {
							who = event_target:giga_aeternite_league_leader
							override_requirements = yes
						}
						set_country_flag = is_in_anti_aeternite_alliance
						federation = {
							add_cohesion = 100
							add_federation_experience = 150
						}
						if = {
							limit = { is_at_war = yes }
							every_war = { remove_war_participant = prev }
						}
						every_country = {
							limit = { has_country_flag = is_in_anti_aeternite_alliance }
							country_event = { id = giga_aeternum.8022 }
						}
						every_country = {
							limit = { has_country_flag = is_in_anti_aeternite_alliance NOT = { is_same_empire = event_target:precursor_invited_to_aaa } }
							add_opinion_modifier = {
								who = event_target:precursor_invited_to_aaa
								modifier = opinion_put_differences_aside_aeternum
							}
							event_target:precursor_invited_to_aaa = {
								add_opinion_modifier = {
									who = PREV
									modifier = opinion_put_differences_aside_aeternum
								}
							}
						}
						modifier = { #xenophobes say no
							add = -80 
							has_ethic = ethic_fanatic_xenophobe
						}
						modifier = { #xenophiles say yes
							add = 15
							has_ethic = ethic_fanatic_xenophile
						}
						modifier = { #being at with a country in the AAA reduces odds
							add = -30 
							any_country = {
								has_country_flag = is_in_anti_aeternite_alliance
								is_at_war_with = event_target:precursor_invited_to_aaa
							}
						}
						modifier = { #FEs less likely to join
							add = -10
							is_country_type = fallen_empire
						}
						modifier = {
							factor = 3
							is_at_war_with = event_target:birch_aeternum
						}
					}
					20 = { #Refuses
						set_country_flag = precursor_rejected_aaa
						every_country = {
							limit = { has_country_flag = is_in_anti_aeternite_alliance }
							country_event = { id = giga_aeternum.8023 }
						}
						modifier = { #xenophobes say no
							add = 80 
							has_ethic = ethic_fanatic_xenophobe
						}
						modifier = { #xenophiles say yes
							add = -15
							has_ethic = ethic_fanatic_xenophile
						}
						modifier = { #being at with a country in the AAA reduces odds
							add = 30 
							any_country = {
								has_country_flag = is_in_anti_aeternite_alliance
								is_at_war_with = event_target:precursor_invited_to_aaa
							}
						}
						modifier = { #FEs less likely to join
							add = 10
							is_country_type = fallen_empire
						}
					}
				}
			}
			country_event = { id = giga_aeternum.8020 days = 30 }
		}
	}
}

country_event = { #inviting FEs
	id = giga_aeternum.8021
	title = "giga_aeternum.8021.name"
	desc = "giga_aeternum.8021.desc"
	picture = GFX_evt_alien_propaganda
	show_sound = event_announcement

	is_triggered_only = yes

	option = {
		name = "giga_aeternum.8021.a"
		custom_tooltip = "giga_aeternum.8021.a.tooltip"
		add_resource = {
			influence = 50
		}
	}
}

country_event = { #FE says yes!
	id = giga_aeternum.8022
	title = "giga_aeternum.8022.name"
	desc = "giga_aeternum.8022.desc"
	picture = GFX_evt_diplomatic_visit
	show_sound = event_celebration

	is_triggered_only = yes

	option = {
		name = "giga_aeternum.8022.a"
		custom_tooltip = "giga_aeternum.8022.a.tooltip"
		add_resource = {
			influence = 50
		}
	}
}

country_event = { #FE says no
	id = giga_aeternum.8023
	title = "giga_aeternum.8023.name"
	desc = "giga_aeternum.8023.desc"
	picture = GFX_evt_assembly_fight
	show_sound = event_planetary_riot

	is_triggered_only = yes

	option = {
		name = "giga_aeternum.8023.a"
		custom_tooltip = "giga_aeternum.8023.a.tooltip"
		add_resource = {
			influence = -25
		}
	}
}

event = {
	id = giga_aeternum.8024
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_global_flag = galcom_anti_aeternite_league_formed
	}

	immediate = {
		if = {
			limit = { 
				has_global_flag = galcom_anti_aeternite_league_formed
				NOT = { any_country = { is_country_type = dormant_aeternum } } 
			}
			remove_global_flag = galcom_anti_aeternite_league_formed
			every_country = {
				limit = {
					has_federation = yes
					federation = { has_federation_flag = anti_aeternite_alliance }
				}
				remove_country_flag = is_in_anti_aeternite_alliance
				if = {
					limit = { has_federation = yes }
					leave_alliance = { override_requirements = yes }
				}
				if = {
					limit = { has_country_flag = ai_no_leave_fed }
					remove_country_flag = ai_no_leave_fed
				}
				remove_modifier = anti_aeternite_league_emergency
				country_event = { id = giga_aeternum.8040 }
			}
			every_country = {
				every_country = {
					limit = {
						has_opinion_modifier = {
							who = PREV
							modifier = opinion_put_differences_aside_aeternum
						}
					}
					remove_opinion_modifier = {
						who = PREV
						modifier = opinion_put_differences_aside_aeternum
					}
				}
			}
		}
		else_if = {
			limit = { #Its gone? stopped existing one way or another.
				NOT = { is_active_resolution = resolution_custodian_form_empire }
				NOT = { exists = event_target:anti_aeternite_federation } 
				has_global_flag = galcom_anti_aeternite_league_formed 
			} 
			remove_global_flag = galcom_anti_aeternite_league_formed
			every_country = {
				if = {
					limit = { has_country_flag = ai_no_leave_fed }
					remove_country_flag = ai_no_leave_fed
				}
				remove_modifier = anti_aeternite_league_emergency
				country_event = { id = giga_aeternum.8041 }	
				every_country = {
					limit = {
						has_opinion_modifier = {
							who = PREV
							modifier = opinion_put_differences_aside_aeternum
						}
					}
					remove_opinion_modifier = {
						who = PREV
						modifier = opinion_put_differences_aside_aeternum
					}
				}
			}
		}
		else = {
			event_target:anti_aeternite_federation = {
				if = {
					limit = { NOT = { has_federation_type = default_federation } }
					set_federation_type = default_federation
				}
				add_cohesion = 100
			}
			if = { #countries in galcom but not in anti-aeternite alliance, remove from league
				limit = {
					any_country = {
						is_galactic_community_member = yes
						OR = {
							has_federation = no
							federation = { NOT = { has_federation_flag = anti_aeternite_alliance } }
						}
					}
				}
				every_country = {
					limit = {
						is_galactic_community_member = yes
						any_federation = {
							has_federation_flag = anti_aeternite_alliance
						}
						OR = {
							has_federation = no
							federation = { NOT = { has_federation_flag = anti_aeternite_alliance } }
						}
					}
					remove_from_galactic_community = yes
					remove_modifier = anti_aeternite_league_emergency
					remove_country_flag = is_in_anti_aeternite_alliance
				}
			}
			if = { #countries in AAA but not in community, add to community
				limit = {
					any_country = {
						is_galactic_community_member = no
						has_federation = yes
						federation = { has_federation_flag = anti_aeternite_alliance }
					}
				}
				every_country = {
					limit = {
						is_galactic_community_member = no
						has_federation = yes
						federation = { has_federation_flag = anti_aeternite_alliance }
					}
					add_to_galactic_community = yes
				}
			}
		}
	}
}

country_event = {
	id = giga_aeternum.80241 #Imperium formation means it has to go and it has to be done on its own
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_global_flag = galcom_anti_aeternite_league_formed
		last_resolution_changed = resolution_custodian_form_empire
	}

	immediate = {
		remove_global_flag = galcom_anti_aeternite_league_formed
		set_global_flag = giga_aaa_imperial_decree
		every_country = {
			limit = {
				has_federation = yes
				federation = { has_federation_flag = anti_aeternite_alliance }
			}
			remove_country_flag = is_in_anti_aeternite_alliance
			if = {
				limit = { has_federation = yes }
				leave_alliance = { override_requirements = yes }
			}
			if = {
				limit = { has_country_flag = ai_no_leave_fed }
				remove_country_flag = ai_no_leave_fed
			}
			remove_modifier = anti_aeternite_league_emergency
		}
		every_country = {
			country_event = { id = giga_aeternum.8042 }
			every_country = {
				limit = {
					has_opinion_modifier = {
						who = PREV
						modifier = opinion_put_differences_aside_aeternum
					}
				}
				remove_opinion_modifier = {
					who = PREV
					modifier = opinion_put_differences_aside_aeternum
				}
			}
		}
	}
}

country_event = {
	id = giga_aeternum.8025
	hide_window = yes
	is_triggered_only = yes

	trigger = { has_country_flag = is_in_anti_aeternite_alliance }

	immediate = {
		remove_country_flag = is_in_anti_aeternite_alliance
		remove_modifier = anti_aeternite_league_emergency
		if = {
			limit = {
				NOR = { 
					is_galactic_custodian = yes 
					AND = {
						is_subject = yes
						galactic_custodian = {
							is_overlord_to = prev
						}
					}
				}
				any_galcom_member = {
					NOT = { is_same_empire = prev }
				}
			}
			remove_from_galactic_community = yes 
		}
	}
}

country_event = { #AAA attacks aeternum
	id = giga_aeternum.8030
	title = "giga_aeternum.8030.name"
	desc = {
		trigger = { 
			has_global_flag = galcom_anti_aeternite_league_formed 
			NOT = { last_resolution_changed = resolution_pre_emptive_aeternum_war_empire } 
		}	
		text = "giga_aeternum.8030.desc"
	}
	desc = {
		trigger = { last_resolution_changed = resolution_pre_emptive_aeternum_war_empire }
		text = "giga_aeternum.8030.desc_empire" #The empire is coming for Aiondia
	}
	picture = GFX_evt_machine_space_battle
	show_sound = event_ground_battle

	is_triggered_only = yes

	option = {
		name = "giga_aeternum.8030.a"
		trigger = {
			has_global_flag = galcom_anti_aeternite_league_formed
			NOT = { last_resolution_changed = resolution_pre_emptive_aeternum_war_empire } 
		}
		custom_tooltip = "giga_aeternum.8030.a.tooltip"
		if = {
			limit = { has_country_flag = is_in_anti_aeternite_alliance }
			add_modifier = {
				modifier = pre_emptive_aeternite_strike
				days = 720
			}
		}
	}

	option = {
		name = "giga_aeternum.8030.b"
		trigger = {
			last_resolution_changed = resolution_pre_emptive_aeternum_war_empire
		}
		custom_tooltip = "giga_aeternum.8030.b.tooltip"
		if = {
			limit = { is_galactic_community_member = yes }
			add_modifier = {
				modifier = pre_emptive_aeternite_strike
				days = 720
			}
		}
	}

}

fleet_event = {
	id = giga_aeternum.8031
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = { has_fleet_flag = moving_towards_aiondia }
			fleet_event = { id = giga_aeternum.8031 days = 10 }
		}
		queue_actions = { #Move to Aiondia
			find_closest_system = {
				trigger = {
					id = giga_aeternum.8031.trigger.1
					any_system_planet = {
						is_planet_class = pc_birch
					}
				}
				found_system = {
					move_to = this
				}
			}
		}
	}
}

#yeet colossi
fleet_event = {
	id = giga_aeternum.8050
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_owned_ship = { is_ship_size = colossus }
		owner = { NOT = { is_country_type = dormant_aeternum } }
		from = { any_system_planet = { has_planet_flag = aeternum_birch_world } }
	}

	immediate = {
		solar_system = { random_neighbor_system = { save_event_target_as = giga_colossus_system_move } }
		ROOT = { set_location = event_target:giga_colossus_system_move.star }
	}
}

#debug
country_event = { #make aeternum really weak
	id = giga_aeternum.9999
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		event_target:birch_aeternum = {
			add_modifier = {
				modifier = aeternum_debug_debuff
				days = -1
			}
		}
	}
}

country_event = {
	id = giga_aeternum.9998
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		event_target:birch_aeternum = {
			remove_modifier = aeternum_debug_debuff
		}
	}
}

country_event = {
	id = giga_aeternum.9997
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		increase_aeternite_intel = yes
	}
}

country_event = {
	id = giga_aeternum.9996
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		while = { count = 5 increase_aeternite_intel = yes }
	}
}

country_event = {
	id = giga_aeternum.9995
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = { limit = { has_country_flag = aeternum_diplomacy_engaged } remove_country_flag = aeternum_diplomacy_engaged }
	}
}

#fix blown up aiondia
planet_event = {
	id = giga_aeternum.9994
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_planet_flag = aeternum_birch_world
	}

	immediate = {
		event_target:birch_aeternum = {
			country_event = { id = giga_aeternum.9993 days = 2 }
		}
		event_target:aeternum_birch_world = {
			destroy_colony = yes
			if = {
				limit = { owner = { NOT = { is_country_type = dormant_aeternum } } }
				set_owner = event_target:birch_aeternites
			}
			if = {
				limit = { has_modifier = birch_world_grand_shield }
				set_planet_entity = { entity = "birch_world_aeternum_01_entity" }
			}
			set_owner = event_target:birch_aeternum
			set_capital = yes
			while = { count = 10	create_army = { name = NAME_aeternite_defender	owner = last_created_country species = event_target:birch_aeternites type = "aeternite_defender" } }
			create_pop = {
				species = event_target:birch_aeternites
				count = 250
			}
			create_pop = {
				species = event_target:birch_aeternites_robots
				count = 100
			}
		}
	}
}

country_event = {
	id = giga_aeternum.9993
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { NOT = { has_global_flag = giga_core_aeternum_4 } }
			event_target:aeternum_birch_world = {
				add_district = district_giga_birch_structure
			}
		}
		else = {
			event_target:aeternum_birch_world = {
				add_district = district_giga_birch_void_structure
			}
		}
		country_event = { id = giga_aeternum.9992 days = 2 }
	}
}


country_event = {
	id = giga_aeternum.9992
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		event_target:aeternum_birch_world = {
			solar_system = { random_system_planet = { limit = { is_planet_class = pc_core_black_hole } set_name = "Aiondiaukko" } }

			if = {
				limit = { NOT = { has_global_flag = giga_core_aeternum_4 } }
				add_district = district_giga_birch_orykta
				add_district = district_giga_birch_ktisma
				add_district = district_giga_birch_physma
			}
			else = {
				add_district = district_giga_birch_void_orykta
				add_district = district_giga_birch_void_physma
				add_district = district_giga_birch_void_ktisma
			}

			katzen_clear_capitals = yes

			add_building = building_giga_aeternum_birch_capital
			add_building = building_giga_aeternum_ruler_computer

			add_building = building_giga_aeternum_housing
			add_building = building_giga_aeternum_housing

			add_building = building_giga_aeternum_leisure_center
			add_building = building_giga_aeternum_leisure_center

			add_building = building_giga_aeternum_quantum_reactor
			add_building = building_giga_aeternum_quantum_reactor

			add_building = building_giga_aeternum_ultrafarm
			add_building = building_giga_aeternum_ultrafarm

			add_building = building_giga_aeternum_psi_halls

			add_building = building_giga_aeternum_synthetizer

			add_deposit = d_aeternum_decaying_hyperstructure
			add_deposit = d_aeternum_decaying_hyperstructure
			add_deposit = d_aeternum_decaying_hyperstructure
			add_deposit = d_aeternum_decaying_hyperstructure
		}
	}
}

#kill aeternite herc
ship_event = {
	id = giga_aeternum.6000
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_global_flag = sofe_activated
		is_ship_size = precursor_colossus
		owner = { is_country_type = dormant_aeternum }
	}

	immediate = {
		destroy_ship = ROOT
	}
}
# Citadel Cleanup
# This = Ship
# From = Disabler Ship
ship_event = {
	id = giga_aeternum.6100
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_ship_size = starbase_aet
		owner = { is_country_type = dormant_aeternum }
	}

	immediate = {
		if = {
			limit = { from.owner = { is_country_type = default } }
			solar_system = {
				starbase = {
					set_owner = prevprev.from.owner
					set_starbase_size = starbase_citadel
					set_starbase_module = {
						slot = 1
						module = gun_battery
					}
					set_starbase_module = {
						slot = 2
						module = gun_battery
					}
					set_starbase_module = {
						slot = 3
						module = gun_battery
					}
					set_starbase_module = {
						slot = 4
						module = gun_battery
					}
					set_starbase_module = {
						slot = 5
						module = hangar_bay
					}
					set_starbase_module = {
						slot = 6
						module = hangar_bay
					}
					set_starbase_building = {
						slot = 1
						building = target_uplink_computer
					}
				}
			}
		}
		else = {
			solar_system = {
				starbase = { 
					fire_on_action = {
						on_action = on_starbase_destroyed
						scopes = { from = prevprev.from }
					}
					fleet = {
						delete_fleet = this
					}
				}
			}
		}
	}
}
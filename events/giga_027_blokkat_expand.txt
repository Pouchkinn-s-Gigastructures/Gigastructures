namespace = giga_blokkat_join

#What do we do?
country_event = {
	id = giga_blokkat_join.1000
	title = "giga_blokkat_join.1000.name"
	desc = "giga_blokkat_join.1000.desc"
	is_triggered_only = yes
	show_sound = event_radio_chatter
	picture = GFX_evt_alien_propaganda

	option = { #FIGHT
		name = "giga_blokkat_join.1000.a"
		custom_tooltip = "giga_blokkat_join.1000.a.tooltip"
		hidden_effect = { set_country_flag = giga_decided_to_fight_blokkats }
	}

	option = { #FLEE
		name = "giga_blokkat_join.1000.b"
		allow = {
			custom_tooltip = {
				text = "giga_blokkat_join.1000.b.tooltip"
				always = no
			}
		}
		hidden_effect = { set_country_flag = giga_decided_to_flee_blokkats }
	}

	option = { #JOIN
		name = "giga_blokkat_join.1000.c"
		custom_tooltip = "giga_blokkat_join.1000.c.tooltip"
		hidden_effect = {
			set_country_flag = giga_decided_to_join_blokkats
			country_event = { id = giga_blokkat_join.1001 }
		}
		allow = {
			custom_tooltip = {
				text = "giga_blokkat_join.1000.c.deathmode"
				hidden_trigger = {
					NOT = { has_global_flag = giga_blokkats_deathmode }
				}
			}
		}
		trigger = { #Only 1 player can do it.
			NOT = { any_country = { has_country_flag = giga_decided_to_join_blokkats } }
			NOR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
				is_gestalt = yes
				is_galactic_custodian = yes
				is_galactic_emperor = yes
				has_ascension_perk = ap_become_the_crisis
			}
		}
	}
}

country_event = {
	id = giga_blokkat_join.1001
	title = "giga_blokkat_join.1001.name"
	desc = "giga_blokkat_join.1001.desc"
	is_triggered_only = yes
	show_sound = event_radio_chatter
	picture = GFX_evt_analyzing_artifacts

	option = { #FIGHT
		name = "giga_blokkat_join.1001.a"
		custom_tooltip = "giga_blokkat_join.1001.a.tooltip"
		hidden_effect = {
			country_event = { id = giga_blokkat_join.5000 days = 20 } #Willingness
			country_event = { id = giga_blokkat_join.6000 days = 60 } #Other countries protest
		}
	}
}

#EVENT CHAIN
#Decrypt language
country_event = {
	id = giga_blokkat_join.2000
	title = "giga_blokkat_join.2000.name"
	desc = "giga_blokkat_join.2000.desc"
	is_triggered_only = yes
	show_sound = event_radio_chatter
	picture = GFX_evt_mysterious_signal
	immediate = {
		set_country_flag = blokkat_language_possible
	}
	option = { #kk
		name = "giga_blokkat_join.2000.a"
		custom_tooltip = cant_do_another_blokkat_project_tech_tooltip
		add_research_option = giga_tech_translate_blokkatese
		hidden_effect = {
			remove_country_flag = monitoring_blokkats
			set_country_flag = blokkat_project_underway
		}
	}

	option = { #nvm
		name = "giga_blokkat.3020.b"
		hidden_effect = {
			country_event = { id = giga_blokkat.3000 }
			remove_country_flag = blokkat_language_possible
		}
	}
}

#Results
country_event = {
	id = giga_blokkat_join.2001
	title = "giga_blokkat_join.2001.name"
	desc = "giga_blokkat_join.2001.desc"
	is_triggered_only = yes

	show_sound = event_radio_chatter
	picture = GFX_evt_mysterious_signal

	trigger = {	
		last_increased_tech = giga_tech_translate_blokkatese
	}

	immediate = {
		change_variable = {
			which = blokkat_knowledge_value
			value = 1
		}
		change_variable = {
			which = blokkat_knowledge_earned_by_general_study
			value = 1
		}
	}

	option = {
		name = "giga_blokkat_join.2001.a"
		hidden_effect = {
			country_event = { id = giga_blokkat_join.2002 }
		}
	}
}

#Part 2
country_event = {
	id = giga_blokkat_join.2002
	title = "giga_blokkat_join.2002.name"
	desc = "giga_blokkat_join.2002.desc"
	is_triggered_only = yes

	show_sound = event_celebration
	picture = GFX_evt_mysterious_signal
	
	immediate = {
		remove_country_flag = blokkat_project_underway
		set_country_flag = blokkat_joinblokkats_stage_1_researched
	}

	option = {
		name = "giga_blokkat_join.2002.a"
		custom_tooltip = "giga_blokkat_join.2002.a.tooltip"
		hidden_effect = {
			change_variable = { which = blokkat_willingness_science_value value = 10 }
			update_blokkat_willingness_value = yes
		}
	}
}

#Text em
country_event = {
	id = giga_blokkat_join.2010
	title = "giga_blokkat_join.2010.name"
	desc = "giga_blokkat_join.2010.desc"
	is_triggered_only = yes
	show_sound = event_mystic_reveal
	picture = GFX_evt_financial_instruments

	option = { #kk
		name = "giga_blokkat_join.2010.a"
		custom_tooltip = cant_do_another_blokkat_project_tech_tooltip
		enable_special_project = {
			name = SEND_BLOKKAT_MESSAGE
			owner = ROOT
		}
		hidden_effect = {
			remove_country_flag = monitoring_blokkats
			set_country_flag = blokkat_project_underway
		}
	}

	option = { #nvm
		name = "giga_blokkat.3020.b"
		hidden_effect = {
			country_event = { id = giga_blokkat.3000 }
		}
	}
}

#CONTACT
country_event = {
	id = giga_blokkat_join.2011
	title = "giga_blokkat_join.2011.name"
	desc = "giga_blokkat_join.2011.desc"
	is_triggered_only = yes
	show_sound = event_activating_unknown_technology
	picture = GFX_evt_mysterious_signal

	option = { #kk
		name = "giga_blokkat_join.2011.a"
		hidden_effect = {
			set_country_flag = monitoring_blokkats
			country_event = { id = giga_blokkat_join.2012 }
		}
	}
}

country_event = {
	id = giga_blokkat_join.2012
	title = "giga_blokkat_join.2012.name"
	desc = "giga_blokkat_join.2012.desc"
	is_triggered_only = yes

	location = event_target:current_blokkat_mothership_system
	
	diplomatic = yes
	
	picture_event_data = {
		portrait = event_target:blokkat_country.ruler
		room = blokkat3d_room
	}

	immediate = {
		event_target:blokkat_country = {
			if = {
				limit = { has_global_flag = giga_blokkats_very_easy }
				set_variable = { #10M
					which = blokkat_ascension_cost
					value = 10000000
				}
			}
			if = {
				limit = { has_global_flag = giga_blokkats_easy }
				set_variable = { #25M
					which = blokkat_ascension_cost
					value = 25000000
				}
			}
			if = {
				limit = { has_global_flag = giga_blokkats_normal }
				set_variable = { #50M
					which = blokkat_ascension_cost
					value = 50000000
				}
			}
			if = {
				limit = { has_global_flag = giga_blokkats_bismuth }
				set_variable = { #250M (ACOT moment)
					which = blokkat_ascension_cost
					value = 250000000
				}
			}
			if = {
				limit = { has_global_flag = giga_blokkats_endtech }
				set_variable = { #1B
					which = blokkat_ascension_cost
					value = 1000000000
				}
			}
		}
	}

	option = { #Ascension??
		name = "giga_blokkat_join.2012.a"
		response_text = "giga_blokkat_join.2012.a.response"
		is_dialog_only = yes
		trigger = { 
			OR = {
				is_synthetic_empire = no
				AND = {
					is_synthetic_empire = yes
					owner_species = { has_trait = trait_psionic }
				}
			}
		}
	}

	option = { #Ascension?? (synth)
		name = "giga_blokkat_join.2012.a.synth"
		response_text = "giga_blokkat_join.2012.a.synth.response"
		is_dialog_only = yes
		trigger = { 
			is_synthetic_empire = yes
			NOT = { owner_species = { has_trait = trait_psionic } }
		}
		hidden_effect = { set_country_flag = asked_blokkats_about_synth }
	}

	option = { #Was synth death?
		name = "giga_blokkat_join.2012.a.synthdeath"
		response_text = "giga_blokkat_join.2012.a.synthdeath.response"
		is_dialog_only = yes
		trigger = { has_country_flag = asked_blokkats_about_synth }
	}

	option = { #Success rate??
		name = "giga_blokkat_join.2012.b"
		response_text = "giga_blokkat_join.2012.b.response"
		is_dialog_only = yes
	}

	option = { #What are you making with that energy?
		name = "giga_blokkat_join.2012.c"
		response_text = "giga_blokkat_join.2012.c.response"
		is_dialog_only = yes
	}

	option = { #What are the protocols?
		name = "giga_blokkat_join.2012.f"
		response_text = "giga_blokkat_join.2012.f.response"
		is_dialog_only = yes
	}

	option = { #We accept
		name = "giga_blokkat_join.2012.d"
		custom_tooltip = "giga_blokkat_join.2012.d.tooltip"
		response_text = "giga_blokkat_join.2012.d.response"
		hidden_effect = {
			country_event = { id = giga_blokkat_join.2013 }
		}
	}

	option = { #No!
		name = "giga_blokkat_join.2012.e"
		custom_tooltip = "giga_blokkat_join.2012.e.tooltip"
		response_text = "giga_blokkat_join.2012.e.response"
		hidden_effect = {
			remove_country_flag = giga_decided_to_join_blokkats
			remove_country_flag = monitoring_blokkats
			set_country_flag = giga_decided_to_fight_blokkats
			remove_country_flag = blokkat_project_underway
			remove_country_flag = blokkat_willingness_active
			clear_willingness_modifiers = yes
			remove_country_flag = blokkat_willingness_strikes_active
			every_owned_leader = { clear_strike_leader_traits = yes }
		}
	}
}

country_event = {
	id = giga_blokkat_join.2013
	title = "giga_blokkat_join.2013.name"
	desc = "giga_blokkat_join.2013.desc"
	is_triggered_only = yes
	show_sound = event_mystic_reveal
	picture = GFX_evt_shroudwalker_enclave

	immediate = {
		remove_country_flag = blokkat_project_underway
		set_country_flag = blokkat_joinblokkats_stage_2_researched
	}

	option = { #We accept
		name = "giga_blokkat_join.2013.a"
		custom_tooltip = "giga_blokkat_join.2013.a.tooltip"
		hidden_effect = {
			set_country_flag = giga_blokk_protokols_initiated
			country_event = { id = giga_blokkat_join.6001 days = 60 } #Other countries protest
			remove_country_flag = monitoring_blokkats
			change_variable = { which = blokkat_willingness_science_value value = 5 }
			change_variable = { which = blokkat_willingness_military_value value = 5 }
			change_variable = { which = blokkat_willingness_government_value value = 10 }
			change_variable = { which = blokkat_willingness_population_value value = 10 }
			update_blokkat_willingness_value = yes
		}
	}
}

#The math
country_event = {
	id = giga_blokkat_join.2020
	title = "giga_blokkat_join.2020.name"
	desc = "giga_blokkat_join.2020.desc"
	is_triggered_only = yes
	show_sound = event_mystic_reveal
	picture = GFX_evt_unity_symbol
	immediate = {
		set_country_flag = blokkat_math_projects_possible
	}
	option = { #kk
		name = "giga_blokkat_join.2020.a"
		custom_tooltip = "giga_blokkat_join.2020.a.tooltip"
		add_research_option = giga_tech_blokkat_energy_transfer
		add_research_option = giga_tech_blokkat_intergalactic_logistics
		add_research_option = giga_tech_blokkat_subplanck_engineering
		set_country_flag = giga_blokkat_can_build_hyperdimensional_lab
		hidden_effect = {
			remove_country_flag = monitoring_blokkats
			set_country_flag = blokkat_project_underway
		}
	}

	option = { #nvm
		name = "giga_blokkat.3020.b"
		hidden_effect = {
			country_event = { id = giga_blokkat.3000 }
			remove_country_flag = blokkat_math_projects_possible
		}
	}
}

#Protokols
country_event = {
	id = giga_blokkat_join.2021
	is_triggered_only = yes

	hide_window = yes

	trigger = {
		OR = {
			last_increased_tech = giga_tech_blokkat_energy_transfer
			last_increased_tech = giga_tech_blokkat_intergalactic_logistics
			last_increased_tech = giga_tech_blokkat_subplanck_engineering
		}
	}

	immediate = {
		change_variable = {
			which = blokkat_knowledge_value
			value = 2
		}
		change_variable = {
			which = blokkat_knowledge_earned_by_general_study
			value = 2
		}
		country_event = { id = giga_blokkat_join.20211 days = 1 }
	}
}

#Delay if all 3 are gotten at once
country_event = {
	id = giga_blokkat_join.20211
	is_triggered_only = yes

	hide_window = yes

	immediate = {
		if = {
			limit = {
				has_technology = giga_tech_blokkat_energy_transfer
				has_technology = giga_tech_blokkat_intergalactic_logistics
				has_technology = giga_tech_blokkat_subplanck_engineering
				NOT = { has_country_flag = giga_blokkilian_equations_solved }
			}
			set_country_flag = giga_blokkilian_equations_solved
			country_event = { id = giga_blokkat_join.2022 }
		}
	}
}

#CONGRATIONS
country_event = {
	id = giga_blokkat_join.2022
	title = "giga_blokkat_join.2022.name"
	desc = "giga_blokkat_join.2022.desc"
	is_triggered_only = yes

	show_sound = event_celebration
	picture = GFX_evt_physics_research

	option = { #ok!
		name = "giga_blokkat_join.2022.a"
		custom_tooltip = "giga_blokkat_join.2022.a.tooltip"
		hidden_effect = {
			country_event = { id = giga_blokkat_join.6002 days = 60 } #Other countries protest
			country_event = { id = giga_blokkat_join.2023 }
			change_variable = { which = blokkat_willingness_science_value value = 10 }
			change_variable = { which = blokkat_willingness_government_value value = 10 }
			change_variable = { which = blokkat_willingness_population_value value = 10 }
			change_variable = { which = blokkat_willingness_military_value value = 5 }
			update_blokkat_willingness_value = yes
		}
	}
}

#CONGRATIONS
country_event = {
	id = giga_blokkat_join.2023
	title = "giga_blokkat_join.2023.name"
	desc = "giga_blokkat_join.2023.desc"
	is_triggered_only = yes

	location = event_target:current_blokkat_mothership_system
	
	diplomatic = yes
	
	picture_event_data = {
		portrait = event_target:blokkat_country.ruler
		room = blokkat3d_room
	}

	option = { #ok!
		name = "giga_blokkat_join.2023.a"
		custom_tooltip = "giga_blokkat_join.2023.a.tooltip"
		hidden_effect = {
			remove_country_flag = blokkat_project_underway
			set_country_flag = blokkat_joinblokkats_stage_3_researched
		}
	}
}

#The nodes
country_event = {
	id = giga_blokkat_join.2030
	title = "giga_blokkat_join.2030.name"
	desc = "giga_blokkat_join.2030.desc"
	is_triggered_only = yes
	show_sound = event_mystic_reveal
	picture = GFX_evt_baol_datacrystals
	immediate = {
		set_country_flag = blokkat_nodes_possible
	}
	option = { #kk
		name = "giga_blokkat_join.2030.a"
		custom_tooltip = "giga_blokkat_join.2030.a.tooltip"
		add_research_option = giga_tech_blokkat_blokkwork_power_node
		hidden_effect = {
			remove_country_flag = monitoring_blokkats
			set_country_flag = blokkat_project_underway
		}
	}

	option = { #nvm
		name = "giga_blokkat.3020.b"
		hidden_effect = {
			country_event = { id = giga_blokkat.3000 }
			remove_country_flag = blokkat_nodes_possible
		}
	}
}

#nodes built
planet_event = {
	id = giga_blokkat_join.2031
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = { exists = ROOT.owner }
			ROOT.owner = {
				change_variable = {
					which = blokkat_willingness_population_value
					value = 1
				}
				update_blokkat_willingness_value = yes
			}
		}
		if = {
			limit = {
				exists = ROOT.owner
				ROOT.owner = {
					has_country_flag = giga_decided_to_join_blokkats
					NOT = { has_country_flag = blokkat_joinblokkats_stage_4_researched }
					NOT = { any_owned_planet = { NOT = { has_building = building_giga_blokkat_blokkwork_node } } }
				}
			}
			owner = { 
				set_country_flag = blokkat_joinblokkats_stage_4_researched
				country_event = { id = giga_blokkat_join.2032 } 
			}
		}
	}
}

country_event = {
	id = giga_blokkat_join.2032
	title = "giga_blokkat_join.2032.name"
	desc = "giga_blokkat_join.2032.desc"
	is_triggered_only = yes

	
	show_sound = event_dyson_sphere_build_complete
	picture = GFX_evt_laser_grid

	option = { #ok!
		name = "giga_blokkat_join.2032.a"
		# add_modifier = {
		# 	modifier = giga_blokkat_miniblokkwork
		# 	days = -1
		# }
		hidden_effect = {
			country_event = { id = giga_blokkat_join.2033 }
		}
	}
}

#CONGRATIONS
country_event = {
	id = giga_blokkat_join.2033
	title = "giga_blokkat_join.2033.name"
	desc = "giga_blokkat_join.2033.desc"
	is_triggered_only = yes

	location = event_target:current_blokkat_mothership_system
	
	diplomatic = yes
	
	picture_event_data = {
		portrait = event_target:blokkat_country.ruler
		room = blokkat3d_room
	}

	option = { #ok!
		name = "giga_blokkat_join.2033.a"
		custom_tooltip = "giga_blokkat_join.2033.a.tooltip"
		hidden_effect = {
			country_event = { id = giga_blokkat_join.6003 days = 60 } #Other countries FIGHT
			remove_country_flag = blokkat_project_underway
			change_variable = { which = blokkat_willingness_science_value value = 5 }
			change_variable = { which = blokkat_willingness_government_value value = 15 }
			change_variable = { which = blokkat_willingness_population_value value = 10 }
			change_variable = { which = blokkat_willingness_military_value value = 5 }
			update_blokkat_willingness_value = yes
		}
	}
}

#GIGARELAY
country_event = {
	id = giga_blokkat_join.2040
	title = "giga_blokkat_join.2040.name"
	desc = "giga_blokkat_join.2040.desc"
	is_triggered_only = yes
	show_sound = event_mystic_reveal
	picture = GFX_evt_supernova
	immediate = {
		set_country_flag = blokkat_gigarelay_possible
	}
	option = { #kk
		name = "giga_blokkat_join.2040.a"
		custom_tooltip = "giga_blokkat_join.2040.a.tooltip"
		add_research_option = giga_tech_blokkat_gigarelay_frame
		add_research_option = giga_tech_blokkat_gigarelay_core
		hidden_effect = {
			remove_country_flag = monitoring_blokkats
			set_country_flag = blokkat_project_underway
			set_country_flag = blokkat_building_gigarelay
		}
	}

	option = { #nvm
		name = "giga_blokkat.3020.b"
		hidden_effect = {
			country_event = { id = giga_blokkat.3000 }
			remove_country_flag = blokkat_gigarelay_possible
		}
	}
}

#SITE BUILT
country_event = {
	id = giga_blokkat_join.2041
	title = "giga_blokkat_join.2041.name"
	desc = "giga_blokkat_join.2041.desc"
	is_triggered_only = yes

	
	show_sound = event_dyson_sphere_build_start
	picture = GFX_evt_supernova

	option = { #ok!
		name = "giga_blokkat_join.2041.a"
		custom_tooltip = "giga_blokkat_join.2041.a.tooltip"
		hidden_effect = {
			change_variable = { which = blokkat_willingness_science_value value = 5 }
			change_variable = { which = blokkat_willingness_government_value value = 5 }
			update_blokkat_willingness_value = yes
		}
	}
}

#FRAME BUILT
country_event = {
	id = giga_blokkat_join.2042
	title = "giga_blokkat_join.2042.name"
	desc = "giga_blokkat_join.2042.desc"
	is_triggered_only = yes

	
	show_sound = event_dyson_sphere_build_upgrade_panel
	picture = GFX_evt_supernova

	option = { #ok!
		name = "giga_blokkat_join.2042.a"
		custom_tooltip = "giga_blokkat_join.2042.a.tooltip"
		hidden_effect = {
			change_variable = { which = blokkat_willingness_science_value value = 5 }
			change_variable = { which = blokkat_willingness_population_value value = 5 }
			update_blokkat_willingness_value = yes
		}
	}
}

#DONE
country_event = {
	id = giga_blokkat_join.2043
	title = "giga_blokkat_join.2043.name"
	desc = "giga_blokkat_join.2043.desc"
	is_triggered_only = yes


	show_sound = event_dyson_sphere_build_complete
	picture = GFX_evt_supernova

	option = { #ok!
		name = "giga_blokkat_join.2043.a"
		custom_tooltip = "giga_blokkat_join.2043.a.tooltip"
		hidden_effect = {
			change_variable = { which = blokkat_willingness_science_value value = 10 }
			change_variable = { which = blokkat_willingness_government_value value = 5 }
			change_variable = { which = blokkat_willingness_population_value value = 5 }
			update_blokkat_willingness_value = yes
			country_event = { id = giga_blokkat_join.2044 }
		}
	}
}

#CONGRATIONS
country_event = {
	id = giga_blokkat_join.2044
	title = "giga_blokkat_join.2044.name"
	desc = "giga_blokkat_join.2044.desc"
	is_triggered_only = yes

	location = event_target:current_blokkat_mothership_system
	
	diplomatic = yes
	
	picture_event_data = {
		portrait = event_target:blokkat_country.ruler
		room = blokkat3d_room
	}

	option = { #ok!
		name = "giga_blokkat_join.2044.a"
		custom_tooltip = "giga_blokkat_join.2044.a.tooltip"
		hidden_effect = {
			remove_country_flag = blokkat_project_underway
			set_country_flag = blokkat_joinblokkats_stage_5_researched
			set_variable = {
				which = blokkat_ascension_cost
				value = event_target:blokkat_country.blokkat_ascension_cost
			}
		}
	}
}

#A S C E N D
country_event = {
	id = giga_blokkat_join.2999
	is_triggered_only = yes
	title = "giga_blokkat_join.2999.name"
	desc = "giga_blokkat_join.2999.desc"
	
	picture = GFX_evt_supernova
	show_sound = event_screams

	option = { #ok!
		name = "giga_blokkat_join.2999.a"
		custom_tooltip = "giga_blokkat_join.2999.a.tooltip"
		hidden_effect = { country_event = { id = giga_blokkat_join.3000 } }
	}
}

country_event = {
	id = giga_blokkat_join.3000
	title = "giga_blokkat_join.3000.name"
	desc = "giga_blokkat_join.3000.desc"
	is_triggered_only = yes
	picture = GFX_evt_vortex
	show_sound = event_mystic_reveal_light

	option = { #ok!
		name = "giga_blokkat_join.3000.a"
		custom_tooltip = "giga_blokkat_join.3000.a.tooltip"
		add_modifier = {
			modifier = blokkat_true_blokkwork
			days = -1
		}
		hidden_effect = { country_event = { id = giga_blokkat_join.30001 } }
	}

	immediate = {
		change_country_flag = {
			icon={
				category="Blokkat"
				file="Blokkat_flag.dds"
			}
			background={
				category="backgrounds"
				file="triangle_split.dds"
			}
			colors={
				"dark_green"
				"teal"
				"null"
				"null"
			}
		}
		end_event_chain = blokkat_chain
		set_variable = { which = blokkat_yottajoules_count value = 0 }
		set_variable = { which = blokkat_yottajoules_buff_count value = 0 }
		set_variable = { which = blokkat_yottajoules_buff_count_modifier value = 1 }
		set_variable = { which = blokkat_inquietude_value value = 0 }
		set_country_type = blokkat_stripminers
		set_name = "CE-1461 Dismantlement Zone"
		update_blokkat_inquietude_display = yes
		remove_country_flag = blokkat_willingness_active
		clear_willingness_modifiers = yes
		remove_country_flag = blokkat_bureau_unlocked
		remove_country_flag = blokkat_inquietude_taught
		set_country_flag = giga_ascended_blokkat_country
		save_global_event_target_as = giga_ascended_blokkat_country
		set_global_flag = blokkat_crisis_defeated
		change_species = event_target:diverse_blokkat_species
		remove_country_flag = blokkat_willingness_strikes_active
		every_owned_leader = {
			change_species = event_target:diverse_blokkat_species
			clear_strike_leader_traits = yes
			if = { limit = { leader_class = admiral } add_trait = admiral_trait_blokkat }
		}
		ruler = {
			change_species = event_target:diverse_blokkat_species
			change_leader_portrait = event_target:diverse_blokkat_species
		}
		change_dominant_species = { species = event_target:diverse_blokkat_species }
		set_variable = {
			which = blokkat_player_dismantler_count
			value = event_target:blokkat_country.blokkat_dismantler_max_count
		}
		every_system_within_border = {
			limit = {
				any_system_planet = {
					exists = owner
					is_colony = yes
					owner = { is_same_value = ROOT }
				}
				NOT = { any_system_megastructure = { is_megastructure_type = blokkat_gigarelay_2 } } 
			}
			every_system_planet = {
				limit = { is_star = no }
				if = { limit = { is_colony = yes } destroy_colony = yes }
				giga_remove_planet = yes
			}
			create_ambient_object = {
				type = blokkat_star_collapse
				location = ROOT
				entity_offset_height = -5
				effect = { set_ambient_object_flag = blokkat_star_collapse }
			}
			blokkat_harvest_system_player = yes
			set_name = "Empty Void"
		}
		every_owned_fleet = {
			limit = { is_ship_class = shipclass_starbase }
			destroy_fleet = this
		}
		random_system_within_border = {
			limit = { any_system_megastructure = { is_megastructure_type = blokkat_gigarelay_2 } }
			add_modifier = { modifier = blokkat_mothership_shield days = -1 }
			create_starbase = {
				size = starbase_outpost
				owner = event_target:giga_ascended_blokkat_country
			}
			every_system_megastructure = {
				limit = { mega_blokkats_wont_stripmine = no }
				remove_megastructure = THIS
			}
			every_system_megastructure = {
				limit = { is_megastructure_type = blokkat_gigarelay_2 }
				upgrade_megastructure_to = blokkat_gigarelay_3
			}
			save_global_event_target_as = blokkat_gigarelay_system
			set_star_flag = blokkat_gigarelay_system
			set_star_class = sc_blokkat_stripmined
			random_system_planet = {
				limit = { is_star = yes }
				change_pc = pc_giga_empty_space
				set_planet_flag = blokkat_gigarelay_system_star
				save_global_event_target_as = blokkat_gigarelay_system_star
			}
			every_system_planet = {
				limit = { is_star = no }
				if = { limit = { is_colony = yes } destroy_colony = yes }
				giga_remove_planet = yes
			}
			every_system_ambient_object = { destroy_ambient_object = THIS }
			set_asteroid_belt = { radius = 0 }
			every_system_planet = { clear_deposits = yes }
			set_name = "Blokkwork Pylon"
			spawn_system = {
				min_distance >= 10
				max_distance <= 10
				min_orientation_angle = 90
				max_orientation_angle = 90
				hyperlane = yes
				initializer = giga_blokkat_player_shipyard_initializer
			}
		}
		while = {
			limit = { check_variable = { which = blokkat_player_dismantler_count value > 0 } } 
			spawn_blokkat_harvesting_fleet_player = yes
			subtract_variable = { which = blokkat_player_dismantler_count value = 1 }
		}
		event_target:blokkat_country = {
			set_country_type = blokkat_stripminers_blokkwork
			set_name = "The Blokkwork"
			every_owned_fleet = {
				limit = {
					NOR = { 
						has_fleet_flag = blokkat_mothership_fleet
						has_fleet_flag = blokkat_stripmine_fleet
						has_fleet_flag = blokkat_scout_fleet
					} 
				}
				set_owner = ROOT
				set_controller = ROOT
				set_location = {
					target = event_target:blokkat_gigarelay_system_star
					distance = 200
					angle = random
				}
				clear_fleet_actions = this
				clear_orders = yes
			}
			every_owned_fleet = { delete_fleet = THIS }
			every_owned_leader = { set_owner = ROOT }
		}
		every_owned_planet = {
			every_owned_pop = { kill_pop = yes }
			destroy_colony = yes
		}
		every_owned_ship = {
			limit = {
				OR = {
					ehof_is_science_ship = yes
					ehof_is_construction_ship = yes
					is_ship_size = colony_vessel #Eager explorers colony ship
					is_ship_size = colonizer
					is_ship_size = transport
					is_ship_size = colossus
				}
			}
			fleet = {
				if = {
					limit = { exists = leader }
					leader = { unassign_leader = this }
				}
			}
			delete_ship = this
		}
	}
}

country_event = {
	id = giga_blokkat_join.30001
	title = "giga_blokkat_join.30001.name"
	desc = "giga_blokkat_join.30001.desc"

	is_triggered_only = yes
	diplomatic = yes
	
	picture_event_data = {
		portrait = event_target:blokkat_country.ruler
		room = blokkat3d_room
	}

	option = { #Blokkwork??
		name = "giga_blokkat_join.30001.a"
		response_text = "giga_blokkat_join.30001.a.response"
		is_dialog_only = yes
	}

	option = { #Federation??
		name = "giga_blokkat_join.30001.b"
		response_text = "giga_blokkat_join.30001.b.response"
		is_dialog_only = yes
	}

	option = { #Paluushia??
		name = "giga_blokkat_join.30001.c"
		response_text = "giga_blokkat_join.30001.c.response"
		is_dialog_only = yes
	}

	option = { #ok!
		name = "giga_blokkat_join.30001.bye"
		default_hide_option = yes
		hidden_effect = { country_event = { id = giga_blokkat_join.30002 } }
	}
}

#Duty
country_event = {
	id = giga_blokkat_join.30002
	title = "giga_blokkat_join.30002.name"
	desc = "giga_blokkat_join.30002.desc"
	is_triggered_only = yes
	picture = GFX_evt_vortex
	show_sound = event_activating_unknown_technology

	option = { #ok!
		name = "giga_blokkat_join.30002.a"
		begin_event_chain = {
			event_chain = "blokkat_harvest_chain"
			target = ROOT
		}
		hidden_effect = { blokkat_calculate_harvested_galaxy_perc = yes }
	}
}

#Harvest system
planet_event = {
	id = giga_blokkat_join.3001
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		create_ambient_object = {
			type = blokkat_star_collapse
			location = ROOT
			entity_offset_height = -5
			effect = {
				set_ambient_object_flag = blokkat_star_collapse
			}
		}
		blokkat_calculate_harvested_galaxy_perc = yes
		solar_system = { blokkat_harvest_system_player = yes }
		from = {
			set_event_locked = yes
			fleet_event = { id = giga_blokkat_join.3002 days = 30 }
			owner = { change_variable = { which = blokkat_yottajoules_count value = 100 }	}
		}
	}
}

fleet_event = {
	id = giga_blokkat_join.3002
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		set_event_locked = no
		clear_fleet_actions = this
		queue_actions = {
			find_closest_system = {
				trigger = {
					id = "giga_blokkat_join.1"
					systems_blokkats_wont_stripmine = no
					NOT = { has_star_flag = blokkat_system_being_stripmined }
					any_system_planet = { can_destroy_planet_with_PLANET_KILLER_BLOKKAT_HARVESTER = yes }
				}
				found_system = {
					move_to = this
					effect = {
						id = "giga_blokkat_join.2"
						THIS = { set_star_flag = blokkat_system_being_stripmined }
					}
					find_closest_planet = {
						trigger = {
							id = "giga_blokkat_join.3"
							can_destroy_planet_with_PLANET_KILLER_BLOKKAT_HARVESTER = yes
						}
						found_planet = {
							# effect = { id = "giga_blokkat_join.4" }
							move_to = this
							destroy_planet = { target = this }
						}
					}
				}
			}
		}
	}
}

#Talk to Blokkwork
country_event = {
	id = giga_blokkat_join.3100
	title = "giga_blokkat_join.3100.name"
	desc = {
		text = "giga_blokkat_join.3100.desc.a"
		trigger = { NOT = { has_country_flag = first_blokkwork_talk } }
	}
	desc = {
		text = "giga_blokkat_join.3100.desc.b"
		trigger = { has_country_flag = first_blokkwork_talk }
	}
	desc = {
		text = "giga_blokkat_join.3100.desc.c"
		trigger = { has_country_flag = first_blokkwork_talk }
	}
	desc = {
		text = "giga_blokkat_join.3100.desc.d"
		trigger = { has_country_flag = first_blokkwork_talk }
	}

	is_triggered_only = yes
	diplomatic = yes

	trigger = {
		From = { is_country_type = blokkat_stripminers_blokkwork }
		NOR = {
			has_country_flag = blokkat_diplomacy_engaged
			has_country_flag = blokkat_player_harvested_entire_galaxy
		}
	}

	picture_event_data = {
		portrait = event_target:blokkat_country.ruler
		room = blokkat3d_room
	}

	immediate = { set_country_flag = blokkat_diplomacy_engaged }

	after = {
		if = { limit = { NOT = { has_country_flag = first_blokkwork_talk } } set_country_flag = first_blokkwork_talk }
	}

	option = { #Yottajoules??
		name = "giga_blokkat_join.30001.f"
		allow = { always = no }
	}

	option = { #FINAL HARVEST??
		name = "giga_blokkat_join.30001.harvest"
		custom_tooltip = "giga_blokkat_join.30001.harvest.tooltip"
		hidden_effect = {
			hidden_effect = { country_event = { id = giga_blokkat_join.3201 } }
		}
		trigger = {
			has_global_flag = blokkat_player_harvested_most_of_galaxy
		}
	}

	option = { #Power up??
		name = "giga_blokkat_join.30001.g"
		if = {
			limit = { has_modifier = blokkat_yottajoules_buff }
			remove_modifier = blokkat_yottajoules_buff
		}
		add_modifier = {
			modifier = blokkat_yottajoules_buff
			days = -1
			multiplier = ROOT.blokkat_yottajoules_buff_count_modifier
		}
		hidden_effect = {
			change_variable = { which = blokkat_yottajoules_buff_count value = 1 }
			change_variable = { which = blokkat_yottajoules_buff_count_modifier value = 1 }
			subtract_variable = { which = blokkat_yottajoules_count value = 1000 } 
			remove_country_flag = blokkat_diplomacy_engaged
			country_event = { id = giga_blokkat_join.3100 }
		}
		allow = {
			custom_tooltip = {
				fail_text = "blokkat_needs_more_yottajoules"
				hidden_trigger = { check_variable = { which = blokkat_yottajoules_count value >= 1000 }  }
			}
			custom_tooltip = {
				fail_text = "blokkat_endtekk_is_max"
				hidden_trigger = { NOT = { has_global_flag = giga_blokkats_endtech } }
			}
		}
	}

	option = { #Blokkwork??
		name = "giga_blokkat_join.30001.a"
		response_text = "giga_blokkat_join.30001.a.response"
		is_dialog_only = yes
	}

	option = { #Federation??
		name = "giga_blokkat_join.30001.b"
		response_text = "giga_blokkat_join.30001.b.response"
		is_dialog_only = yes
	}

	option = { #Paluushia??
		name = "giga_blokkat_join.30001.c"
		response_text = "giga_blokkat_join.30001.c.response"
		is_dialog_only = yes
	}

	option = { #Rebel??
		name = "giga_blokkat_join.30001.d"
		response_text = "giga_blokkat_join.30001.d.response"
		is_dialog_only = yes
	}

	option = { #What are you making with that energy?
		name = "giga_blokkat_join.2012.c"
		response_text = "giga_blokkat_join.2012.c.response"
		is_dialog_only = yes
	}

	option = { #Blokkonstrukt??
		name = "giga_blokkat_join.30001.e"
		response_text = "giga_blokkat_join.30001.e.response"
		is_dialog_only = yes
	}
	
	option = { #Bye
		name = "giga_blokkat_join.30001.bye"
		default_hide_option = yes
		hidden_effect = {
			remove_country_flag = blokkat_diplomacy_engaged
		}
	}
}

#90% harvested
country_event = {
	id = giga_blokkat_join.3200
	title = "giga_blokkat_join.3200.name"
	desc = "giga_blokkat_join.3200.desc"

	is_triggered_only = yes
	diplomatic = yes
	
	picture_event_data = {
		portrait = event_target:blokkat_country.ruler
		room = blokkat3d_room
	}

	option = { #ok!
		name = "giga_blokkat_join.3200.a"
		default_hide_option = yes
	}
}

#THE END
country_event = {
	id = giga_blokkat_join.3201
	title = "giga_blokkat_join.3201.name"
	desc = "giga_blokkat_join.3201.desc"
	is_triggered_only = yes
	picture = GFX_evt_vortex
	show_sound = event_mystic_reveal_light

	immediate = {
		set_global_flag = blokkat_player_harvested_entire_galaxy
	}

	option = { #ok!
		name = "giga_blokkat_join.3201.a"
		custom_tooltip = "giga_blokkat_join.3201.a.tooltip"
		end_event_chain = blokkat_harvest_chain
		win = yes
		hidden_effect = {
			every_galaxy_planet = {
				limit = { is_star = no NOT = { has_planet_flag = paluushia } }
				clear_deposits = yes
				giga_remove_planet = yes
			}
			every_system = {
				limit = {
					any_system_megastructure = {
						NOR = {
							is_megastructure_type = blokkat_gigarelay_3
							is_megastructure_type = blokkat_shipyard_0
							is_megastructure_type = blokkat_shipyard_build_evictors
							is_megastructure_type = blokkat_shipyard_build_custodians
							is_megastructure_type = blokkat_shipyard_build_dismantler
							is_megastructure_type = blokkat_shipyard_build_terminator
						}
					}
				}
				if = {
					limit = { NOT = { is_star_class = sc_empty_space } }
					set_star_class = sc_empty_space
				}
				set_name = "Empty Void"
				set_asteroid_belt = { radius = 0 }
			}
			every_system = { every_neighbor_system = { remove_hyperlane_safe = { from = prev to = this } } }
			every_country = {
				limit = {
					NOR = {
						is_country = event_target:paluush_portrait
						is_country = event_target:blokkat_country
						is_country = event_target:giga_ascended_blokkat_country
					}
				}
				destroy_country = yes
			}
			every_country = {
				every_owned_fleet = {
					if = {
						limit = { exists = leader }
						leader = { unassign_leader = this }
					}
					destroy_fleet = THIS
				}
			}
			every_megastructure = {
				limit = { 
					NOR = { 
						mega_blokkats_wont_stripmine = yes
						is_megastructure_type = blokkat_gigarelay_3
						is_megastructure_type = blokkat_shipyard_0
						is_megastructure_type = blokkat_shipyard_build_evictors
						is_megastructure_type = blokkat_shipyard_build_custodians
						is_megastructure_type = blokkat_shipyard_build_dismantler
						is_megastructure_type = blokkat_shipyard_build_terminator
					}
				}
				remove_megastructure = THIS
			}
			event_target:paluushia = {
				if = {
					limit = { is_colony = yes }
					destroy_colony = yes
				}
				change_pc = pc_continental
				generate_paluush_primitives_on_planet = yes
			}
		}
	}
}

#WILLINGNESS STUFF
country_event = {
	id = giga_blokkat_join.5000
	title = "giga_blokkat_join.5000.name"
	desc = "giga_blokkat_join.5000.desc"
	is_triggered_only = yes
	show_sound = event_public_unrest
	picture = GFX_evt_burning_settlement

	option = { #uh oh
		name = "giga_blokkat_join.5000.a"
		custom_tooltip = "giga_blokkat_join.5000.a.tooltip"
		hidden_effect = {
			set_country_flag = blokkat_willingness_active
			country_event = { id = giga_blokkat_join.5610 days = 30 } #EDICTS
			set_variable = {
				which = blokkat_willingness_global_value
				value = 0
			}
			set_variable = {
				which = blokkat_willingness_military_value
				value = 0
			}
			set_variable = {
				which = blokkat_willingness_science_value
				value = 0
			}
			set_variable = {
				which = blokkat_willingness_government_value
				value = 0
			}
			set_variable = {
				which = blokkat_willingness_population_value
				value = 0
			}
			if = {
				limit = { has_global_flag = giga_blokkats_very_easy }
				change_variable = { which = blokkat_willingness_military_value value = 40 }
				change_variable = { which = blokkat_willingness_science_value value = 40 }
				change_variable = { which = blokkat_willingness_government_value value = 40 }
				change_variable = { which = blokkat_willingness_population_value value = 40 }
			}
			else_if = {
				limit = { has_global_flag = giga_blokkats_easy }
				change_variable = { which = blokkat_willingness_military_value value = 20 }
				change_variable = { which = blokkat_willingness_science_value value = 20 }
				change_variable = { which = blokkat_willingness_government_value value = 20 }
				change_variable = { which = blokkat_willingness_population_value value = 20 }
			}
			else_if = {
				limit = { has_global_flag = giga_blokkats_bismuth }
				subtract_variable = { which = blokkat_willingness_military_value value = 50 }
				subtract_variable = { which = blokkat_willingness_science_value value = 50 }
				subtract_variable = { which = blokkat_willingness_government_value value = 50 }
				subtract_variable = { which = blokkat_willingness_population_value value = 50 }
			}
			else_if = {
				limit = { has_global_flag = giga_blokkats_endtech }
				subtract_variable = { which = blokkat_willingness_military_value value = 100 }
				subtract_variable = { which = blokkat_willingness_science_value value = 100 }
				subtract_variable = { which = blokkat_willingness_government_value value = 100 }
				subtract_variable = { which = blokkat_willingness_population_value value = 100 }
			}
			update_blokkat_willingness_value = yes
			country_event = { id = giga_blokkat_join.5001 }
		}
	}
}

#LEADERS STRIKE
country_event = {
	id = giga_blokkat_join.5001
	title = "giga_blokkat_join.5001.name"
	desc = "giga_blokkat_join.5001.desc"
	is_triggered_only = yes
	show_sound = event_planetary_riot
	picture = GFX_evt_assembly_fight

	immediate = {
		if = {
			limit = { has_ethic = ethic_fanatic_egalitarian }
			set_variable = {
				which = blokkat_willingness_leader_strike_percent
				value = 80
			}
		}
		if = {
			limit = { has_ethic = ethic_egalitarian }
			set_variable = {
				which = blokkat_willingness_leader_strike_percent
				value = 70
			}
		}
		if = {
			limit = { has_ethic = ethic_authoritarian }
			set_variable = {
				which = blokkat_willingness_leader_strike_percent
				value = 60
			}
		}
		if = {
			limit = { has_ethic = ethic_fanatic_authoritarian }
			set_variable = {
				which = blokkat_willingness_leader_strike_percent
				value = 50
			}
		}
		else = {
			set_variable = {
				which = blokkat_willingness_leader_strike_percent
				value = 65
			}
		}
	}

	option = { #uh oh
		name = "giga_blokkat_join.5001.a"
		custom_tooltip = "giga_blokkat_join.5001.a.tooltip"
		hidden_effect = {
			set_country_flag = blokkat_willingness_strikes_active
			every_owned_leader = {
				limit = {
					OR = {
						leader_class = scientist
						leader_class = governor
						leader_class = admiral
						leader_class = general
					}
				}
				random_list = {
					65 = {
						if = {
							limit = { leader_class = scientist }
							add_trait = trait_blokkat_on_strike_scientist
						}
						if = {
							limit = { leader_class = governor }
							add_trait = trait_blokkat_on_strike_governor
						}
						if = {
							limit = { leader_class = admiral }
							add_trait = trait_blokkat_on_strike_admiral
						}
						if = {
							limit = { leader_class = general }
							add_trait = trait_blokkat_on_strike_general
						}
						modifier = { add = -5 ROOT = { has_ethic = ethic_authoritarian } }
						modifier = { add = -15 ROOT = { has_ethic = ethic_fanatic_authoritarian } }
						modifier = { add = 5 ROOT = { has_ethic = ethic_egalitarian } }
						modifier = { add = 15 ROOT = { has_ethic = ethic_fanatic_egalitarian } }
					}
					35 = {
						modifier = { add = 5 ROOT = { has_ethic = ethic_authoritarian } }
						modifier = { add = 15 ROOT = { has_ethic = ethic_fanatic_authoritarian } }
						modifier = { add = -5 ROOT = { has_ethic = ethic_egalitarian } }
						modifier = { add = -15 ROOT = { has_ethic = ethic_fanatic_egalitarian } }
					}
				}
			}
		}
	}
}

#VIEW WILLINGNESS

country_event = {
	id = giga_blokkat_join.5500
	title = "giga_blokkat_join.5500.name"
	desc = "giga_blokkat_join.5500.desc"
	is_triggered_only = yes
	diplomatic = yes
	custom_gui = "giga_blokkat_willingness_gui"

	trigger = {
		NOT = { has_country_flag = monitoring_blokkat_willingness }
	}

	immediate = {
		set_country_flag = monitoring_blokkat_willingness
	}

	option = { #willingness count
		name = "giga_blokkat_join.5500.willingness_global_count"
		custom_gui = "blokkat_willingness_global_count_event_option_entry"
		allow = { always = no }
	}

	option = { #willingness count
		name = "giga_blokkat_join.5500.willingness_population_count"
		custom_tooltip = "giga_blokkat_join.5500.willingness_population_count.tooltip"
		custom_gui = "blokkat_willingness_population_count_event_option_entry"
		hidden_effect = {
			remove_country_flag = monitoring_blokkat_willingness
			country_event = { id = giga_blokkat_join.5500 }
		}
	}

	option = { #willingness count
		name = "giga_blokkat_join.5500.willingness_military_count"
		custom_tooltip = "giga_blokkat_join.5500.willingness_military_count.tooltip"
		custom_gui = "blokkat_willingness_military_count_event_option_entry"
		hidden_effect = {
			remove_country_flag = monitoring_blokkat_willingness
			country_event = { id = giga_blokkat_join.5500 }
		}
	}

	option = { #willingness count
		name = "giga_blokkat_join.5500.willingness_science_count"
		custom_tooltip = "giga_blokkat_join.5500.willingness_science_count.tooltip"
		custom_gui = "blokkat_willingness_science_count_event_option_entry"
		hidden_effect = {
			remove_country_flag = monitoring_blokkat_willingness
			country_event = { id = giga_blokkat_join.5500 }
		}
	}
	option = { #willingness count
		name = "giga_blokkat_join.5500.willingness_government_count"
		custom_tooltip = "giga_blokkat_join.5500.willingness_government_count.tooltip"
		custom_gui = "blokkat_willingness_government_count_event_option_entry"
		hidden_effect = {
			remove_country_flag = monitoring_blokkat_willingness
			country_event = { id = giga_blokkat_join.5500 }
		}
	}

	option = { #willingness weight modifiers
		name = "giga_blokkat_join.5500.willingness_weight_modifiers"
		custom_gui = "blokkat_bureau_option_willingness_weight_modifiers"
	}

	option = { #global modifiers
		name = "giga_blokkat_join.5500.willingness_global_modifiers"
		custom_gui = "blokkat_bureau_option_willingness_global_modifiers"
		trigger = {
			check_variable = {
				which = blokkat_willingness_global_value
				value < 100
			}
		}
	}

	option = { #military modifiers
		name = "giga_blokkat_join.5500.willingness_military_modifiers"
		custom_gui = "blokkat_bureau_option_willingness_military_modifiers"
		trigger = {
			check_variable = {
				which = blokkat_willingness_military_value
				value < 100
			}
		}
	}

	option = { #science modifiers
		name = "giga_blokkat_join.5500.willingness_science_modifiers"
		custom_gui = "blokkat_bureau_option_willingness_science_modifiers"
		trigger = {
			check_variable = {
				which = blokkat_willingness_science_value
				value < 100
			}
		}
	}

	option = { #government modifiers
		name = "giga_blokkat_join.5500.willingness_government_modifiers"
		custom_gui = "blokkat_bureau_option_willingness_government_modifiers"
		trigger = {
			check_variable = {
				which = blokkat_willingness_government_value
				value < 100
			}
		}
	}

	option = { #population modifiers
		name = "giga_blokkat_join.5500.willingness_population_modifiers"
		custom_gui = "blokkat_bureau_option_willingness_population_modifiers"
		trigger = {
			check_variable = {
				which = blokkat_willingness_population_value
				value < 100
			}
		}
	}

	option = { #global modifiers (GOOD)
		name = "giga_blokkat_join.5500.willingness_global_modifiers_good"
		custom_gui = "blokkat_bureau_option_willingness_global_modifiers"
		trigger = {
			check_variable = {
				which = blokkat_willingness_global_value
				value >= 100
			}
		}
	}

	option = { #military modifiers (GOOD)
		name = "giga_blokkat_join.5500.willingness_military_modifiers_good"
		custom_gui = "blokkat_bureau_option_willingness_military_modifiers"
		trigger = {
			check_variable = {
				which = blokkat_willingness_military_value
				value >= 100
			}
		}
	}

	option = { #science modifiers (GOOD)
		name = "giga_blokkat_join.5500.willingness_science_modifiers_good"
		custom_gui = "blokkat_bureau_option_willingness_science_modifiers"
		trigger = {
			check_variable = {
				which = blokkat_willingness_science_value
				value >= 100
			}
		}
	}

	option = { #government modifiers (GOOD)
		name = "giga_blokkat_join.5500.willingness_government_modifiers_good"
		custom_gui = "blokkat_bureau_option_willingness_government_modifiers"
		trigger = {
			check_variable = {
				which = blokkat_willingness_government_value
				value >= 100
			}
		}
	}

	option = { #population modifiers (GOOD)
		name = "giga_blokkat_join.5500.willingness_population_modifiers_good"
		custom_gui = "blokkat_bureau_option_willingness_population_modifiers"
		trigger = {
			check_variable = {
				which = blokkat_willingness_population_value
				value >= 100
			}
		}
	}

	option = { #uh oh
		name = "giga_blokkat_join.5500.b"
		custom_gui = "blokkat_willingness_event_option_entry"
		hidden_effect = { country_event = { id=  giga_blokkat_join.5601 } }
		trigger = { any_owned_leader = { blokkat_leader_is_on_strike = yes } }
	}

	option = { #uh oh
		name = "giga_blokkat_join.5500.scrap"
		custom_tooltip = "giga_blokkat_join.5500.scrap.tooltip"
		custom_gui = "blokkat_willingness_event_option_entry"
		allow = {
			custom_tooltip = "giga_willingness_needs_scrap"
			has_country_flag = blokkat_scrap_popup
		}
		hidden_effect = { country_event = { id = giga_blokkat_join.5700 } }
	}

	option = { #uh oh
		name = "giga_blokkat_join.5500.a"
		custom_gui = "blokkat_willingness_event_option_entry"
		default_hide_option = yes
		hidden_effect = { remove_country_flag = monitoring_blokkat_willingness }
	}
}

#Show off Blokktech
country_event = {
	id = giga_blokkat_join.5700
	title = "giga_blokkat_join.5700.name"
	desc = "giga_blokkat_join.5700.desc"
	is_triggered_only = yes
	picture = GFX_evt_analyzing_artifacts
	show_sound = event_mystic_reveal

	after = {
		remove_country_flag = monitoring_blokkat_willingness
	}

	option = { #Scientists
		name = "giga_blokkat_join.5700.science"
		custom_tooltip = "giga_blokkat_join.5700.science.tooltip"
		allow = {
			custom_tooltip = {
				fail_text = "giga_willingness_every_5_years"
				hidden_trigger = { NOT = { has_country_flag = blokkat_showed_scrap_to_science } }
			}
			custom_tooltip = {
				fail_text = "giga_willingness_needs_50_scrap"
				hidden_trigger = { check_variable = { which = blokkat_scrap_value value >= 50 } }
			}
		}
		hidden_effect = {
			subtract_variable = {
				which = blokkat_scrap_value
				value = 50
			}
			set_timed_country_flag = {
				flag = blokkat_showed_scrap_to_science
				days = 1800
			}
			random_list = {
				10 = {
					change_variable = { which = blokkat_willingness_science_value value = 3 }
				}
				10 = {
					change_variable = { which = blokkat_willingness_science_value value = 5 }
					modifier = { add = 5 has_ethic = ethic_materialist }
					modifier = { add = 10 has_ethic = ethic_fanatic_materialist }
				}
				10 = {
					change_variable = { which = blokkat_willingness_science_value value = 7 }
					modifier = { add = 2 has_ethic = ethic_materialist }
					modifier = { add = 10 has_ethic = ethic_fanatic_materialist }
				}
			}
			update_blokkat_willingness_value = yes
		}
	}

	option = { #Admirals
		name = "giga_blokkat_join.5700.military"
		custom_tooltip = "giga_blokkat_join.5700.military.tooltip"
		allow = {
			custom_tooltip = {
				fail_text = "giga_willingness_every_5_years"
				hidden_trigger = { NOT = { has_country_flag = blokkat_showed_scrap_to_military } }
			}
			custom_tooltip = {
				fail_text = "giga_willingness_needs_50_scrap"
				hidden_trigger = { check_variable = { which = blokkat_scrap_value value >= 50 } }
			}
		}

		hidden_effect = {
			subtract_variable = {
				which = blokkat_scrap_value
				value = 50
			}
			set_timed_country_flag = {
				flag = blokkat_showed_scrap_to_military
				days = 1800
			}
			random_list = {
				10 = {
					change_variable = { which = blokkat_willingness_military_value value = 3 }
				}
				10 = {
					change_variable = { which = blokkat_willingness_military_value value = 5 }
					modifier = { add = 5 has_ethic = ethic_militarist }
					modifier = { add = 10 has_ethic = ethic_fanatic_militarist }
				}
				10 = {
					change_variable = { which = blokkat_willingness_military_value value = 7 }
					modifier = { add = 2 has_ethic = ethic_militarist }
					modifier = { add = 10 has_ethic = ethic_fanatic_militarist }
				}
			}
			update_blokkat_willingness_value = yes
		}
	}

	option = { #Governor
		name = "giga_blokkat_join.5700.government"
		custom_tooltip = "giga_blokkat_join.5700.government.tooltip"
		allow = {
			custom_tooltip = {
				fail_text = "giga_willingness_every_5_years"
				hidden_trigger = { NOT = { has_country_flag = blokkat_showed_scrap_to_government } }
			}
			custom_tooltip = {
				fail_text = "giga_willingness_needs_50_scrap"
				hidden_trigger = { check_variable = { which = blokkat_scrap_value value >= 50 } }
			}
		}
		hidden_effect = {
			subtract_variable = {
				which = blokkat_scrap_value
				value = 50
			}
			set_timed_country_flag = {
				flag = blokkat_showed_scrap_to_government
				days = 1800
			}
			random_list = {
				10 = {
					change_variable = { which = blokkat_willingness_government_value value = 3 }
				}
				10 = {
					change_variable = { which = blokkat_willingness_government_value value = 5 }
					modifier = { add = 5 has_ethic = ethic_authoritarian }
					modifier = { add = 10 has_ethic = ethic_fanatic_authoritarian }
				}
				10 = {
					change_variable = { which = blokkat_willingness_government_value value = 7 }
					modifier = { add = 2 has_ethic = ethic_authoritarian }
					modifier = { add = 10 has_ethic = ethic_fanatic_authoritarian }
				}
			}
			update_blokkat_willingness_value = yes
		}
	}

	option = { #Population
		name = "giga_blokkat_join.5700.population"
		custom_tooltip = "giga_blokkat_join.5700.population.tooltip"
		allow = {
			custom_tooltip = {
				fail_text = "giga_willingness_every_5_years"
				hidden_trigger = { NOT = { has_country_flag = blokkat_showed_scrap_to_population } }
			}
			custom_tooltip = {
				fail_text = "giga_willingness_needs_50_scrap"
				hidden_trigger = { check_variable = { which = blokkat_scrap_value value >= 50 } }
			}
		}
		hidden_effect = {
			subtract_variable = {
				which = blokkat_scrap_value
				value = 50
			}
			set_timed_country_flag = {
				flag = blokkat_showed_scrap_to_population
				days = 1800
			}
			random_list = {
				10 = {
					change_variable = { which = blokkat_willingness_population_value value = 3 }
				}
				10 = {
					change_variable = { which = blokkat_willingness_population_value value = 5 }
					modifier = { add = 5 has_ethic = ethic_egalitarian }
					modifier = { add = 10 has_ethic = ethic_fanatic_egalitarian }
				}
				10 = {
					change_variable = { which = blokkat_willingness_population_value value = 7 }
					modifier = { add = 2 has_ethic = ethic_egalitarian }
					modifier = { add = 10 has_ethic = ethic_fanatic_egalitarian }
				}
			}
			update_blokkat_willingness_value = yes
		}
	}

	option = { #Nvm
		name = "giga_blokkat_join.5700.bye"
	}
}

#Techs Willingness
country_event = {
	id = giga_blokkat_join.5600
	is_triggered_only = yes

	hide_window = yes

	trigger = {
		has_country_flag = blokkat_willingness_strikes_active
		OR = {
			last_increased_tech = giga_tech_blokkat_sociology_study
			last_increased_tech = giga_tech_blokkat_society_repeatable
			last_increased_tech = giga_tech_blokkat_dimension_study
			last_increased_tech = giga_tech_blokkat_physics_repeatable
			last_increased_tech = giga_tech_blokkat_armor_study
			last_increased_tech = giga_tech_blokkat_engineering_repeatable
			last_increased_tech = giga_tech_blokkat_scrap_uses
			last_increased_tech = giga_tech_blokkat_scrap_research
			last_increased_tech = giga_tech_blokkat_scrap_damage
			last_increased_tech = giga_tech_blokkat_mega_stage_0
			last_increased_tech = giga_tech_blokkat_mega_stage_1
			last_increased_tech = giga_tech_blokkat_mega_stage_2
			last_increased_tech = giga_tech_blokkat_mega_stage_3
			last_increased_tech = giga_tech_blokkat_mega_stage_4
			last_increased_tech = giga_tech_blokkat_snare
			last_increased_tech = giga_tech_blokkat_reprogram
			last_increased_tech = giga_tech_blokkat_timetravel
			last_increased_tech = giga_tech_translate_blokkatese
			last_increased_tech = giga_tech_blokkat_energy_transfer
			last_increased_tech = giga_tech_blokkat_intergalactic_logistics
			last_increased_tech = giga_tech_blokkat_subplanck_engineering
			last_increased_tech = giga_tech_blokkat_blokkwork_power_node
			last_increased_tech = giga_tech_blokkat_gigarelay_frame
			last_increased_tech = giga_tech_blokkat_gigarelay_core
			last_increased_tech = giga_tech_blokkat_laser
			last_increased_tech = giga_tech_blokkat_missile
			last_increased_tech = giga_tech_blokkat_strikecraft
			last_increased_tech = giga_tech_blokkat_armor
			last_increased_tech = giga_tech_blokkat_shield
			last_increased_tech = giga_tech_blokkat_pd
			last_increased_tech = giga_tech_blokkat_plasma
			last_increased_tech = giga_tech_blokkat_emitter
			last_increased_tech = giga_tech_blokkat_obliterator
			last_increased_tech = giga_tech_blokkat_hullrepair
			last_increased_tech = giga_tech_blokkat_booster
			last_increased_tech = giga_tech_blokkat_afterburner
			last_increased_tech = giga_tech_blokkat_ftl
			last_increased_tech = giga_tech_blokkat_reactor
			last_increased_tech = giga_tech_blokkat_computer
			last_increased_tech = giga_tech_blokkat_sensors
		}
	}

	immediate = {
		change_variable = {
			which = blokkat_willingness_science_value
			value = 1.5
		}
		update_blokkat_willingness_value = yes
	}
}

#Leaders
country_event = {
	id = giga_blokkat_join.5601
	title = "giga_blokkat_join.5601.name"
	desc = "giga_blokkat_join.5601.desc"
	is_triggered_only = yes
	picture = GFX_evt_arguing_senate
	show_sound = event_laboratory_sound

	option = { #Scientists
		name = "giga_blokkat_join.5601.scientists"
		trigger = {
			any_owned_leader = {
				leader_class = scientist
				blokkat_leader_is_on_strike = yes 
			}
		}
		hidden_effect = {
			every_owned_leader = {
				limit = { 
					leader_class = scientist
					blokkat_leader_is_on_strike = yes
				}
				set_leader_flag = blokkat_leader_strike_target #So we know which ones to check for
			}
			set_country_flag = blokkat_negotiating_scientist
			country_event = { id= giga_blokkat_join.5602 } 
		}
	}

	option = { #Admirals
		name = "giga_blokkat_join.5601.admirals"
		trigger = {
			any_owned_leader = {
				leader_class = admiral
				blokkat_leader_is_on_strike = yes 
			}
		}
		hidden_effect = {
			every_owned_leader = {
				limit = { 
					leader_class = admiral
					blokkat_leader_is_on_strike = yes
				}
				set_leader_flag = blokkat_leader_strike_target #So we know which ones to check for
			}
			set_country_flag = blokkat_negotiating_admiral
			country_event = { id= giga_blokkat_join.5602 } 
		}
	}

	option = { #Governor
		name = "giga_blokkat_join.5601.governor"
		trigger = {
			any_owned_leader = {
				leader_class = governor
				blokkat_leader_is_on_strike = yes 
			}
		}
		hidden_effect = {
			every_owned_leader = {
				limit = { 
					leader_class = governor
					blokkat_leader_is_on_strike = yes
				}
				set_leader_flag = blokkat_leader_strike_target #So we know which ones to check for
			}
			set_country_flag = blokkat_negotiating_governor
			country_event = { id= giga_blokkat_join.5602 } 
		}
	}

	option = { #Generals
		name = "giga_blokkat_join.5601.generals"
		trigger = {
			any_owned_leader = {
				leader_class = general
				blokkat_leader_is_on_strike = yes 
			}
		}
		hidden_effect = {
			every_owned_leader = {
				limit = { 
					leader_class = general
					blokkat_leader_is_on_strike = yes
				}
				set_leader_flag = blokkat_leader_strike_target #So we know which ones to check for
			}
			set_country_flag = blokkat_negotiating_general
			country_event = { id= giga_blokkat_join.5602 } 
		}
	}

	option = { #Nvm
		name = "giga_blokkat_join.5601.bye"
		hidden_effect = {
			remove_country_flag = monitoring_blokkat_willingness
		}
	}
}

#Picking a leader to deal with
country_event = {
	id = giga_blokkat_join.5602
	title = "giga_blokkat_join.5602.name"
	desc = "giga_blokkat_join.5602.desc"
	is_triggered_only = yes
	picture = GFX_evt_arguing_senate
	show_sound = event_laboratory_sound
	
	after = {
		clear_global_event_target = blokkat_strike_leader_1
		clear_global_event_target = blokkat_strike_leader_2
		clear_global_event_target = blokkat_strike_leader_3
		clear_global_event_target = blokkat_strike_leader_4
		clear_global_event_target = blokkat_strike_leader_5
		clear_global_event_target = blokkat_strike_leader_6
		clear_global_event_target = blokkat_strike_leader_7
		clear_global_event_target = blokkat_strike_leader_8
		clear_global_event_target = blokkat_strike_leader_9
		clear_global_event_target = blokkat_strike_leader_10
		every_owned_leader = {
			limit = { has_leader_flag = blokkat_leader_strike_target }
			remove_leader_flag = blokkat_leader_strike_target
		}
		every_owned_leader = {
			limit = { has_leader_flag = blokkat_strike_leader_checked }
			remove_leader_flag = blokkat_strike_leader_checked
		}
	}

	immediate = {
		set_variable = { which = blokkat_strike_leader_count_temp value = 0 }
		every_owned_leader = {
			limit = { has_leader_flag = blokkat_leader_strike_target }
			ROOT = { change_variable = { which = blokkat_strike_leader_count_temp value = 1 } }
		}
		if = {
			limit = { check_variable = { which = blokkat_strike_leader_count_temp value > 10 } }
			set_variable = { which = blokkat_strike_leader_count_temp value = 10 }
		}
		while = {
			limit = { check_variable = { which = blokkat_strike_leader_count_temp value > 0 } }
			if = {
				limit = { check_variable = { which = blokkat_strike_leader_count_temp value = 10 } }
				random_owned_leader = {
					limit = { has_leader_flag = blokkat_leader_strike_target NOT = { has_leader_flag = blokkat_strike_leader_checked } }
					set_leader_flag = blokkat_strike_leader_checked
					save_global_event_target_as = blokkat_strike_leader_10
				}
			}
			if = {
				limit = { check_variable = { which = blokkat_strike_leader_count_temp value = 9 } }
				random_owned_leader = {
					limit = { has_leader_flag = blokkat_leader_strike_target NOT = { has_leader_flag = blokkat_strike_leader_checked } }
					set_leader_flag = blokkat_strike_leader_checked
					save_global_event_target_as = blokkat_strike_leader_9
				}
			}
			if = {
				limit = { check_variable = { which = blokkat_strike_leader_count_temp value = 8 } }
				random_owned_leader = {
					limit = { has_leader_flag = blokkat_leader_strike_target NOT = { has_leader_flag = blokkat_strike_leader_checked } }
					set_leader_flag = blokkat_strike_leader_checked
					save_global_event_target_as = blokkat_strike_leader_8
				}
			}
			if = {
				limit = { check_variable = { which = blokkat_strike_leader_count_temp value = 7 } }
				random_owned_leader = {
					limit = { has_leader_flag = blokkat_leader_strike_target NOT = { has_leader_flag = blokkat_strike_leader_checked } }
					set_leader_flag = blokkat_strike_leader_checked
					save_global_event_target_as = blokkat_strike_leader_7
				}
			}
			if = {
				limit = { check_variable = { which = blokkat_strike_leader_count_temp value = 6 } }
				random_owned_leader = {
					limit = { has_leader_flag = blokkat_leader_strike_target NOT = { has_leader_flag = blokkat_strike_leader_checked } }
					set_leader_flag = blokkat_strike_leader_checked
					save_global_event_target_as = blokkat_strike_leader_6
				}
			}
			if = {
				limit = { check_variable = { which = blokkat_strike_leader_count_temp value = 5 } }
				random_owned_leader = {
					limit = { has_leader_flag = blokkat_leader_strike_target NOT = { has_leader_flag = blokkat_strike_leader_checked } }
					set_leader_flag = blokkat_strike_leader_checked
					save_global_event_target_as = blokkat_strike_leader_5
				}
			}
			if = {
				limit = { check_variable = { which = blokkat_strike_leader_count_temp value = 4 } }
				random_owned_leader = {
					limit = { has_leader_flag = blokkat_leader_strike_target NOT = { has_leader_flag = blokkat_strike_leader_checked } }
					set_leader_flag = blokkat_strike_leader_checked
					save_global_event_target_as = blokkat_strike_leader_4
				}
			}
			if = {
				limit = { check_variable = { which = blokkat_strike_leader_count_temp value = 3 } }
				random_owned_leader = {
					limit = { has_leader_flag = blokkat_leader_strike_target NOT = { has_leader_flag = blokkat_strike_leader_checked } }
					set_leader_flag = blokkat_strike_leader_checked
					save_global_event_target_as = blokkat_strike_leader_3
				}
			}
			if = {
				limit = { check_variable = { which = blokkat_strike_leader_count_temp value = 2 } }
				random_owned_leader = {
					limit = { has_leader_flag = blokkat_leader_strike_target NOT = { has_leader_flag = blokkat_strike_leader_checked } }
					set_leader_flag = blokkat_strike_leader_checked
					save_global_event_target_as = blokkat_strike_leader_2
				}
			}
			if = {
				limit = { check_variable = { which = blokkat_strike_leader_count_temp value = 1 } }
				random_owned_leader = {
					limit = { has_leader_flag = blokkat_leader_strike_target NOT = { has_leader_flag = blokkat_strike_leader_checked } }
					set_leader_flag = blokkat_strike_leader_checked
					save_global_event_target_as = blokkat_strike_leader_1
				}
			}
			ROOT = { subtract_variable = { which = blokkat_strike_leader_count_temp value = 1 } }
		}
	}

	option = { 
		name = "giga_blokkat_join.5602.1" 
		trigger = { any_owned_leader = { is_same_value = event_target:blokkat_strike_leader_1 } } 
		hidden_effect = { event_target:blokkat_strike_leader_1 = { save_global_event_target_as = blokkat_strike_leader_negotiate } }
		country_event = { id = giga_blokkat_join.5603 }
	}
	option = { 
		name = "giga_blokkat_join.5602.2" 
		trigger = { any_owned_leader = { is_same_value = event_target:blokkat_strike_leader_2 } } 
		hidden_effect = { event_target:blokkat_strike_leader_2 = { save_global_event_target_as = blokkat_strike_leader_negotiate } }
		country_event = { id = giga_blokkat_join.5603 }
	}
	option = { 
		name = "giga_blokkat_join.5602.3" 
		trigger = { any_owned_leader = { is_same_value = event_target:blokkat_strike_leader_3 } } 
		hidden_effect = { event_target:blokkat_strike_leader_3 = { save_global_event_target_as = blokkat_strike_leader_negotiate } }
		country_event = { id = giga_blokkat_join.5603 }
	}
	option = { 
		name = "giga_blokkat_join.5602.4" 
		trigger = { any_owned_leader = { is_same_value = event_target:blokkat_strike_leader_4 } } 
		hidden_effect = { event_target:blokkat_strike_leader_4 = { save_global_event_target_as = blokkat_strike_leader_negotiate } }
		country_event = { id = giga_blokkat_join.5603 }
	}
	option = { 
		name = "giga_blokkat_join.5602.5" 
		trigger = { any_owned_leader = { is_same_value = event_target:blokkat_strike_leader_5 } } 
		hidden_effect = { event_target:blokkat_strike_leader_5 = { save_global_event_target_as = blokkat_strike_leader_negotiate } }
		country_event = { id = giga_blokkat_join.5603 }
	}
	option = { 
		name = "giga_blokkat_join.5602.6" 
		trigger = { any_owned_leader = { is_same_value = event_target:blokkat_strike_leader_6 } } 
		hidden_effect = { event_target:blokkat_strike_leader_6 = { save_global_event_target_as = blokkat_strike_leader_negotiate } }
		country_event = { id = giga_blokkat_join.5603 }
	}
	option = { 
		name = "giga_blokkat_join.5602.7" 
		trigger = { any_owned_leader = { is_same_value = event_target:blokkat_strike_leader_7 } } 
		hidden_effect = { event_target:blokkat_strike_leader_7 = { save_global_event_target_as = blokkat_strike_leader_negotiate } }
		country_event = { id = giga_blokkat_join.5603 }
	}
	option = { 
		name = "giga_blokkat_join.5602.8" 
		trigger = { any_owned_leader = { is_same_value = event_target:blokkat_strike_leader_8 } } 
		hidden_effect = { event_target:blokkat_strike_leader_8 = { save_global_event_target_as = blokkat_strike_leader_negotiate } }
		country_event = { id = giga_blokkat_join.5603 }
	}
	option = { 
		name = "giga_blokkat_join.5602.9" 
		trigger = { any_owned_leader = { is_same_value = event_target:blokkat_strike_leader_9 } } 
		hidden_effect = { event_target:blokkat_strike_leader_9 = { save_global_event_target_as = blokkat_strike_leader_negotiate } }
		country_event = { id = giga_blokkat_join.5603 }
	}
	option = { 
		name = "giga_blokkat_join.5602.10" 
		trigger = { any_owned_leader = { is_same_value = event_target:blokkat_strike_leader_10 } } 
		hidden_effect = { event_target:blokkat_strike_leader_10 = { save_global_event_target_as = blokkat_strike_leader_negotiate } }
		country_event = { id = giga_blokkat_join.5603 }
	}

	option = { #Randomize
		name = "giga_blokkat_join.5602.random"
		hidden_effect = { country_event = { id = giga_blokkat_join.5602 } }
	}

	option = { #Nvm
		name = "giga_blokkat_join.5601.bye"
		hidden_effect = {
			remove_country_flag = monitoring_blokkat_willingness
			clear_strike_leader_class_flags = yes
		}
	}
}

#Negotiating
country_event = {
	id = giga_blokkat_join.5603
	title = "giga_blokkat_join.5603.name"
	desc = "giga_blokkat_join.5603.desc"
	is_triggered_only = yes
	picture = GFX_evt_arguing_senate
	show_sound = event_laboratory_sound

	after = {
		clear_strike_leader_class_flags = yes
	}

	#Odds of success are willingness - leader level times 2
	immediate = {
		set_variable = {
			which = blokkat_leader_negotiate_odds
			value = 30
		}
		if = { 
			limit = { has_country_flag = blokkat_negotiating_scientist }
			change_variable = { which = blokkat_leader_negotiate_odds value = blokkat_willingness_science_value }
		}
		if = { 
			limit = { has_country_flag = blokkat_negotiating_admiral }
			change_variable = { which = blokkat_leader_negotiate_odds value = blokkat_willingness_military_value }
		}
		if = { 
			limit = { has_country_flag = blokkat_negotiating_general }
			change_variable = { which = blokkat_leader_negotiate_odds value = blokkat_willingness_military_value }
		}
		if = { 
			limit = { has_country_flag = blokkat_negotiating_governor }
			change_variable = { which = blokkat_leader_negotiate_odds value = blokkat_willingness_government_value }
		}
		set_variable = {
			which = blokkat_leader_negotiate_level
			value = 0
		}
		set_variable = {
			which = blokkat_leader_negotiate_influence_cost
			value = 10
		}
		set_variable = {
			which = blokkat_leader_negotiate_unity_cost
			value = 100
		}
		set_variable = {
			which = blokkat_leader_negotiate_energy_cost
			value = 1500
		}
		event_target:blokkat_strike_leader_negotiate = {
			if = { limit = { has_skill = 1 } ROOT = { set_variable = { which = blokkat_leader_negotiate_level value = 1 } } }
			else_if = { limit = { has_skill = 2 } ROOT = { set_variable = { which = blokkat_leader_negotiate_level value = 2 } } }
			else_if = { limit = { has_skill = 3 } ROOT = { set_variable = { which = blokkat_leader_negotiate_level value = 3 } } }
			else_if = { limit = { has_skill = 4 } ROOT = { set_variable = { which = blokkat_leader_negotiate_level value = 4 } } }
			else_if = { limit = { has_skill = 5 } ROOT = { set_variable = { which = blokkat_leader_negotiate_level value = 5 } } }
			else_if = { limit = { has_skill = 6 } ROOT = { set_variable = { which = blokkat_leader_negotiate_level value = 6 } } }
			else_if = { limit = { has_skill = 7 } ROOT = { set_variable = { which = blokkat_leader_negotiate_level value = 7 } } }
			else_if = { limit = { has_skill = 8 } ROOT = { set_variable = { which = blokkat_leader_negotiate_level value = 8 } } }
			else_if = { limit = { has_skill = 9 } ROOT = { set_variable = { which = blokkat_leader_negotiate_level value = 9 } } }
			else_if = { limit = { has_skill > 10  } ROOT = { set_variable = { which = blokkat_leader_negotiate_level value = 10 } } }
		}
		multiply_variable = {
			which = blokkat_leader_negotiate_influence_cost
			value = blokkat_leader_negotiate_level
		}
		multiply_variable = {
			which = blokkat_leader_negotiate_unity_cost
			value = blokkat_leader_negotiate_level
		}
		multiply_variable = {
			which = blokkat_leader_negotiate_energy_cost
			value = blokkat_leader_negotiate_level
		}
		multiply_variable = {
			which = blokkat_leader_negotiate_level
			value = 2
		}
		subtract_variable = {
			which = blokkat_leader_negotiate_odds
			value = blokkat_leader_negotiate_level
		}
		if = {
			limit = {
				check_variable = { which = blokkat_leader_negotiate_odds value < 0 }
				
			}
			set_variable = { which = blokkat_leader_negotiate_odds value = 0 }
		}
		set_variable = {
			which = blokkat_leader_negotiate_odds_opposite
			value = 100
		}
		subtract_variable = {
			which = blokkat_leader_negotiate_odds_opposite
			value = blokkat_leader_negotiate_odds
		}

		#Odds with a payrise
		set_variable = { which = blokkat_leader_negotiate_odds_payrise value = blokkat_leader_negotiate_odds }

		change_variable = { which = blokkat_leader_negotiate_odds_payrise value = 15 }

		set_variable = { which = blokkat_leader_negotiate_odds_payrise_opposite value = 100 }

		subtract_variable = { which = blokkat_leader_negotiate_odds_payrise_opposite value = blokkat_leader_negotiate_odds_payrise }
	}

	option = { #Sure
		name = "giga_blokkat_join.5603.yes"
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value > 1
				mult = blokkat_leader_negotiate_influence_cost
			}
			resource_stockpile_compare = {
				resource = unity
				value > 1
				mult = blokkat_leader_negotiate_unity_cost
			}
		}
		add_resource = { influence = -1 mult = blokkat_leader_negotiate_influence_cost }
		add_resource = { unity = -1 mult = blokkat_leader_negotiate_unity_cost }
		random_list = {
			0 = { #Works
				country_event = { id = giga_blokkat_join.5604 }
				modifier = {
					add = ROOT.blokkat_leader_negotiate_odds
					always = yes
				}
			}
			0 = { #Fails
				country_event = { id = giga_blokkat_join.5605 }
				modifier = {
					add = ROOT.blokkat_leader_negotiate_odds_opposite
					always = yes
				}
			}
		}
	}

	option = { #Sure (payrise)
		name = "giga_blokkat_join.5603.bribe"
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value > 1
				mult = blokkat_leader_negotiate_influence_cost
			}
			resource_stockpile_compare = {
				resource = unity
				value > 1
				mult = blokkat_leader_negotiate_unity_cost
			}
			resource_stockpile_compare = {
				resource = energy
				value > 1
				mult = blokkat_leader_negotiate_energy_cost
			}
		}
		add_resource = { influence = -1 mult = blokkat_leader_negotiate_influence_cost }
		add_resource = { unity = -1 mult = blokkat_leader_negotiate_unity_cost }
		add_resource = { energy = -1 mult = blokkat_leader_negotiate_energy_cost }

		random_list = {
			0 = { #Works
				set_country_flag = blokkat_willingness_bribing_leader
				country_event = { id = giga_blokkat_join.5604 }
				modifier = {
					add = ROOT.blokkat_leader_negotiate_odds_payrise
					always = yes
				}
			}
			0 = { #Fails
				country_event = { id = giga_blokkat_join.5605 }
				modifier = {
					add = ROOT.blokkat_leader_negotiate_odds_payrise_opposite
					always = yes
				}
				if = {
					limit = { has_ethic = ethic_egalitarian }
					subtract_variable = { which = blokkat_willingness_population_value value = 1.5 }
				}
				if = {
					limit = { has_ethic = ethic_fanatic_egalitarian }
					subtract_variable = { which = blokkat_willingness_population_value value = 3 }
				}
			}
			
		}
	}

	option = { #Nvm
		name = "giga_blokkat_join.5601.bye"
		hidden_effect = {
			remove_country_flag = monitoring_blokkat_willingness
			if = { limit = { has_country_flag = blokkat_negotiating_scientist } remove_country_flag = blokkat_negotiating_scientist }
		}
	}
}

#It worked!
country_event = {
	id = giga_blokkat_join.5604
	title = "giga_blokkat_join.5604.name"
	desc = "giga_blokkat_join.5604.desc"
	is_triggered_only = yes
	picture = GFX_evt_alien_propaganda
	show_sound = event_celebration

	option = { #Yay!
		name = "giga_blokkat_join.5604.a"
		event_target:blokkat_strike_leader_negotiate = { clear_strike_leader_traits = yes }
		hidden_effect = { remove_country_flag = monitoring_blokkat_willingness }
		trigger = { NOT = { has_country_flag = blokkat_willingness_bribing_leader } }
	}

	option = { #Yay!
		name = "giga_blokkat_join.5604.bribe"
		event_target:blokkat_strike_leader_negotiate = { 
			clear_strike_leader_traits = yes
			add_trait = trait_blokkat_payrise
		}
		hidden_effect = { remove_country_flag = monitoring_blokkat_willingness remove_country_flag = blokkat_willingness_bribing_leader }
		trigger = { has_country_flag = blokkat_willingness_bribing_leader }
	}
}

#It Failed!
country_event = {
	id = giga_blokkat_join.5605
	title = "giga_blokkat_join.5605.name"
	desc = "giga_blokkat_join.5605.desc"
	is_triggered_only = yes
	picture = GFX_evt_assembly_fight
	show_sound = event_planetary_riot

	option = { #Nay...
		name = "giga_blokkat_join.5605.a"
		hidden_effect = { remove_country_flag = monitoring_blokkat_willingness }
	}
}

#EDICTS
country_event = {
	id = giga_blokkat_join.5610
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = blokkat_willingness_active
	}

	immediate = {
		if = {
			limit = { has_edict = blokkat_science_willingness_propaganda }
			random = {
				chance = 5
				change_variable = { which = blokkat_willingness_science_value value = 1 }
				update_blokkat_willingness_value = yes
			}
		}
		if = {
			limit = { has_edict = blokkat_military_willingness_propaganda }
			random = {
				chance = 5
				change_variable = { which = blokkat_willingness_military_value value = 1 }
				update_blokkat_willingness_value = yes
			}
		}
		if = {
			limit = { has_edict = blokkat_government_willingness_propaganda }
			random = {
				chance = 5
				change_variable = { which = blokkat_willingness_government_value value = 1 }
				update_blokkat_willingness_value = yes
			}
		}
		if = {
			limit = { has_edict = blokkat_population_willingness_propaganda }
			random = {
				chance = 5
				change_variable = { which = blokkat_willingness_population_value value = 1 }
				update_blokkat_willingness_value = yes
			}
		}
		if = {
			limit = { has_country_flag = blokkat_willingness_active }
			country_event = { id = giga_blokkat_join.5610 days = 30 }
		}
	}
}

#Galcom stuff
#Galaxy protests after choice is made to side with Blokks
country_event = {
	id = giga_blokkat_join.6000
	title = "giga_blokkat_join.6000.name"
	desc = "giga_blokkat_join.6000.desc"
	is_triggered_only = yes
	picture = GFX_evt_signing
	show_sound = event_radio_chatter

	trigger = {
		any_country = {
			exists = THIS
			is_country_type = default
			katzen_is_genocidal = no
			NOR = {
				is_country = ROOT
				is_in_federation_with = ROOT
				has_overlord = ROOT
			}
		}
	}

	option = { #Yay!
		name = "giga_blokkat_join.6000.a"
		custom_tooltip = "giga_blokkat_join.6000.a.tooltip"
		every_country = {
			limit = {
				exists = THIS
				is_country_type = default
				NOR = {
					is_country = ROOT
					is_in_federation_with = ROOT
					has_overlord = ROOT
				}
			}
			add_opinion_modifier = { who = ROOT modifier = opinion_protests_blokkat_plan_1 }
		}
	}
}

#BIG protests after Protokols initiated
country_event = {
	id = giga_blokkat_join.6001
	title = "giga_blokkat_join.6001.name"
	desc = "giga_blokkat_join.6001.desc"
	is_triggered_only = yes
	picture = GFX_evt_alien_propaganda
	show_sound = event_public_unrest

	trigger = {
		any_country = {
			exists = THIS
			katzen_is_genocidal = no
			OR = {
				is_country_type = default
				is_country_type = katzenartig_imperium
			}
			NOT = { is_country = ROOT }
		}
	}

	option = { #Yay!
		name = "giga_blokkat_join.6001.a"
		custom_tooltip = "giga_blokkat_join.6001.a.tooltip"
		every_country = {
			limit = {
				exists = THIS
				is_country_type = default
				NOT = { is_country = ROOT }
			}
			add_opinion_modifier = { who = ROOT modifier = opinion_protests_blokkat_plan_2 }
		}
		hidden_effect = {
			if = {
				limit = { any_country = { exists = THIS is_country_type = katzenartig_imperium } }
				decrease_kaiser_opinion = yes
				decrease_kaiser_opinion = yes
				decrease_kaiser_opinion = yes
			}
		}
	}
}

#Diplomatic Ties Cut
country_event = {
	id = giga_blokkat_join.6002
	title = "giga_blokkat_join.6002.name"
	desc = "giga_blokkat_join.6002.desc"
	is_triggered_only = yes
	picture = GFX_evt_assembly_fight
	show_sound = event_planetary_riot

	trigger = {
		any_country = {
			exists = THIS
			katzen_is_genocidal = no
			is_country_type = default
			NOT = { is_country = ROOT }
		}
	}

	option = {
		name = "giga_blokkat_join.6002.a"
		custom_tooltip = "giga_blokkat_join.6002.a.tooltip"
		add_modifier = {
			modifier = giga_blokkat_shunned_by_galaxy
			days = -1
		}
		every_country = {
			limit = {
				exists = THIS
				is_country_type = default
				NOT = { is_country = ROOT }
			}
			add_opinion_modifier = { who = ROOT modifier = opinion_protests_blokkat_plan_3 }
		}
		if = {
			limit = { has_federation = yes }
			leave_alliance = { override_requirements = yes }
		}
		remove_from_galactic_community = yes
	}
}

#GC Goes to War
country_event = {
	id = giga_blokkat_join.6003
	title = "giga_blokkat_join.6003.name"
	desc = "giga_blokkat_join.6003.desc"
	is_triggered_only = yes
	picture = GFX_evt_crisis_declared
	show_sound = event_air_raid_siren

	trigger = {
		any_country = {
			exists = THIS
			OR = {
				is_country_type = default
				is_country_type = katzenartig_imperium
			}
			katzen_is_genocidal = no
			NOT = { is_country = ROOT }
		}
	}

	option = {
		name = "giga_blokkat_join.6003.a"
		custom_tooltip = "giga_blokkat_join.6003.a.tooltip"
		hidden_effect = {
			if = { #Subjects break free
				limit = { is_overlord = yes }
				every_subject = { set_subject_of = { who = none } }
			}
			if = { #Remove Fed
				limit = { has_federation = yes }
				leave_alliance = { override_requirements = yes }
			}
			if = { #Remove existing wars
				limit = { 
					any_war = {
						any_war_participant = { is_country = ROOT } 
						NOT = { any_war_participant = { NOT = { is_country_type = default } } } } 
				}
				every_war = { 
					limit = { any_war_participant = { is_country = ROOT } NOT = { any_war_participant = { NOT = { is_country_type = default } } } }
					end_war_effect = yes
				}
			}
			random_country = { #Everyone declares war
				limit = {
					katzen_is_genocidal = no
					is_country_type = default
					is_subject = no
					NOT = { is_country = ROOT }
				}
				declare_war = {
					target = ROOT
					attacker_war_goal = wg_end_threat_crisis
					name = "War of Galactic Salvation"
				}
				save_global_event_target_as = giga_anti_blokkat_player_war_leader
			}
			every_country = {
				limit = {
					katzen_is_genocidal = no
					is_country_type = default
					is_subject = no
					NOR = {
						is_country = ROOT
						is_country = event_target:giga_anti_blokkat_player_war_leader  
					}
				}
				join_war = event_target:giga_anti_blokkat_player_war_leader
			}
			every_country = { #Everyone declares war
				limit = {
					katzen_is_genocidal = yes
					is_country_type = default
					is_subject = no
					NOT = { is_country = ROOT }
				}
				declare_war = {
					target = ROOT
					attacker_war_goal = wg_end_threat_crisis
					name = "War of Galactic Salvation"
				}
			}
			if = { #Kaiser declares war
				limit = { any_country = { exists = THIS is_country_type = katzenartig_imperium } }
				decrease_kaiser_opinion = yes
				decrease_kaiser_opinion = yes
				decrease_kaiser_opinion = yes
				decrease_kaiser_opinion = yes
				decrease_kaiser_opinion = yes
			}
		}
	}
}

#DEBUG
country_event = {
	id = giga_blokkat_join.5801
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = blokkat_willingness_population_value
			value = 5
		}
		update_blokkat_willingness_value = yes
	}
}

country_event = {
	id = giga_blokkat_join.5802
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = blokkat_willingness_science_value
			value = 5
		}
		update_blokkat_willingness_value = yes
	}
}

country_event = {
	id = giga_blokkat_join.5803
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = blokkat_willingness_government_value
			value = 5
		}
		update_blokkat_willingness_value = yes
	}
}

country_event = {
	id = giga_blokkat_join.5804
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = blokkat_willingness_military_value
			value = 5
		}
		update_blokkat_willingness_value = yes
	}
}

country_event = {
	id = giga_blokkat_join.5805
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = blokkat_willingness_government_value
			value = -100
		}
		update_blokkat_willingness_value = yes
	}
}

country_event = {
	id = giga_blokkat_join.5806
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = blokkat_yottajoules_count
			value = 10000
		}
	}
}
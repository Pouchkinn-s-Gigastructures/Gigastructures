namespace = giga_paluush

####################################################
### Paluush ########################################
####################################################
# Found system
ship_event = {
	id = giga_paluush.001
	title = "giga_paluush.001.name"
	desc = "giga_paluush.001.desc"
	picture = GFX_evt_space_debris
	show_sound = event_radio_chatter
	location = from
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = meopa_spawned_as_fe }
		controller = { NOT = { has_country_flag = encountered_paluush } }
		from = {
			has_star_flag = giga_system_six
			any_system_planet = { has_planet_flag = paluushia }
		}
	}

	immediate = { controller = { set_country_flag = encountered_paluush } }
	option = { name = "giga_paluush.001.a" }
}

# On survey
ship_event = {
	id = giga_paluush.002
	title = "giga_paluush.002.name"
	desc = "giga_paluush.002.desc"
	picture = GFX_evt_alien_planet
	show_sound = event_radio_chatter
	location = from
	is_triggered_only = yes
	trigger = { from = { has_planet_flag = paluushia } }

	option = {
		name = "giga_paluush.002.a"
		hidden_effect = { owner = { country_event = { id = giga_paluush.003 } } }
	}
}

# Poh'tin says hi
country_event = {
	id = giga_paluush.003
	title = "giga_paluush.003.name"
	desc = "giga_paluush.003.desc"
	location = from
	is_triggered_only = yes
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:paluush_portrait.ruler
		room = paluush_room
	}

	option = { trigger = { has_valid_civic = civic_fanatic_purifiers }		name = SCUM }
	option = { trigger = { has_valid_civic = civic_hive_devouring_swarm }	name = TASTY }
	option = { trigger = { has_valid_civic = civic_machine_terminator }		name = EXTERMINATE }
	option = {
		trigger = {
			NOR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
		name = "giga_paluush.003.a"
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier6researchreward
			min = @tier6researchmin
			max = @tier6researchmax
		}
	}
}

#Fix Paluush
event = {
	id = giga_paluush.200
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		exists = event_target:paluushia
		event_target:paluushia = {
			NOR = { 
				has_planet_flag = paluushia_scaring_blokkats
				has_planet_flag = grandbunny_defeated
				is_planet_class = pc_shrouded
			}
			OR = {
				is_colony = no
				owner = { NOT = { is_country = event_target:paluush_portrait } }
				habitable_planet = no
			}
		}
	}

	immediate = {
		event_target:paluushia = {
			if = {
				limit = { is_colony = yes }
				destroy_colony = yes
			}
			if = {
				limit = { NOT = { is_planet_class = pc_continental } }
				change_pc = pc_continental
			}
			generate_paluush_primitives_on_planet = yes
		}
	}
}

#Remove pops out of Paluusha
country_event = {
	id = giga_paluush.202
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = { is_country = event_target:paluush_portrait }
		any_owned_species = { is_species = paluush_species }
	}

	immediate = {
		every_owned_pop = {
			limit = { is_species = paluush_species }
			kill_pop = yes
		}
	}
}

# on_destroy_planet_with_PLANET_KILLER_SHIELDER
# Paluushs smash shield
planet_event = {
	id = giga_paluush.101
	hide_window = yes
	is_triggered_only = yes
	trigger = { has_planet_flag = paluushia }
	immediate = {
		planet_event = { id = giga_paluush.301 }
		from.owner = { country_event = { id = giga_paluush.1011 days = 30 } }
	}
}

country_event = {
	id = giga_paluush.1011
	title = "giga_paluush.1011.title"
	desc = "giga_paluush.1011.desc"
	show_sound = event_air_raid_siren
	picture = GFX_evt_shielded_planet
	is_triggered_only = yes
	option = { name = "giga_paluush.1011.a" }
}

# on_destroy_planet_with_PLANET_KILLER_NEUTRON
# Paluushs disregard neutrons
planet_event = {
	id = giga_paluush.102
	hide_window = yes
	is_triggered_only = yes
	trigger = { has_planet_flag = paluushia }
	immediate = {
		planet_event = { id = giga_paluush.301 days = 1 }
		from.owner = { country_event = { id = giga_paluush.1021 } }
	}
}

country_event = {
	id = giga_paluush.1021
	title = "giga_paluush.1021.title"
	desc = "giga_paluush.1021.desc"
	show_sound = event_air_raid_siren
	picture = GFX_evt_planet_beam
	is_triggered_only = yes
	option = { name = "giga_paluush.1021.a" }
}

# on_destroy_planet_with_PLANET_KILLER_CRACKER
# Paluushs disregard cracker
planet_event = {
	id = giga_paluush.103
	hide_window = yes
	is_triggered_only = yes
	trigger = { has_planet_flag = paluushia }
	immediate = {
		planet_event = { id = giga_paluush.301 days = 1 }
		from.owner = { country_event = { id = giga_paluush.1031 } }
	}
}

country_event = {
	id = giga_paluush.1031
	title = "giga_paluush.1031.title"
	desc = "giga_paluush.1031.desc"
	show_sound = event_air_raid_siren
	picture = GFX_evt_planet_beam
	is_triggered_only = yes
	option = { name = "giga_paluush.1031.a" }
}

# on_destroy_planet_with_PLANET_KILLER_GODRAY
# Paluushs disregard godray
planet_event = {
	id = giga_paluush.104
	hide_window = yes
	is_triggered_only = yes
	trigger = { has_planet_flag = paluushia }
	immediate = {
		planet_event = { id = giga_paluush.301 days = 1 }
		from.owner = { country_event = { id = giga_paluush.1041 } }
	}
}

country_event = {
	id = giga_paluush.1041
	title = "giga_paluush.1041.title"
	desc = "giga_paluush.1041.desc"
	show_sound = event_air_raid_siren
	picture = GFX_evt_planet_beam
	is_triggered_only = yes
	option = { name = "giga_paluush.1041.a" }
}

# on_destroy_planet_with_PLANET_KILLER_NANOBOTS
# Paluushs disregard nanites
planet_event = {
	id = giga_paluush.105
	hide_window = yes
	is_triggered_only = yes
	trigger = { has_planet_flag = paluushia }
	immediate = {
		planet_event = { id = giga_paluush.301 days = 1 }
		from.owner = { country_event = { id = giga_paluush.1051 } }
	}
}

country_event = {
	id = giga_paluush.1051
	title = "giga_paluush.1051.title"
	desc = "giga_paluush.1051.desc"
	show_sound = event_air_raid_siren
	picture = GFX_evt_planet_beam
	is_triggered_only = yes
	option = { name = "giga_paluush.1051.a" }
}

# Return bombardment damage
planet_event = {
	id = giga_paluush.201
	hide_window = yes
	is_triggered_only = yes
	trigger = { has_planet_flag = paluushia }

	immediate = {
		add_planet_devastation = -100
		solar_system = {
			random_fleet_in_system = {
				limit = {
					exists = controller
					exists = orbit
					controller = { is_same_value = root.from }
					orbit = { is_same_value = root }
				}

				save_event_target_as = paalush_return_fire
				random_owned_ship = {
					random_list = {
						1 = { reduce_hp = 100 }
						2 = { reduce_hp = 200 }
						3 = { reduce_hp = 300 }
						4 = { reduce_hp = 400 }
						5 = { reduce_hp = 500 }
						6 = { reduce_hp = 600 }
						7 = { reduce_hp = 700 }
						8 = { reduce_hp = 800 }
						9 = { reduce_hp = 900 }
					}
					random_list = {
						1 = { reduce_hp = 10 }
						2 = { reduce_hp = 20 }
						3 = { reduce_hp = 30 }
						4 = { reduce_hp = 40 }
						5 = { reduce_hp = 50 }
						6 = { reduce_hp = 60 }
						7 = { reduce_hp = 70 }
						8 = { reduce_hp = 80 }
						9 = { reduce_hp = 90 }
					}
					random_list = {
						1 = { reduce_hp = 1 }
						2 = { reduce_hp = 2 }
						3 = { reduce_hp = 3 }
						4 = { reduce_hp = 4 }
						5 = { reduce_hp = 5 }
						6 = { reduce_hp = 6 }
						7 = { reduce_hp = 7 }
						8 = { reduce_hp = 8 }
						9 = { reduce_hp = 9 }
					}
				}
			}
		}
		from = { country_event = { id = giga_paluush.2011 } }
	}
}

country_event = {
	id = giga_paluush.2011
	title = "giga_paluush.2011.title"
	desc = "giga_paluush.2011.desc"
	show_sound = event_ship_explosion
	picture = GFX_evt_ship_under_attack
	is_triggered_only = yes
	location = event_target:paalush_return_fire
	trigger = { NOT = { has_country_flag = paluushia_is_returning_fire } }
	immediate = { set_timed_country_flag = { flag = paluushia_is_returning_fire days = 60 } }

	option = {
		default_hide_option = yes
		name = "giga_paluush.2011.a"
	}
}

# Reset Planet
planet_event = {
	id = giga_paluush.301
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		while = {
			count = 40
			random_owned_pop = {
				kill_pop = yes
			}
		}
		clear_deposits = yes
		change_pc = pc_continental
		reset_planet = yes
		generate_paluush_primitives_on_planet_colossus = yes
	}
}

# Paluushia never progresses
event = {
	id = giga_paluush.302
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_country = {
			is_country_type = primitive
			OR = {
				has_country_flag = paluush_primitives
				has_country_flag = dominion_primitives
				has_country_flag = excognitor_primitives
			}
			has_country_flag = atomic_age
		}
	}

	immediate = {
		every_country = {
			limit = {
				is_country_type = primitive
				OR = {
					has_country_flag = paluush_primitives
					has_country_flag = dominion_primitives
					has_country_flag = excognitor_primitives
				}
				has_country_flag = atomic_age
			}
			remove_country_flag = atomic_age
			set_country_flag = machine_age
			set_pre_ftl_age = machine_age
		}
	}
}

# Paluushia observation station built
ship_event = {
	id = giga_paluush.303
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		exists = from.owner
		from.owner = { has_country_flag = paluush_primitives }
	}

	immediate = {
		owner = {
			if = {
				limit = { NOT = { has_country_flag = giga_already_warned_about_it } }
				country_event = { id = giga_paluush.3031 }
			}
		}
		from = {
			save_event_target_as = paalush_eat_obpost
			planet_event = { id = giga_paluush.3030 days = 2 }
		}
	}
}

planet_event = {
	id = giga_paluush.3030
	hide_window = yes
	is_triggered_only = yes
	immediate = { observation_outpost = { dismantle = yes } }
}

country_event = {
	id = giga_paluush.3031
	title = "giga_paluush.3031.title"
	desc = "giga_paluush.3031.desc"
	show_sound = event_ship_explosion
	picture = GFX_evt_large_explosion
	is_triggered_only = yes
	location = event_target:paalush_eat_obpost
	immediate = { set_country_flag = giga_already_warned_about_it }
	option = {
		name = "giga_paluush.3031.a"
		add_resource = { minerals = 2500 }
	}
}

# The Grandbunny is vanquished
country_event = {
	id = giga_paluush.400
	title = "giga_paluush.400.title"
	desc = "giga_paluush.400.desc"
	show_sound = event_structural_collapse
	picture = GFX_evt_shrouded_planet
	is_triggered_only = yes

	trigger = {
		from = {
			has_country_flag = paluush_primitives
		}
	}

	immediate = {
		event_target:paluushia = {
			set_planet_flag = grandbunny_defeated
			change_pc = pc_shrouded
			planet_event = { id = giga_paluush.401 }
		}
	}

	option = {
		name = "giga_paluush.400.a"
		hidden_effect = {
			country_event = { id = giga_paluush.402 days = 10 }
		}
	}
}

planet_event = {
	id = giga_paluush.401
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		if = {
			limit = {
				planet_size > 1
			}
			change_planet_size = -1
		}
		else = {
			remove_planet = yes
		}
		planet_event = { id = giga_paluush.401 days = 3 }
	}
}

country_event = {
	id = giga_paluush.402
	title = "giga_paluush.402.title"
	desc = "giga_paluush.402.desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_shrouded_planet
	is_triggered_only = yes

	option = {
		name = "giga_paluush.402.a"
		add_relic = r_soul_of_grandbunny
		if = {
			limit = {
				NOT = { has_technology = tech_psionic_theory }
			}
			add_research_option = tech_psionic_theory
		}
	}
}

namespace = giga_katzenland

#######################################################
### Katzenland ########################################
#######################################################
# Survey
ship_event = {
	id = giga_katzenland.001
	title = "giga_katzenland.001.name"
	desc = "giga_katzenland.001.desc"
	picture = GFX_evt_relic_world_street
	show_sound = event_ghost_town
	location = from
	is_triggered_only = yes
	trigger = {
		NOT = { has_global_flag = meopa_spawned_as_fe }
		from = { has_planet_flag = katzenland } 
	}

	option = {
		name = "giga_katzenland.001.a"
		hidden_effect = { from = { create_archaeological_site = site_katzenland } }
	}
}

# First dig site
fleet_event = {
	id = giga_katzenland.002
	title = "giga_katzenland.002.name"
	desc = "giga_katzenland.002.desc"
	picture = GFX_evt_landing_ship
	archaeology = yes
	show_sound = event_dig_site
	is_triggered_only = yes

	immediate = {	fromfrom = { set_site_progress_locked = yes } }
	after = {		fromfrom = { set_site_progress_locked = no } }

	option = {
		name = "giga_katzenland.002.a"
		small_artifact_reward = yes
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}

# Second dig site, skeletons
fleet_event = {
	id = giga_katzenland.003
	title = "giga_katzenland.003.name"
	desc = "giga_katzenland.003.desc"
	picture = GFX_evt_resource_cache
	archaeology = yes
	show_sound = event_dig_site
	is_triggered_only = yes

	immediate = {	fromfrom = { set_site_progress_locked = yes } }
	after = {		fromfrom = { set_site_progress_locked = no } }

	option = {
		name = "giga_katzenland.003.a"
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}

# Third dig site, capital
fleet_event = {
	id = giga_katzenland.004
	title = "giga_katzenland.004.name"
	desc = "giga_katzenland.004.desc"
	picture = GFX_evt_relic_world_building
	archaeology = yes
	show_sound = event_dig_site
	is_triggered_only = yes

	immediate = {	fromfrom = { set_site_progress_locked = yes } }
	after = {		fromfrom = { set_site_progress_locked = no } }

	option = {
		name = "giga_katzenland.004.a"
		small_artifact_reward = yes
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
		}
	}
}

# Fourth dig site, Zuspri
fleet_event = {
	id = giga_katzenland.005
	title = "giga_katzenland.005.name"
	desc = "giga_katzenland.005.desc"
	picture = GFX_evt_clones
	archaeology = yes
	show_sound = event_dig_site
	is_triggered_only = yes

	immediate = {	fromfrom = { set_site_progress_locked = yes } }
	after = {		fromfrom = { set_site_progress_locked = no } }

	option = {
		name = "giga_katzenland.005.a"
		owner = {
			add_resource = { rare_crystals = 150 }
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			hidden_effect = { country_event = { id = giga_katzenland.006 } }
		}
	}
}

# Zuspri speaks
country_event = {
	id = giga_katzenland.006
	title = "giga_katzenland.006.name"
	desc = "giga_katzenland.006.desc"
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:ezicaniaportrait.ruler
		room = katzenland_room
	}

	immediate = {
		create_species = {
			name = "Zuspri"
			plural = "Zuspris"
			class = REP
			portrait = rep10
			traits = {
				trait = trait_venerable
				trait = trait_intelligent
				trait = trait_ingenious
				trait = trait_nonadaptive
				trait = trait_sedentary
				trait = trait_cybernetic
			}
			effect = {
				save_global_event_target_as = darkforestezics
			}
		}
		create_country = {
			name = "Zuspri"
			type = faction
			species = last_created_species
			effect = { establish_communications_no_message = root.owner }
		}
		last_created_country = {
			owner_species = { save_event_target_as = ezicania_species }
			save_global_event_target_as = ezicaniaportrait
			create_leader = {
				class = official
				species = event_target:ezicania_species
				name = "Ghuqwy"
				skill = 5
			}
		}
	}

	option = { name = "giga_katzenland.006.a" response_text = "giga_katzenland.006.a.response" is_dialog_only = yes }
	option = { name = "giga_katzenland.006.b" response_text = "giga_katzenland.006.b.response" is_dialog_only = yes }
	option = { name = "giga_katzenland.006.c" response_text = "giga_katzenland.006.c.response" is_dialog_only = yes }
	option = { name = "giga_katzenland.006.d" response_text = "giga_katzenland.006.d.response" is_dialog_only = yes }
	option = { name = "giga_katzenland.006.e" hidden_effect = { country_event = { id = giga_katzenland.007 } } }
}

country_event = {
	id = giga_katzenland.007
	title = "giga_katzenland.007.name"
	desc = "giga_katzenland.007.desc"
	picture = GFX_evt_clones
	show_sound = event_mystic_reveal
	location = from
	is_triggered_only = yes

	# Hire
	option = {
		name = "giga_katzenland.007.a"
		custom_tooltip = "giga_katzenland.007.a.tooltip"
		trigger = {
			NOR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = 3
		}
		hidden_effect = {
			set_country_flag = acquired_darkforest_ezics
			create_leader = {
				class = commander
				gender = female
				species = event_target:ezicania_species
				name = "Ghuqwy"
				skill = 4
				traits = {
					trait = leader_trait_aggressive
					trait = leader_trait_gale_speed
					trait = leader_trait_resilient
					trait = leader_trait_cyborg
				}
				effect = {
					save_global_event_target_as = jeimza
					set_leader_flag = jeimza
				}
			}
			last_created_leader = { set_age = 78 }
		}
	}

	# Dissect
	option = {
		name = "giga_katzenland.007.b"
		trigger = {
			NOR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = 12
		}
	}

	# Kill (Genocidal empires)
	option = {
		name = "giga_katzenland.007.c"
		trigger = {
			has_valid_civic = civic_fanatic_purifiers
			has_valid_civic = civic_hive_devouring_swarm
			has_valid_civic = civic_machine_terminator
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = 12
		}
	}
}

# Fifth dig site, the data caches
fleet_event = {
	id = giga_katzenland.008
	title = "giga_katzenland.008.name"
	desc = "giga_katzenland.008.desc"
	picture = GFX_evt_excavation_team
	archaeology = yes
	show_sound = event_dig_site
	is_triggered_only = yes

	immediate = {	fromfrom = { set_site_progress_locked = yes } }
	after = {		fromfrom = { set_site_progress_locked = no } }

	option = {
		name = "giga_katzenland.008.a"
		owner = {
			small_artifact_reward = yes
			add_resource = { energy = 500 }
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
		}
		hidden_effect = {
			owner = {
				if = {
					limit = {
						NOR = {
							has_global_flag = giga_achievements_disabled
							has_country_flag = giga_achievement_kaiser5
						}
					}
					set_country_flag = giga_achievement_kaiser5
					set_timed_country_flag = { flag = giga_achievement_kaiser5_notification days = 30 }
					giga_achievement_sound = yes
				}
			}
		}
	}
}

# Sixth dig site, the truth
fleet_event = {
	id = giga_katzenland.009
	title = "giga_katzenland.009.name"
	desc = "giga_katzenland.009.desc"
	picture = GFX_evt_nuclear_explosion
	archaeology = yes
	show_sound = event_dig_site
	is_triggered_only = yes

	immediate = {	fromfrom = { set_site_progress_locked = yes } }
	after = {		fromfrom = { set_site_progress_locked = no } }

	option = {
		name = "giga_katzenland.009.a"
		trigger = {
			owner = {
				NOT = { has_country_flag = found_flusion_katzens }
			}
		}
		owner = {
			if = {
				limit = { is_reanimator = yes } #Meopa
				country_event = { id = giga_katzenland.010 days = 90 }
			}
			set_country_flag = found_katzenland_katzens
			small_artifact_reward = yes
			if = {
				limit = {
					NOT = { has_technology = giga_tech_terraform_barren }
				}
				add_research_option = giga_tech_terraform_barren
				add_tech_progress = {
					tech = giga_tech_terraform_barren
					progress = 0.25
				}
			}
			add_modifier = {
				modifier = katzenland_terraform_knowledge
				days = -1
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier5researchreward
				min = @tier5researchmin
				max = @tier5researchmax
			}
		}
	}

	option = {
		name = "giga_katzenland.009.b"
		trigger = {
			owner = {
				has_country_flag = found_flusion_katzens
			}
		}
		owner = {
			if = {
				limit = { is_reanimator = yes } #Meopa
				country_event = { id = giga_katzenland.010 days = 90 }
			}
			hidden_effect = {
				if = {
					limit = {
						has_country_flag = flusion_katzens_nuked
						OR = {
							has_ethic = ethic_militarist
							has_ethic = ethic_fanatic_militarist
							has_ethic = ethic_fanatic_xenophobe
							has_valid_civic = civic_fanatic_purifiers
							has_valid_civic = civic_hive_devouring_swarm
							has_valid_civic = civic_machine_terminator
						}
					}
					country_event = { id = giga_flusion.005 days = 60 random = 10 } #Reverse-engineer Katzen nuking
				}
			}
			country_event = { id = giga_flusion.002 }
			set_country_flag = found_katzenland_katzens
			small_artifact_reward = yes
			if = {
				limit = {
					NOT = { has_technology = giga_tech_terraform_barren }
				}
				add_research_option = giga_tech_terraform_barren
				add_tech_progress = {
					tech = giga_tech_terraform_barren
					progress = 0.25
				}
			}
			add_modifier = {
				modifier = katzenland_terraform_knowledge
				days = -1
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier5researchreward
				min = @tier5researchmin
				max = @tier5researchmax
			}
		}
	}
}

#REANIMATORS REVIVE MEOPA (this is such a meme)
country_event = {
	id = giga_katzenland.010
	title = "giga_katzenland.010.name"
	desc = "giga_katzenland.010.desc"
	is_triggered_only = yes
	picture = GFX_evt_society_research
	show_sound = event_necrophage

	option = {
		name = "giga_katzenland.010.a"
		trigger = {
			is_reanimator = yes
		}
		enable_special_project = {
			name = "REANIMATE_MEOPA"
			location = event_target:katzenland
			owner = root
		}
	}

	option = {
		name = "giga_katzenland.010.b"
	}
}

#HES BACK
country_event = {
	id = giga_katzenland.011
	title = "giga_katzenland.011.name"
	desc = "giga_katzenland.011.desc"
	is_triggered_only = yes
	picture = GFX_evt_conclave
	show_sound = event_necrophage

	immediate = {
		create_species = {
			name = "Revived Katzen"
			plural = "Revived Katzens"
			class = POUCHKINN
			portrait = meoparevived
			effect = {
				save_global_event_target_as = meopaspecies
			}
		}
	}

	option = { # TODO:At some point this should be merged to a new leader class 
		name = "giga_katzenland.011.a"
		custom_tooltip = "giga_katzenland.011.a.tooltip"
		hidden_effect = {
			create_leader = {
				class = commander
				gender = male
				species = event_target:meopaspecies
				name = "Meopa"
				skill = 6
				set_age = 11235
				immortal = yes
				traits = {
					trait = leader_trait_stubborn
					trait = leader_trait_aggressive
					trait = leader_trait_unyielding
					trait = katzen_trait_nukelad
					trait = katzen_trait_meopa_revived
				}
				effect = {
					save_global_event_target_as = meopa_admiral
					set_leader_flag = revived_meopa
				}
			}
			create_leader = {
				class = official
				gender = male
				species = event_target:meopaspecies
				name = "Meopa"
				skill = 6
				set_age = 11235
				immortal = yes
				traits = {
					trait = leader_trait_stubborn
					trait = leader_trait_environmental_engineer
					trait = leader_trait_army_veteran
					trait = katzen_trait_meopa_revived
				}
				effect = {
					save_global_event_target_as = meopa_governor
					set_leader_flag = revived_meopa
				}
			}
		}
	}
}

country_event = {
	id = giga_katzenland.012
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		from = { has_leader_flag = revived_meopa }
		NOT = { has_country_flag = meopa_died }
	}

	immediate = {
		set_country_flag = meopa_died
		every_owned_leader = {
			limit = { has_leader_flag = revived_meopa }
			kill_leader = { show_notification = no }
		}
	}
}

namespace = giga_flusion

#######################################################
### Flusion ###########################################
#######################################################
#Found both Katzenland and Flusion
ship_event = {
	id = giga_flusion.001
	title = "giga_flusion.001.name"
	desc = {
		text = "giga_flusion.001.desc"
		trigger = { NOT = { has_global_flag = meopa_spawned_as_fe } }
	}
	desc = { #Something is missing...
		text = "giga_flusion.001.nokatzens.desc"
		trigger = { has_global_flag = meopa_spawned_as_fe }
	}
	picture = GFX_evt_assembly_fight
	show_sound = event_pre_ftl_civilization
	location = from
	is_triggered_only = yes
	trigger = {
		from = {
			AND = {
				has_planet_flag = gigaflusion
				NOR = {
					is_planet_class = pc_nuked # Not a nuclear war
					is_planet_class = pc_katzenland # Didn't get invaded & nuked
				}
				owner = {
					has_country_flag = flusion_primitives # Didn't get taken over
				}
			}
		}
	}

	immediate = {
		if = {
			limit = { NOT = { has_global_flag = meopa_spawned_as_fe } }
			owner = { set_country_flag = found_flusion_katzens }
		}
	}

	option = {
		name = "giga_flusion.001.a"
		trigger = {
			owner = {
				NOT = { has_country_flag = found_katzenland_katzens }
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}

	option = {
		name = "giga_flusion.001.b"
		trigger = {
			owner = {
				has_country_flag = found_katzenland_katzens
			}
		}
		hidden_effect = {
			owner = {
				country_event = { id = giga_flusion.002 }
			}
		}
	}
}

#Found both Katzenland and Flusion
country_event = {
	id = giga_flusion.002
	title = "giga_flusion.002.name"
	desc = "giga_flusion.002.desc"
	picture = GFX_evt_atmospheric_flight
	show_sound = event_alien_signal
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = found_all_katzens
		}
	}

	option = {
		name = "giga_flusion.002.a"
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier5researchreward
			min = @tier5researchmin
			max = @tier5researchmax
		}
		add_monthly_resource_mult = {
			resource = unity
			value = @tier4unityreward
			min = @tier4unitymin
			max = @tier4unitymax
		}
	}
}

country_event = {
	id = giga_flusion.003
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOR = {
			any_country = { has_country_flag = giga_meopa_fe }
			has_global_flag = katzenartig_imperium_happened
		}
		from = {
			AND = {
				is_country_type = primitive
				has_country_flag = flusion_primitives
			}
		}
	}

	immediate = {
		if = {
			limit = { #50% chance of katzen nuke if not genocidal
				NOR = {
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_hive_devouring_swarm
					has_valid_civic = civic_machine_terminator
				}
			}
			random_list = {
				70 = {
					country_event = { id = giga_flusion.004 }
				}
				30 = {}
			}
		}
		else_if = { #Katzens always nuke if genocidal
			limit = {
				OR = {
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_hive_devouring_swarm
					has_valid_civic = civic_machine_terminator
				}
			}
			country_event = { id = giga_flusion.004 }
		}
	}
}

#Katzens nuke Flusion
country_event = {
	id = giga_flusion.004
	title = "giga_flusion.004.name"
	desc = {
		text = "giga_flusion.004.a.desc"
		trigger = { NOT = { has_country_flag = found_katzenland_katzens } }
	}
	desc = {
		text = "giga_flusion.004.b.desc"
		trigger = { has_country_flag = found_katzenland_katzens }
	}
	picture = GFX_evt_relic_world_street
	show_sound = event_air_raid_siren
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				NOR = {
					has_global_flag = giga_achievements_disabled
					has_country_flag = giga_achievement_kaiser6
				}
			}
			set_country_flag = giga_achievement_kaiser6
			set_timed_country_flag = { flag = giga_achievement_kaiser6_notification days = 30 }
			giga_achievement_sound = yes
		}
		event_target:gigaflusion = {
			if = {
				limit = { has_modifier = katzen_orbital_bombardment_shield }
				remove_modifier = katzen_orbital_bombardment_shield
			}
			set_planet_flag = flusion_katzen_nuked
			change_pc = pc_katzenland
			clear_blockers = yes
			clear_deposits = yes
			add_planet_devastation = -100
			add_deposit = d_bomb_crater
			add_deposit = d_bomb_crater
			add_deposit = d_bomb_crater
			add_deposit = d_bomb_crater
			add_deposit = d_bomb_crater
			add_deposit = d_bomb_crater
			add_deposit = d_bomb_crater
			add_deposit = d_radioactive_wasteland
			add_deposit = d_radioactive_wasteland
			add_deposit = d_radioactive_wasteland
			add_deposit = d_radioactive_wasteland
			add_deposit = d_radioactive_wasteland
			add_deposit = d_searing_desert
			add_deposit = d_searing_desert
			add_deposit = d_tempestous_mountain
			add_deposit = d_geothermal_vent
			add_deposit = d_ore_rich_caverns
			add_deposit = d_rich_mountain
			add_deposit = d_dust_desert
			add_deposit = d_bubbling_swamp
			add_modifier = {
				modifier = "katzenland_planet"
				days = -1
			}
			set_planet_entity = {
				entity = flusion_planet_deserted_entity
			}
			while = {
				count = 3
				remove_district = district_generator
			}
			while = {
				count = 3
				remove_district = district_mining
			}
			while = {
				count = 3
				remove_district = district_city
			}
			while = {
				count = 3
				remove_district = district_farming
			}
			while = {
				count = 28
				random_owned_pop = { kill_pop = yes }
			}
		}
	}

	option = {
		name = "giga_flusion.004.a"
		trigger = {
			NOT = { has_country_flag = found_katzenland_katzens }
		}
		hidden_effect = {
			set_country_flag = flusion_katzens_nuked
		}
	}

	option = {
		name = "giga_flusion.004.b"
		trigger = {
			has_country_flag = found_katzenland_katzens
		}
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_ethic = ethic_militarist
						has_ethic = ethic_fanatic_militarist
						has_ethic = ethic_fanatic_xenophobe
						has_valid_civic = civic_fanatic_purifiers
						has_valid_civic = civic_hive_devouring_swarm
						has_valid_civic = civic_machine_terminator
					}
				}
				country_event = { id = giga_flusion.005 days = 60 random = 10 } #Reverse-engineer Katzen nuking
			}
		}
	}
}

#Reverse-Engineer Katzen Nukes
country_event = {
	id = giga_flusion.005
	title = "giga_flusion.005.name"
	desc = "giga_flusion.005.desc"

	picture = GFX_evt_relic_world_street
	show_sound = event_radio_chatter
	is_triggered_only = yes
	immediate = {
		set_country_flag = katzen_atomic_munitions_possible
	}
	option = {
		name = "giga_flusion.005.a"
		add_research_option = tech_katzen_atomic_munitions
		add_tech_progress = {
			tech = tech_katzen_atomic_munitions
			progress = 0.25
		}
		hidden_effect = {
			if = {
				limit = {
					NOR = {
						has_global_flag = giga_achievements_disabled
						has_country_flag = giga_achievement_kaiser4
					}
				}
				set_country_flag = giga_achievement_kaiser4
				set_timed_country_flag = { flag = giga_achievement_kaiser4_notification days = 30 }
				giga_achievement_sound = yes
			}
		}
	}

	option = {
		name = "giga_flusion.005.b"
		remove_country_flag = katzen_atomic_munitions_possible
	}
}

#Pre-FTL Flusion Health
event = {
	id = giga_flusion.100
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_global_flag = katzenartig_imperium_happened #Won't happen if Katzenartig got to space
		}
		exists = event_target:gigaflusion
		event_target:gigaflusion = {
			AND = {
				has_planet_flag = gigaflusion
				exists = owner
				owner = {
					NOT = {
						has_country_flag = flusion_primitives #Not owned by primitives anymore
					}
				}
				NOT = {
					has_planet_flag = flusion_nuked #Didn't already apply it
				}
			}
		}
	}

	immediate = {
		event_target:gigaflusion = {
			remove_planet_flag = kaiser_wc
			if = {
				limit = {
					has_modifier = katzen_orbital_bombardment_shield
				}
				remove_modifier = katzen_orbital_bombardment_shield
			}

			solar_system = {
				every_system_planet = {
					limit = {
						has_planet_flag = muno_project_event
					}
					remove_planet_flag = muno_project_event
				}

				if = {
					limit = { #Flusion got nuked
						event_target:gigaflusion = {
							has_planet_flag = gigaflusion
							is_planet_class = pc_nuked
						}
					}
					every_megastructure = { #Destroy the project
						limit = {
							is_megastructure_type = flusion_attack_moon_0
						}
						delete_megastructure = THIS
					}
				}
				else_if = { #Flusion got invaded and Katzens nuked it
					limit = {
						event_target:gigaflusion = {
							has_planet_flag = gigaflusion
							is_planet_class = pc_katzenland
						}
					}
					event_target:gigaflusion = { set_planet_flag = flusion_nuked }
					remove_modifier = culture_shock_machine_age
					remove_modifier = culture_shock_atomic_age
					remove_modifier = culture_shock_early_space_age
					every_megastructure = { #Destroy the project
						limit = {
							is_megastructure_type = flusion_attack_moon_0
						}
						delete_megastructure = THIS
					}
				}
				else = { # Flusion got destroyed but is none of the above
					event_target:gigaflusion = { set_planet_flag = flusion_nuked }
					every_megastructure = { #Destroy the project
						limit = {
							is_megastructure_type = flusion_attack_moon_0
						}
						delete_megastructure = THIS
					}
				}
			}
		}

		every_country = { #Remove the invasion modifier
			limit = {
				has_modifier = planning_flusionian_invasion
			}
			remove_modifier = planning_flusionian_invasion
		}
		every_country = { #Remove the invasion modifier
			limit = {
				has_country_flag = planning_flusionfall
			}
			remove_country_flag = planning_flusionfall
			country_event = { id = giga_flusion.333 }
		}
	}
}

#Apply Katzen Engineering to a planet
planet_event = {
	id = giga_flusion.200
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_orbital_bombardment_stance = katzen
		is_planet_habitable = yes
	}

	immediate = {
		owner = {
			add_static_war_exhaustion = {
				attacker = from
				location = root
				value_for_planet_destruction = 0.5
			}
			set_country_flag = planet_got_katzenland
			add_opinion_modifier = { who = from modifier = opinion_katzenland_my_planet }
			save_event_target_as = empire_got_katzenland
		}
		every_country = { #Apply opinion modifiers
			limit = {
				NOT = { is_in_federation_with = from }
				NOT = { is_subject = yes }
				NOT = { has_ethic = ethic_fanatic_xenophobe } #Xenophobes don't care
				ehof_default_country = yes
				NOT = { has_country_flag = planet_got_katzenland }
				NOR = { #Genocidal empires don't care
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_hive_devouring_swarm
					has_valid_civic = civic_machine_terminator
					event_target:empire_got_katzenland = { has_valid_civic = civic_fanatic_purifiers }
					event_target:empire_got_katzenland = { has_valid_civic = civic_hive_devouring_swarm }
					event_target:empire_got_katzenland = { has_valid_civic = civic_machine_terminator }
				}
				#Only care if its a "normal" empire
				event_target:empire_got_katzenland = {
					OR = {
						ehof_default_country = yes
						is_country_type = primitive
					}
				}
			}
			add_opinion_modifier = { who = from modifier = opinion_katzenland_a_planet }
		}
		event_target:empire_got_katzenland = {
			remove_country_flag = planet_got_katzenland
		}
		if = {
			limit = {
				habitable_structure = no
				NOR = {
					is_planet_class = pc_ringworld_habitable 
					is_planet_class = pc_ringworld_machine
					is_planet_class = pc_ringworld_hive
					is_planet_class = pc_ringworld_city
				}
			}
			from = { country_event = { id = giga_flusion.201 } }
			remove_all_buildings = yes
			katzenland_clear_districts = yes
			clear_blockers = yes
			clear_deposits = yes
			add_modifier = {
				modifier = "irradiated_desert_planet"
				days = -1
			}
			while = {
				count = 12
				create_katzenland_deposits = yes
			}
			while = {
				count = 28
				random_owned_pop = { kill_pop = yes }
			}
			remove_modifier = "natural_beauty"
			remove_modifier = "atmospheric_aphrodisiac"
			remove_modifier = "atmospheric_hallucinogen"
			remove_modifier = "lush_planet"
			remove_modifier = "dangerous_wildlife"
			destroy_colony = yes
			change_pc = pc_barren
			change_pc = pc_katzenland
		}
		else_if = {
			limit = {
				OR = {
					is_planet_class = pc_ringworld_habitable 
					is_planet_class = pc_ringworld_machine
					is_planet_class = pc_ringworld_hive
					is_planet_class = pc_ringworld_city
				}
			}
			from = { country_event = { id = giga_flusion.201 } }
			remove_all_buildings = yes
			katzenland_clear_districts = yes
			clear_blockers = yes
			clear_deposits = yes
			destroy_colony = yes
			change_pc = pc_ringworld_habitable_damaged
		}
		else_if = {
			limit = {
				OR = {
					is_planet_class = pc_gigaorbital_ring
					is_planet_class = pc_habitat
					is_planet_class = pc_giga_elysium
				}
			}
			remove_planet = yes
		}
		else_if = {
			limit = {
				habitable_structure = yes
				NOT = { is_planet_class = pc_habitat }
			}
			while = {
				count = 28
				random_owned_pop = { kill_pop = yes }
			}
			remove_all_buildings = yes
			katzenland_clear_districts = yes
			destroy_colony = yes
		}
		set_planet_flag = katzen_nuked
	}
}

country_event = {
	id = giga_flusion.201
	title = "giga_flusion.201.name"
	desc = "giga_flusion.201.desc"
	picture = GFX_evt_relic_world_street
	show_sound = event_ghost_town
	location = from
	is_triggered_only = yes

	option = {
		name = "giga_flusion.201.a"
		add_monthly_resource_mult = {
			resource = unity
			value = @tier3unityreward
			min = @tier3unitymin
			max = @tier3unitymax
		}
	}
}

planet_event = { #trigger the Mondkanone immediately if guaranteed
	id = giga_flusion.299
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		owner = {
			is_country_type = primitive
			has_country_flag = fusion_age
		}
		NOT = { has_planet_flag = muno_project_event }
		NOT = { has_global_flag = flusion_muno_event_happened }
		event_target:gigamuno = {
			AND = {
				exists = THIS
				NOR = {
					has_planet_flag = has_megastructure
					is_colony = yes
				}
			}
		}
	}

	immediate = {
		set_global_flag = flusion_muno_event_happened
		solar_system = {
			spawn_megastructure = {
				type = "flusion_attack_moon_0"
				coords_from = event_target:gigamuno
				owner = event_target:flusion_primitives_country
			}
		}
		event_target:gigamuno = {
			giga_set_has_mega_flag = yes
		}
		event_target:flusion_primitives_country = {
			random_owned_megastructure = {
				limit = {
					is_megastructure_type = flusion_attack_moon_0
				}
				upgrade_megastructure_to = flusion_attack_moon_1
				add_modifier = {
					modifier = "katzen_mega_build_speed_instant"
				}
			}
		}
		set_planet_flag = muno_project_event
		if = { #Make non-hostile
			limit = {
				any_country = {
					is_hostile_to = event_target:flusion_primitives_country
				}
			}
			every_country = {
				set_faction_hostility = {
					target = event_target:flusion_primitives_country
					set_hostile = no
				}
			}
		}
	}
}

#Flusion Observation Post
#Something is going on on Muno
planet_event = {
	id = giga_flusion.300
	hide_window = yes

	mean_time_to_happen = {
		months = 60 #CHANGE BACK TO 60
	}

	trigger = {
		NOT = { has_global_flag = meopa_spawned_as_fe }
		NOT = { has_global_flag = warmoon_disabled }
		solar_system = {
			exists = owner
			owner = { ehof_default_country = yes }
		}
		exists = owner
		owner = {
			is_country_type = primitive
			has_country_flag = fusion_age
		}
		NOT = { has_planet_flag = muno_project_event }
		NOT = { has_global_flag = flusion_muno_event_happened }
		event_target:gigamuno = {
			AND = {
				exists = THIS
				NOR = {
					has_planet_flag = has_megastructure
					is_colony = yes
				}
			}
		}
	}

	immediate = {
		set_global_flag = flusion_muno_event_happened
		solar_system = {
			spawn_megastructure = {
				type = "flusion_attack_moon_0"
				coords_from = event_target:gigamuno
				owner = event_target:flusion_primitives_country
			}
			owner = {
				country_event = { id = giga_flusion.301 }
				save_global_event_target_as = flusion_muno_system_owner
				set_country_flag = flusion_first_contact
			}
		}
		event_target:gigamuno = {
			giga_set_has_mega_flag = yes
		}
		event_target:flusion_primitives_country = {
			random_owned_megastructure = {
				limit = {
					is_megastructure_type = flusion_attack_moon_0
				}
				upgrade_megastructure_to = flusion_attack_moon_1
			}
		}
		set_planet_flag = muno_project_event
		if = { #Make non-hostile
			limit = {
				any_country = {
					is_hostile_to = event_target:flusion_primitives_country
				}
			}
			every_country = {
				set_faction_hostility = {
					target = event_target:flusion_primitives_country
					set_hostile = no
				}
			}
		}
	}
}

event = { #This event triggers if the empire involved in the Muno event chain becomes hostile to Flusion, locking out some options
	id = giga_flusion.3000
	hide_window = yes
	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		exists = event_target:flusion_primitives_country
		exists = event_target:flusion_muno_system_owner
		event_target:flusion_primitives_country = {
			is_hostile = event_target:flusion_muno_system_owner
		}
		OR = {
			event_target:gigamuno = {
				has_planet_flag = muno_project_event
			}
			any_galaxy_fleet = {
				any_owned_ship = {
					is_ship_size = giga_war_moon_flusion
				}
			}
		}
	}

	immediate = {
		event_target:flusion_muno_system_owner = { #Wipe all positive flags with Flusion
			remove_country_flag = contributed_muno_project_1
			remove_country_flag = contributed_muno_project_2
			remove_country_flag = friendly_to_flusion
			set_country_flag = hostile_to_flusion
			if = { #Invading Flusion after contacting them, but not picking the direct invasion options
				limit = {
					NOT = {
						event_target:flusion_primitives_country = {
							has_country_flag = flusion_mobilized
						}
					}
					has_country_flag = contacted_flusion

				}
				country_event = { id = giga_flusion.3001 days = 260 } #Flusion mobilizes!
			}
		}
	}
}

country_event = { #Flusion mobilizes!
	id = giga_flusion.3001
	title = "giga_flusion.3001.name"
	desc = "giga_flusion.3001.desc"
	picture = GFX_evt_ground_combat
	show_sound = event_air_raid_siren
	location = from
	is_triggered_only = yes

	trigger = {
		event_target:gigaflusion = {
			AND = {
				NOT = {
					has_country_flag = kaiser_dead
				}
				owner = {
					is_country_type = primitive
				}
			}
		}
	}

	option = {
		name = "giga_flusion.3001.a"
		event_target:gigaflusion = {
			add_modifier = {
				modifier = katzen_orbital_bombardment_shield
				days = 3600
			}
			while = { count = 1		create_army = { name = NAME_katzenarmee_1				owner = event_target:flusion_primitives_country species = event_target:flusion_katzens type = "flusion_army" } }
			while = { count = 1		create_army = { name = NAME_katzenarmee_2				owner = event_target:flusion_primitives_country species = event_target:flusion_katzens type = "flusion_army" } }
		}
		hidden_effect = {
			event_target:flusion_primitives_country = {
				set_country_flag = flusion_mobilized
			}
		}
	}

	option = {
		name = "giga_flusion.3001.b" #If superweapons are invented
		trigger = {
			OR = {
				has_ascension_perk = ap_colossus
				has_technology = giga_tech_ndb_4
				has_technology = giga_tech_quasi_stellar_6
			}
		}
		event_target:gigaflusion = {
			add_modifier = {
				modifier = katzen_orbital_bombardment_shield
				days = 3600
			}
			while = { count = 1		create_army = { name = NAME_katzenarmee_1				owner = last_created_country species = event_target:flusion_katzens type = "flusion_army" } }
			while = { count = 1		create_army = { name = NAME_katzenarmee_2				owner = last_created_country species = event_target:flusion_katzens type = "flusion_army" } }
		}
		hidden_effect = {
			event_target:flusion_primitives_country = {
				set_country_flag = flusion_mobilized
			}
		}
	}
}

country_event = {
	id = giga_flusion.301
	title = "giga_flusion.301.name"
	desc = "giga_flusion.301.desc"
	picture = GFX_evt_satellite_in_orbit
	show_sound = event_radio_chatter
	location = from
	is_triggered_only = yes

	option = {
		name = "giga_flusion.301.a" #Let it be
	}

	option = {
		name = "giga_flusion.301.b" #Find out what it is
		trigger = {
			is_ai = no
		}
		event_target:gigamuno = {
			enable_special_project = {
				name = "FIND_OUT_FLUSION_GUN_PROJECT"
				location = this
				owner = root
			}
		}
		hidden_effect = {
			set_country_flag = investigating_muno_attack_moon
		}
	}

	option = {
		name = "giga_flusion.301.c" #Bomb the moon
		trigger = {
			is_ai = no
		}
		hidden_effect = {
			random_list = {
				50 = { #Project is blown up
					country_event = { id = giga_flusion.330 days = 30 }
					set_country_flag = hostile_to_flusion #To mark that the player empire is aligned against Flusion
				}
				50 = { #Demolition fails
					country_event = { id = giga_flusion.331 days = 30 }
				}
			}
		}
	}
}

country_event = {
	id = giga_flusion.320
	title = "giga_flusion.320.name"
	desc = "giga_flusion.320.desc"
	picture = GFX_evt_landing_ship_2
	show_sound = event_mystic_reveal
	location = from
	is_triggered_only = yes

	immediate = {
		remove_country_flag = investigating_muno_attack_moon
		set_country_flag = knows_muno_attack_moon
	}

	option = {
		name = "giga_flusion.320.a" #Contact them
		trigger = {
			NOR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
				has_country_flag = hostile_to_flusion
			}
		}
		hidden_effect = {
			country_event = { id = giga_flusion.321 days = 15 }
		}
	}

	option = {
		name = "giga_flusion.320.b" #Let it be
	}

	option = {
		name = "giga_flusion.320.c" #Destroy it
		hidden_effect = {
			random_list = {
				50 = { #Project is blown up
					country_event = { id = giga_flusion.330 days = 30 }
					set_country_flag = hostile_to_flusion #To mark that the player empire is aligned against Flusion
				}
				50 = { #Demolition fails
					country_event = { id = giga_flusion.331 days = 30 }
				}
			}
		}
	}
}

country_event = {
	id = giga_flusion.321
	title = "giga_flusion.321.name"
	desc = "giga_flusion.321.desc"
	picture = GFX_evt_partition
	show_sound = event_radio_chatter
	location = from
	is_triggered_only = yes

	option = {
		name = "giga_flusion.321.a"
		hidden_effect = {
			country_event = { id = giga_flusion.322 }
			set_country_flag = contacted_flusion
		}
	}
}

#Contact with Mr. Douclaw
country_event = {
	id = giga_flusion.322
	title = "giga_flusion.322.name"
	desc = "giga_flusion.322.desc"
	location = from
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:flusion_douclaw
		room = "flusion_katown_room"
	}

	option = {
		name = "giga_flusion.322.a" #Ask about him!
		response_text = "giga_flusion.322.a.response"
		is_dialog_only = yes
	}

	option = {
		name = "giga_flusion.322.b" #Ask about Kaiser!
		response_text = "giga_flusion.322.b.response"
		is_dialog_only = yes
	}

	option = {
		name = "giga_flusion.322.c" #Ask about other nations!
		response_text = "giga_flusion.322.c.response"
		is_dialog_only = yes
	}

	option = {
		name = "giga_flusion.322.d" #To the point.
		hidden_effect = {
			country_event = { id = giga_flusion.323 }
		}
	}
}

country_event = {
	id = giga_flusion.323
	title = "giga_flusion.323.name"
	desc = "giga_flusion.323.desc"
	location = from
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:flusion_douclaw
		room = "flusion_katown_room"
	}

	option = {
		name = "giga_flusion.323.a" #Cease the project at once!
		custom_tooltip = "giga_flusion.323.a.tooltip"
		response_text = "giga_flusion.323.a.response"
		hidden_effect = {
			set_country_flag = hostile_to_flusion #The player empire is now aligned against Flusion
			random_list = {
				80 = {
					country_event = { id = giga_flusion.3234 days = 10 } #Flusion refuses
				}
				20 = {
					country_event = { id = giga_flusion.3235 days = 10 } #Flusion submits, Kaiser dies :(
				}
			}
		}
	}

	option = {
		name = "giga_flusion.323.b" #We wish to help. Give some alloys, project goes faster.
		custom_tooltip = "giga_flusion.323.b.tooltip"
		allow = {
			resource_stockpile_compare = {
				resource = alloys
				value >= 100
			}
		}
		hidden_effect = {
			country_event = { id = giga_flusion.3231 }
		}
	}

	option = {
		name = "giga_flusion.323.d" #Can we have the plans?
		custom_tooltip = "giga_flusion.323.d.tooltip"
		response_text = "giga_flusion.323.d.response"
		hidden_effect = {
			random_list = {
				70 = { #Kaiser accepts and demands compensation
					country_event = { id = giga_flusion.3232 days = 10 }
				}
				30 = { #Kaiser refuses
					country_event = { id = giga_flusion.3232 days = 10 }
				}
			}
		}
	}

	option = {
		name = "giga_flusion.323.c" #We don't wanna do anything
		custom_tooltip = "giga_flusion.323.c.tooltip"
		response_text = "giga_flusion.323.c.response"
	}
}

#Flusionians unwilling to back down.
country_event = {
	id = giga_flusion.3234
	title = "giga_flusion.3234.name"
	desc = "giga_flusion.3234.desc"
	location = from
	picture = GFX_evt_civil_action
	show_sound = event_radio_chatter

	is_triggered_only = yes

	immediate = {
		country_event = { id = giga_flusion.3001 days = 120 } #Flusion mobilizes
	}

	option = { #Invasion!
		name = "giga_flusion.3234.a"
		custom_tooltip = "giga_flusion.3233.c.tooltip"
		add_modifier = {
			modifier = planning_flusionian_invasion
			days = 3600
		}
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 100
			}
			resource_stockpile_compare = {
				resource = energy
				value >= 1000
			}
		}
		add_resource = {
			influence = -100
			energy = -1000
		}
		hidden_effect = {
			set_country_flag = planning_flusionfall
		}
	}

	option = { #Forget it!
		name = "giga_flusion.3234.b"
	}
}

#Flusionians submit (unlikely)
country_event = {
	id = giga_flusion.3235
	title = "giga_flusion.3235.name"
	desc = "giga_flusion.3235.desc"
	location = from
	picture = GFX_evt_fleet_from_surface
	show_sound = event_administrative_work

	is_triggered_only = yes

	option = { #Good
		name = "giga_flusion.3235.a"
		add_resource = {
			energy = 1000
			alloys = 500
		}
		hidden_effect = {
			event_target:flusion_primitives_country = {
				set_country_flag = kaiser_dead #:(
			}
			event_target:gigaflusion = {
				solar_system = {
					every_megastructure = { #Destroy the project
						limit = { is_megastructure_type = flusion_attack_moon_0 }
						delete_megastructure = THIS
					}
					every_system_planet = {
						limit = { has_planet_flag = muno_project_event }
						remove_planet_flag = muno_project_event
					}
				}
			}
		}
	}
}

#Kaiser demands compensation
country_event = {
	id = giga_flusion.3232
	title = "giga_flusion.3232.name"
	desc = "giga_flusion.3232.desc"
	location = from
	picture = GFX_evt_analyzing_artifacts
	show_sound = event_administrative_work

	is_triggered_only = yes

	option = { #Sure
		name = "giga_flusion.3232.a"
		custom_tooltip = "giga_flusion.3232.a.tooltip"
		hidden_effect = {
			set_country_flag = contributed_muno_project_1
			set_country_flag = friendly_to_flusion
			random_megastructure = {
				limit = {
					is_megastructure_type = flusion_attack_moon_0
				}
				add_modifier = {
					modifier = "mega_build_speed_2"
				}
			}
		}
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value >= 3000
			}
		}
		add_resource = {
			energy = -3000
		}
		if = {
			limit = {
				NOT = { has_technology = tech_mass_accelerator_1 }
			}
			add_research_option = tech_mass_accelerator_1
			add_tech_progress = {
				tech = tech_mass_accelerator_1
				progress = 0.25
			}
		}
		else_if = {
			limit = {
				has_technology = tech_mass_accelerator_1
				NOT = { has_technology = tech_mass_accelerator_2 }
			}
			add_research_option = tech_mass_accelerator_2
			add_tech_progress = {
				tech = tech_mass_accelerator_2
				progress = 0.25
			}
		}
		else = {
			add_resource = {
				engineering_research = 7500
			}
		}
	}

	option = { #whatever
		name = "giga_flusion.3232.b"
	}

	option = { #Stupid Kaiser!!
		name = "giga_flusion.3232.c"
		custom_tooltip = "giga_flusion.3233.c.tooltip"
		add_modifier = {
			modifier = planning_flusionian_invasion
			days = 3600
		}
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 100
			}
			resource_stockpile_compare = {
				resource = energy
				value >= 1000
			}
		}
		add_resource = {
			influence = -100
			energy = -1000
		}
		hidden_effect = {
			set_country_flag = hostile_to_flusion
			set_country_flag = planning_flusionfall
			country_event = { id = giga_flusion.3001 days = 120 } #Flusion mobilizes
		}
	}
}

#Kaiser refuses
country_event = {
	id = giga_flusion.3233
	title = "giga_flusion.3233.name"
	desc = "giga_flusion.3233.desc"
	location = from
	picture = GFX_evt_civil_action
	show_sound = event_administrative_work

	is_triggered_only = yes

	option = { #whatever
		name = "giga_flusion.3233.a"
	}

	option = { #Stupid Kaiser!!
		name = "giga_flusion.3233.b"
		custom_tooltip = "giga_flusion.3233.c.tooltip"
		add_modifier = {
			modifier = planning_flusionian_invasion
			days = 3600
		}
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 100
			}
			resource_stockpile_compare = {
				resource = energy
				value >= 1000
			}
		}
		add_resource = {
			influence = -100
			energy = -1000
		}
		hidden_effect = {
			set_country_flag = hostile_to_flusion
			set_country_flag = planning_flusionfall
			country_event = { id = giga_flusion.3001 days = 120 } #Flusion mobilizes
		}
	}
}

#Give resources
country_event = {
	id = giga_flusion.3231
	title = "giga_flusion.3231.name"
	desc = "giga_flusion.3231.desc"
	location = from
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:flusion_douclaw
		room = "flusion_katown_room"
	}

	option = { #contribute a bit
		name = "giga_flusion.3231.a"
		add_resource = {
			alloys = -100
		}
		custom_tooltip = "giga_flusion.3231.a.tooltip"
		response_text = "giga_flusion.3231.a.response"
		allow = {
			resource_stockpile_compare = {
				resource = alloys
				value >= 100
			}
		}
		hidden_effect = {
			random_megastructure = {
				limit = {
					is_megastructure_type = flusion_attack_moon_0
				}
				add_modifier = {
					modifier = "mega_build_speed_1"
				}
			}
		}
	}

	option = { #contribute
		name = "giga_flusion.3231.b"
		add_resource = {
			alloys = -500
		}
		custom_tooltip = "giga_flusion.3231.b.tooltip"
		response_text = "giga_flusion.3231.b.response"
		allow = {
			resource_stockpile_compare = {
				resource = alloys
				value >= 500
			}
		}
		hidden_effect = {
			random_megastructure = {
				limit = {
					is_megastructure_type = flusion_attack_moon_0
				}
				add_modifier = {
					modifier = "mega_build_speed_2"
				}
			}
		}
	}

	option = { #contribute a lot
		name = "giga_flusion.3231.c"
		add_resource = {
			alloys = -1000
		}
		custom_tooltip = "giga_flusion.3231.c.tooltip"
		response_text = "giga_flusion.3231.c.response"
		allow = {
			resource_stockpile_compare = {
				resource = alloys
				value >= 1000
			}
		}
		hidden_effect = {
			set_country_flag = contributed_muno_project_1
			set_country_flag = friendly_to_flusion
			random_megastructure = {
				limit = {
					is_megastructure_type = flusion_attack_moon_0
				}
				add_modifier = {
					modifier = "mega_build_speed_3"
				}
			}
		}
	}

	option = { #contribute the FULL PRICE
		name = "giga_flusion.3231.d"
		add_resource = {
			alloys = -2250
		}
		custom_tooltip = "giga_flusion.3231.d.tooltip"
		response_text = "giga_flusion.3231.d.response"
		allow = {
			resource_stockpile_compare = {
				resource = alloys
				value >= 2250
			}
		}
		hidden_effect = {
			set_country_flag = contributed_muno_project_2
			set_country_flag = friendly_to_flusion
			random_megastructure = {
				limit = {
					is_megastructure_type = flusion_attack_moon_0
				}
				add_modifier = {
					modifier = "mega_build_speed_4"
				}
			}
		}
	}


	option = {
		name = "giga_flusion.3231.e"
		custom_tooltip = "giga_flusion.3231.e.tooltip"
		response_text = "giga_flusion.3231.e.response"
	}
}

country_event = { #Demolition succesful
	id = giga_flusion.330
	title = "giga_flusion.330.name"
	desc = "giga_flusion.330.desc"
	picture = GFX_evt_large_explosion
	show_sound = event_structural_collapse
	location = from
	is_triggered_only = yes

	immediate = {
		random_megastructure = { #Destroy the project
			limit = {
				is_megastructure_type = flusion_attack_moon_0
			}
			delete_megastructure = THIS
		}
		event_target:gigamuno = {
			giga_clear_has_mega_flag = yes
		}
	}

	option = {
		name = "giga_flusion.330.a"
		add_resource = {
			influence = 50
			alloys = 1500
		}
		if = {
			limit = {
				has_ancrel = yes
			}
			add_resource = {
				minor_artifacts = 100
			}
		}
		hidden_effect = {
			random_list = { #Kaiser blames everyone, nuclear war ensues (typical Kaiser)
				50 = {
					country_event = { id = giga_flusion.3301 days = 360 random = 30 }
				}
				50 = {}
			}
		}
	}
}

country_event = { #Nuclear War
	id = giga_flusion.3301
	title = "giga_flusion.3301.name"
	desc = "giga_flusion.3301.desc"
	picture = GFX_evt_nuclear_explosion
	show_sound = event_super_explosion
	location = from
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				NOR = {
					has_global_flag = giga_achievements_disabled
					has_country_flag = giga_achievement_kaiser6
				}
			}
			set_country_flag = giga_achievement_kaiser6
			set_timed_country_flag = { flag = giga_achievement_kaiser6_notification days = 30 }
			giga_achievement_sound = yes
		}
		event_target:gigaflusion = {
			nuke_pre_ftls_effect = yes
			set_planet_entity = {
				entity = flusion_planet_nuked_entity
			}
			set_planet_flag = flusion_nuked
			observation_outpost = {
				dismantle = yes
			}
		}
		random_megastructure = { #Destroy the project
			limit = {
				is_megastructure_type = flusion_attack_moon_0
			}
			delete_megastructure = THIS
		}
	}

	option = {
		name = "giga_flusion.3301.a" #Counts as Katzens getting nuked
		trigger = {
			NOT = { has_country_flag = found_katzenland_katzens }
		}
		hidden_effect = {
			set_country_flag = flusion_katzens_nuked
		}
	}

	option = {
		name = "giga_flusion.3301.b" #Counts as Katzens getting nuked
		trigger = {
			has_country_flag = found_katzenland_katzens
		}
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_ethic = ethic_militarist
						has_ethic = ethic_fanatic_militarist
						has_ethic = ethic_fanatic_xenophobe
						has_valid_civic = civic_fanatic_purifiers
						has_valid_civic = civic_hive_devouring_swarm
						has_valid_civic = civic_machine_terminator
					}
				}
				country_event = { id = giga_flusion.005 days = 60 random = 10 } #Reverse-engineer Katzen nuking
			}
		}
	}
}

country_event = { #Demolition failed
	id = giga_flusion.331
	title = "giga_flusion.331.name"
	desc = "giga_flusion.331.desc"
	picture = GFX_evt_ship_in_orbit_3
	show_sound = event_air_raid_siren
	location = from
	is_triggered_only = yes

	option = { #Let them be
		name = "giga_flusion.331.a"
	}

	option = { #Try to find out
		name = "giga_flusion.331.b"
		trigger = {
			NOT = {
				has_country_flag = knows_muno_attack_moon
			}
		}
	}

	option = { #Plan an invasion
		name = "giga_flusion.331.c"
		custom_tooltip = "giga_flusion.331.c.tooltip"
		add_modifier = {
			modifier = planning_flusionian_invasion
			days = 3600
		}
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 100
			}
			resource_stockpile_compare = {
				resource = energy
				value >= 1000
			}
		}
		add_resource = {
			influence = -100
			energy = -1000
		}
		hidden_effect = {
			set_country_flag = planning_flusionfall
		}
	}
}


country_event = { #Invasion failed
	id = giga_flusion.332
	title = "giga_flusion.332.name"
	desc = "giga_flusion.332.desc"
	picture = GFX_evt_burning_settlement
	show_sound = event_planetary_riot
	location = from
	is_triggered_only = yes

	trigger = {
		event_target:gigaflusion = {
			owner = {
				is_country_type = primitive
			}
		}
	}
	option = { #Rats!
		name = "giga_flusion.332.a"
		add_modifier = {
			modifier = failed_flusionian_invasion
			days = 720
		}
		hidden_effect = {
			if = {
				limit = {
					has_modifier = planning_flusionian_invasion
				}
				remove_modifier = planning_flusionian_invasion
			}
			remove_country_flag = planning_flusionfall
		}
	}
}

country_event = { #Invasion successful!
	id = giga_flusion.333
	title = "giga_flusion.333.name"
	desc = {
		text = "giga_flusion.333.a.desc"
		trigger = { NOT = { has_country_flag = knows_muno_attack_moon } }
	}
	desc = {
		text = "giga_flusion.333.b.desc"
		trigger = { has_country_flag = knows_muno_attack_moon }
	}
	picture = GFX_evt_ground_combat
	show_sound = event_ground_battle
	location = from
	is_triggered_only = yes

	immediate = {
		event_target:gigaflusion = {
			if = {
				limit = { has_modifier = katzen_orbital_bombardment_shield }
				remove_modifier = katzen_orbital_bombardment_shield
			}
			solar_system = {
				every_megastructure = { # destroy the project
					limit = { is_megastructure_type = flusion_attack_moon_0 }
					delete_megastructure = THIS
				}
			}
		}
	}

	option = { #Huzzah!
		name = "giga_flusion.333.a"
		remove_modifier = planning_flusionian_invasion
		add_resource = {
			influence = 200
			energy = 1500
			alloys = 1500
		}
		small_artifact_reward = yes
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier5researchreward
				min = @tier5researchmin
				max = @tier5researchmax
			}
		}
		hidden_effect = {
			remove_country_flag = planning_flusionfall
		}
	}
}

###PROJECT COMPLETE###
country_event = {
	id = giga_flusion.400
	title = "giga_flusion.400.name"
	desc = {
		text = "giga_flusion.400.a.desc"
		trigger = { NOT = { has_country_flag = knows_muno_attack_moon } }
	}
	desc = {
		text = "giga_flusion.400.b.desc"
		trigger = { has_country_flag = knows_muno_attack_moon }
	}
	picture = GFX_evt_ship_travel
	show_sound = event_ringworld_build_complete
	location = from
	is_triggered_only = yes

	immediate = {
		set_country_flag = knows_muno_attack_moon
		if = {
			limit = {
				has_modifier = planning_flusionian_invasion #Invasion failed
			}
			country_event = { id = giga_flusion.332 days = 10 }
		}
		if = {
			limit = {
				has_special_project = FIND_OUT_FLUSION_GUN_PROJECT
			}
			abort_special_project = {
				type = FIND_OUT_FLUSION_GUN_PROJECT
			}
		}
		# event_target:gigaflusion = { #Kaiser WC
		# 	planet_event = { id = giga_katzen.001 days = 30 random = 10 } #CHANGE TO 35 YEARS AND 5 YEARS
		# }
	}

	option = { #Yay!
		name = "giga_flusion.400.a"
		trigger = {
			has_country_flag = friendly_to_flusion
		}
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_country_flag = contributed_muno_project_1
						has_country_flag = contributed_muno_project_2
					}
				}
				country_event = { id = giga_flusion.402 days = 3600 random = 360 }
			}
		}
	}

	option = { #Nay!
		name = "giga_flusion.400.b"
		trigger = {
			has_country_flag = hostile_to_flusion
		}
	}

	option = { #May!
		name = "giga_flusion.400.c"
		trigger = {
			NOR = {
				has_country_flag = hostile_to_flusion
				has_country_flag = friendly_to_flusion
			}
		}
	}
}

country_event = {
	id = giga_flusion.401
	title = "giga_flusion.401.name"
	desc = "giga_flusion.401.desc"
	picture = GFX_evt_ship_travel
	show_sound = event_ringworld_build_complete
	location = from
	is_triggered_only = yes

	immediate = {
		set_country_flag = knows_muno_attack_moon
	}

	option = { #Yay!
		name = "giga_flusion.401.a"
		trigger = {
			NOR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
	}

	option = { #Nay!
		name = "giga_flusion.401.b"
		trigger = {
			OR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
	}
}

#Kaiser rewards
country_event = {
	id = giga_flusion.402
	title = "giga_flusion.402.name"
	desc = "giga_flusion.402.desc"
	picture = GFX_evt_partition
	show_sound = event_radio_chatter
	location = from
	is_triggered_only = yes

	trigger = {
		event_target:gigaflusion = {
			owner = {
				has_country_flag = flusion_primitives
			}
		}
		event_target:flusion_muno_system_owner = {
			AND = {
				has_country_flag = friendly_to_flusion
				OR = {
					has_country_flag = contributed_muno_project_1
					has_country_flag = contributed_muno_project_2
				}
			}
		}
	}

	option = { #On screen
		name = "giga_flusion.402.a"
		hidden_effect = {
			if = {
				limit = { has_country_flag = contributed_muno_project_1 }
				country_event = { id = giga_flusion.403 } #The Kaiser's dark matter
			}
			else_if = {
				limit = { has_country_flag = contributed_muno_project_2 }
				country_event = { id = giga_flusion.404 } #The Kaiser's cool ship
			}
		}
	}
}

#Give resources
country_event = {
	id = giga_flusion.403
	title = "giga_flusion.403.name"
	desc = "giga_flusion.403.desc"
	location = from
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:flusion_douclaw
		room = "flusion_katown_room"
	}

	option = { #Thanks
		name = "giga_flusion.403.a"
		add_resource = {
			sr_dark_matter = 750
		}
	}
}

#KSS Clermeowth
country_event = {
	id = giga_flusion.404
	title = "giga_flusion.404.name"
	desc = "giga_flusion.404.desc"
	location = from
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:flusion_douclaw
		room = "flusion_katown_room"
	}

	option = { #Thanks
		name = "giga_flusion.404.a"
		custom_tooltip = "giga_flusion.404.a.tooltip"
		hidden_effect = {
			create_fleet = {
				name = "Katzenkreusers"
				settings = {
					spawn_debris = no
				}
				effect = {
					set_owner = event_target:flusion_muno_system_owner
					create_ship = {
						name = "KSS Catburg"
						design = "Clermeowth"
					}
					create_ship = {
						name = "KSS Meownich"
						design = "Clermeowth"
					}
					set_location = {
						target = event_target:gigaflusion
						distance = 5
						angle = random
					}
				}
			}
		}
	}
}

#Entering Jublio w/ attack moon without having surveyed it or done the event chain beforehand
ship_event = {
	id = giga_flusion.405
	title = "giga_flusion.405.name"
	desc = "giga_flusion.405.desc"
	location = from
	is_triggered_only = yes

	picture = GFX_evt_ship_travel
	show_sound = event_radio_chatter

	trigger = {
		controller = {
			NOT = {
				has_country_flag = knows_muno_attack_moon
			}
		}
		from = {
			AND = {
				count_ship_in_system = { limit = { is_ship_size = giga_war_moon_flusion }	count >= 1 }
				has_star_flag = giga_system_seven
			}
		}
	}

	immediate = { controller = { set_country_flag = knows_muno_attack_moon } }

	option = { #Yay!
		name = "giga_flusion.405.a"
		trigger = {
			controller = {
				NOR = {
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_hive_devouring_swarm
					has_valid_civic = civic_machine_terminator
				}
			}
		}
	}

	option = { #Nay!
		name = "giga_flusion.405.b"
		trigger = {
			controller = {
				OR = {
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_hive_devouring_swarm
					has_valid_civic = civic_machine_terminator
				}
			}
		}
	}
}

#Attack Moon Destroyed
country_event = {
	id = giga_flusion.406
	title = "giga_flusion.406.name"
	desc = "giga_flusion.406.desc"
	location = from
	is_triggered_only = yes

	picture = GFX_evt_large_explosion
	show_sound = event_structural_collapse

	trigger = {
		ehof_default_country = yes
		from = { is_country_type = primitive }
		fromfromfrom = {
			is_ship_size = giga_war_moon_flusion
		}
	}

	immediate = {
		fromfromfrom.solar_system = {
			spawn_megastructure = {
				name = "Ruined Mondkanone"
				type = "war_moon_debris_cold_barren"
				coords_from = event_target:gigaflusion
				owner = owner
			}
		}
		event_target:flusion_primitives_country = {
			set_country_flag = attack_moon_destroyed
		}
		if = {
			limit = {
				event_target:gigaflusion = {
					has_planet_flag = kaiser_going_on_wc
					NOT = { has_planet_flag = kaiser_wc }
				}
			}
			event_target:gigaflusion = {
				planet_event = { id = giga_katzen.005 days = 600 random = 100 } #causes Kaiser to fail his WC
			}
		}
	}

	option = { #RIP
		name = "giga_flusion.406.a"
		add_resource = {
			alloys = 5000
			engineering_research = 10000
			minerals = 10000
		}
		add_monthly_resource_mult = {
			resource = unity
			value = @tier4unityreward
			min = @tier4unitymin
			max = @tier4unitymax
		}
	}
}
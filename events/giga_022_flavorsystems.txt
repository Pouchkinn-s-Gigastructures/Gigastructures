namespace = giga_flavor_systems

#Spawn rare systems
country_event = {
	id = giga_flavor_systems.1000
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		event_target:global_event_country = {
			# if = { #Matrioskha Brain System
			# 	limit = { NOT = { has_global_flag = matrioshka_brain_disabled } }
			# 	random = {
			# 		chance = 50
			# 		random_system = { spawn_system = { initializer = "matrioskha_brain_init_01" } }
			# 		last_created_system = {
			# 			# Add extra hyperlane
			# 			random_list = {
			# 				1 = { while = { count = 1 giga_generate_hyperlane = yes } }
			# 				1 = { while = { count = 2 giga_generate_hyperlane = yes } }
			# 			}
			# 		}		
			# 	}
			# }
			# if = { #Matrioskha Brain System
			# 	limit = { NOT = { has_global_flag = giga_nebula_disabled } }
			# 	random_system = { spawn_system = { initializer = "nebula_init_01" } }
			# 	last_created_system = {
			# 		# Add extra hyperlane
			# 		random_list = {
			# 			1 = { while = { count = 1 giga_generate_hyperlane = yes } }
			# 			1 = { while = { count = 2 giga_generate_hyperlane = yes } }
			# 		}
			# 	}		
			# }
			if = { #Rogue AI System
				limit = { NOT = { has_global_flag = planetary_computer_disabled } }
				if = {
					limit = {
						NOT = { any_country = { has_country_flag = planetary_computer_rogue_ai_country } }
					}
					create_country = {
						name = "Threat Elimination System"
						type = faction
						flag = {
							icon={
								category="blocky"
								file="flag_blocky_7.dds"
							}
							background={
								category="backgrounds"
								file="circle.dds"
							}
							colors={
								"red"
								"red"
								"null"
								"null"
							}
						}
					}
					last_created_country = {
						set_country_flag = planetary_computer_rogue_ai_country
						save_global_event_target_as = planetary_computer_rogue_ai_country
					}
				}
				random_galaxy_planet = {
					limit = {
						is_moon = no
						OR = {
							giga_is_barren_cn = yes
							giga_is_toxic = yes
							giga_is_frozen = yes 
							giga_is_molten = yes
						}
						solar_system = {
							NOR = {
								any_ship_in_system = { exists = THIS }
								any_system_planet = { is_colony = yes } 
							}
						}
					}
					change_pc = pc_giga_planetary_computer
					set_planet_size = 16
					set_planet_flag = orbital_arcology
					set_planet_flag = giga_planetary_computer
					set_planet_flag = giga_rogue_ai_planetary_computer
					add_modifier = {
						modifier = giga_planetary_computer
						days = -1
					}
					create_fleet = {
						name = "Firewall Protocol"
						effect = {
							set_owner = event_target:planetary_computer_rogue_ai_country
							while = {
								count = 12
								create_ship = {
									design = "Firewall"
									name = "Firewall Sentry"
									graphical_culture = "ai_01"
								}
							}
							set_location = {
								target = PREV
								distance = 0
								angle = 0
							}
							set_formation_scale = 4
						}
					}
					solar_system = {
						set_star_flag = rogue_pc_system
						set_star_flag = giga_special_ruined_system
						spawn_megastructure = {
							type = orbital_arcology_1
							planet = PREV
						}
						spawn_megastructure = {
							type = giga_titan_ruined
							planet = PREV
							orbit_distance = 40
							orbit_angle = 180
							graphical_culture = reptilian_01
						}
					}
				}
			}
		}
	}
}

#Found Rogue PCC
ship_event = {
	id = giga_flavor_systems.1101
	title = "giga_flavor_systems.1101.name"
	desc = "giga_flavor_systems.1101.desc"
	picture = GFX_evt_machine_space_battle
	show_sound = event_radio_chatter
	location = from
	is_triggered_only = yes

	trigger = {
		from = {
			has_star_flag = rogue_pc_system
		}
	}

	option = { 
		name = "giga_flavor_systems.1101.a"
	}
}

#When PCC is colonised
planet_event = {
	id = giga_flavor_systems.1100
	title = "giga_flavor_systems.1100.name"
	desc = "giga_flavor_systems.1100.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_ai_started
	
	is_triggered_only = yes

	trigger = {
		is_planet_class = pc_giga_planetary_computer
		has_planet_flag = giga_rogue_ai_planetary_computer
		NOT = { has_planet_flag = giga_rogue_ai_planetary_computer_colonized }
	}

	immediate = {
		set_planet_flag = giga_rogue_ai_planetary_computer_colonized
		planet_event = { id = giga_flavor_systems.1103 days = 500 random = 360 }
		planet_event = { id = giga_flavor_systems.1106 days = 30 }
	}

	option = { 
		name = "giga_flavor_systems.1100.a"
		add_modifier = {
			modifier = giga_rogue_ai_computer
			days = -1
		}
		trigger = { owner = { is_machine_empire = no } }
		add_deposit = d_giga_rogue_ai_relay_servers
		add_deposit = d_giga_rogue_ai_relay_servers
		add_deposit = d_giga_rogue_ai_relay_servers
		add_deposit = d_giga_rogue_ai_corrupt_code
		add_deposit = d_giga_rogue_ai_corrupt_code
		add_deposit = d_giga_rogue_ai_corrupt_code
		add_deposit = d_giga_rogue_ai_corrupt_code
		hidden_effect = { giga_update_rogue_ai_computer_build_speed = yes }
	}

	option = {
		name = "giga_flavor_systems.1100.b"
		add_modifier = {
			modifier = giga_rogue_ai_computer
			days = -1
		}
		trigger = { owner = { is_machine_empire = yes } }
		add_deposit = d_giga_rogue_ai_relay_servers
		add_deposit = d_giga_rogue_ai_relay_servers
		add_deposit = d_giga_rogue_ai_relay_servers
		add_deposit = d_giga_rogue_ai_corrupt_code
		add_deposit = d_giga_rogue_ai_corrupt_code
		add_deposit = d_giga_rogue_ai_corrupt_code
		add_deposit = d_giga_rogue_ai_corrupt_code
		hidden_effect = { giga_update_rogue_ai_computer_build_speed = yes }
	}
}

#When PCC AI is killed
planet_event = {
	id = giga_flavor_systems.1102
	title = "giga_flavor_systems.1102.name"
	desc = "giga_flavor_systems.1102.desc"

	picture = GFX_evt_machine_sapience
	show_sound = event_ai_started
	
	is_triggered_only = yes

	option = {
		name = "giga_flavor_systems.1102.a"
		remove_modifier = giga_rogue_ai_computer
		owner = {
			add_monthly_resource_mult = {
				resource = unity
				value = 4
			}
		}
		hidden_effect = { giga_update_rogue_ai_computer_build_speed = yes }
	}
}

planet_event = {
	id = giga_flavor_systems.1106
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_modifier = giga_rogue_ai_computer
	}

	immediate = {
		if = {
			limit = {
				OR = {
					has_deposit = d_giga_rogue_ai_corrupt_code
					has_deposit = d_giga_rogue_ai_relay_servers
				}
			}
			# clean up if the attack was interrupted
			if = {
				limit = {
					exists = controller
					controller = {
						has_country_flag = giga_rogue_ai_pcc_army_country
					}
				}
				every_planet_army = {
					limit = { army_type = pcc_rogue_ai_army }
					remove_army = yes
				}
				set_controller = owner
			}
			# resume checks
			planet_event = { id = giga_flavor_systems.1106 days = 30 }
		}
		if = {
			limit = {
				NOR = {
					has_deposit = d_giga_rogue_ai_corrupt_code
					has_deposit = d_giga_rogue_ai_relay_servers
				}
			}
			planet_event = { id = giga_flavor_systems.1102 days = 30 }
		}
	}
}

#PCC spawns armies!
planet_event = {
	id = giga_flavor_systems.1103
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_modifier = giga_rogue_ai_computer
	}

	immediate = {
		if = {
			limit = { 
				has_modifier = giga_rogue_ai_computer
			}
			planet_event = { id = giga_flavor_systems.1103 days = 720 random = 3600 }
		}
		if = {
			limit = { 
				has_modifier = giga_rogue_ai_computer
				is_colony = yes
				has_ground_combat = no 
			}
			create_country = {
				name = "Threat Expurgation Units"
				type = faction
				effect = { 
					establish_communications_no_message = root.owner
					set_country_flag = giga_rogue_ai_pcc_army_country
				}
			}
			while = {
				count = 20
				random = {
					chance = 70
					create_army = {
						name = NAME_pcc_army
						owner = last_created_country
						type = "pcc_rogue_ai_army"
						species = owner_main_species
					}
				}
			}
			planet_event = { id = giga_flavor_systems.1104 }
		}
	}
}

#PCC AI spawns armies!
planet_event = {
	id = giga_flavor_systems.1104
	title = "giga_flavor_systems.1104.name"
	desc = "giga_flavor_systems.1104.desc"

	picture = GFX_evt_ground_combat
	show_sound = event_ground_battle
	
	is_triggered_only = yes

	option = {
		name = "giga_flavor_systems.1104.a"
	}
}


#PCC AI wins
country_event = {
    id = giga_flavor_systems.1105
    title = "giga_flavor_systems.1105.name"
    desc = "giga_flavor_systems.1105.desc"

    picture = GFX_evt_burning_settlement
    show_sound = event_public_unrest

    is_triggered_only = yes

    trigger = {
        from = { has_country_flag = giga_rogue_ai_pcc_army_country }
        fromfrom = { 
            is_planet_class = pc_giga_planetary_computer
            has_modifier = giga_rogue_ai_computer
        }
    }

    option = {
        name = "giga_flavor_systems.1105.a"
        hidden_effect = {
            if = {
                limit = { ROOT.fromfrom = { count_owned_pop = { count > 2 } } }
                ROOT.fromfrom = {
                    every_owned_pop = {
                        random = {
                            chance = 50
                            kill_pop = yes
                        }
                    }
                }
            }
        }
        fromfrom = {
            every_planet_army = {
                limit = { army_type = pcc_rogue_ai_army }
                remove_army = yes
            }
            set_owner = ROOT
            set_controller = ROOT
            add_deposit = d_giga_rogue_ai_corrupt_code
            add_deposit = d_giga_rogue_ai_relay_servers
			hidden_effect = { giga_update_rogue_ai_computer_build_speed = yes }
            add_planet_devastation = 75
        }
    }
}

# PCC blocker cleared
planet_event = {
	id = giga_flavor_systems.1107
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_modifier = giga_rogue_ai_computer
	}

	immediate = {
		# firing another event to hopefully calculate *after* the blocker is removed
		planet_event = {
			id = giga_flavor_systems.1108
			days = 1
		}
	}
}

# PCC blocker cleared 2
planet_event = {
	id = giga_flavor_systems.1108
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		giga_update_rogue_ai_computer_build_speed = yes
	}
}

namespace = giga_wrecked_ships

#Sprinkle in stuff
country_event = {
	id = giga_wrecked_ships.1000
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = giga_wrecked_ships_disabled }
	}

	immediate = {
		event_target:global_event_country = {
			set_variable = {
				which = giga_ruined_warships_frequency
				value = giga_ruined_warships_perc
			}
			divide_variable = {
				which = giga_ruined_warships_frequency
				value = 100
			}
			round_variable = giga_ruined_warships_frequency
		}

		#Battleships
		event_target:global_event_country = {
			multiply_variable = { #Add multiplier
				which = giga_wrecked_battleship_count
				value = giga_ruined_warships_frequency
			}
			country_event = { id = giga_wrecked_ships.1001 }
		}

		#Titans
		if = {
			limit = { host_has_dlc = "Apocalypse" }
			event_target:global_event_country = {
				multiply_variable = { #Add multiplier
					which = giga_wrecked_titan_count
					value = giga_ruined_warships_frequency
				}
				country_event = { id = giga_wrecked_ships.1002 }
			}
		}

		#Juggernaut
		if = {
			limit = { host_has_dlc = "Federations" }
			event_target:global_event_country = {
				multiply_variable = { #Add multiplier
					which = giga_wrecked_juggernaut_count
					value = giga_ruined_warships_frequency
				}
				country_event = { id = giga_wrecked_ships.1003 }
			}
		}

		#Colossus
		if = {
			limit = { host_has_dlc = "Apocalypse" }
			event_target:global_event_country = {
				multiply_variable = { #Add multiplier
					which = giga_wrecked_colossus_count
					value = giga_ruined_warships_frequency
				}
				country_event = { id = giga_wrecked_ships.1004 }
			}
		}

		# apply build speed compensation to all wrecked ships if build cap is set to job based
		if = {
			limit = {
				has_global_flag = @giga_amb_flag
			}
			country_event = {
				id = giga_wrecked_ships.10001
				days = 1
			}
		}
	}
}

country_event = {
	id = giga_wrecked_ships.10001
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_global_flag = @giga_amb_flag
		NOT = { has_global_flag = giga_wrecked_ships_disabled }
	}

	immediate = {
		every_megastructure = {
			limit = {
				or = {
					is_megastructure_type = giga_battleship_ruined
					is_megastructure_type = giga_titan_ruined
					is_megastructure_type = giga_colossus_ruined
					is_megastructure_type = giga_juggernaut_ruined
				}
				not = { has_modifier = giga_amb_mega_speed }
			}

			add_modifier = {
				modifier = giga_amb_mega_speed
			}
		}
	}
}

#Battleships
country_event = {
	id = giga_wrecked_ships.1001
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				check_variable = {
					which = giga_wrecked_battleship_count
					value > 0
				}
			}
			subtract_variable = {
				which = giga_wrecked_battleship_count
				value = 1
			}
			random = {
				chance = 20
				subtract_variable = {
					which = giga_wrecked_battleship_count
					value = 1
				}
			}
			country_event = { id = giga_wrecked_ships.1001 }

			random_galaxy_planet = {
				limit = {
					giga_valid_planet_wrecked_ship = yes
				}
				set_planet_flag = has_giga_wrecked_ship
				solar_system = {
					random_list = {
						1 = {
							spawn_megastructure = {
								type = giga_battleship_ruined
								planet = PREV
								orbit_distance = 25
								random_pos = yes
								orbit_angle = 360
								graphical_culture = mammalian_01
								#owner = space_owner
							}
						}
						1 = {
							spawn_megastructure = {
								type = giga_battleship_ruined
								planet = PREV
								orbit_distance = 25
								random_pos = yes
								orbit_angle = 360
								graphical_culture = reptilian_01
								#owner = space_owner
							}
						}
						1 = {
							spawn_megastructure = {
								type = giga_battleship_ruined
								planet = PREV
								orbit_distance = 25
								random_pos = yes
								orbit_angle = 360
								graphical_culture = avian_01
								#owner = space_owner
							}
						}
					}
				}
			}
		}
	}
}

#Titans
country_event = {
	id = giga_wrecked_ships.1002
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				check_variable = {
					which = giga_wrecked_titan_count
					value > 0
				}
			}
			subtract_variable = {
				which = giga_wrecked_titan_count
				value = 1
			}
			random = {
				chance = 20
				subtract_variable = {
					which = giga_wrecked_titan_count
					value = 1
				}
			}
			country_event = { id = giga_wrecked_ships.1002 }
			random_galaxy_planet = {
				limit = {
					giga_valid_planet_wrecked_ship = yes
				}
				set_planet_flag = has_giga_wrecked_ship
				solar_system = {
					random_list = {
						1 = {
							spawn_megastructure = {
								type = giga_titan_ruined
								planet = PREV
								orbit_distance = 25
								random_pos = yes
								orbit_angle = 360
								graphical_culture = mammalian_01
								#owner = space_owner
							}
						}
						1 = {
							spawn_megastructure = {
								type = giga_titan_ruined
								planet = PREV
								orbit_distance = 25
								random_pos = yes
								orbit_angle = 360
								graphical_culture = reptilian_01
								#owner = space_owner
							}
						}
						1 = {
							spawn_megastructure = {
								type = giga_titan_ruined
								planet = PREV
								orbit_distance = 25
								random_pos = yes
								orbit_angle = 360
								graphical_culture = molluscoid_01
								#owner = space_owner
							}
						}
					}
				}
			}
		}
	}
}

#Juggernauts
country_event = {
	id = giga_wrecked_ships.1003
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				check_variable = {
					which = giga_wrecked_juggernaut_count
					value > 0
				}
			}
			subtract_variable = {
				which = giga_wrecked_juggernaut_count
				value = 1
			}
			random = {
				chance = 20
				subtract_variable = {
					which = giga_wrecked_juggernaut_count
					value = 1
				}
			}
			country_event = { id = giga_wrecked_ships.1003 }
			random_galaxy_planet = {
				limit = {
					giga_valid_planet_wrecked_ship = yes
				}
				set_planet_flag = has_giga_wrecked_ship
				solar_system = {
					random_list = {
						1 = {
							spawn_megastructure = {
								type = giga_juggernaut_ruined
								planet = PREV
								orbit_distance = 25
								random_pos = yes
								orbit_angle = 360
								graphical_culture = molluscoid_01
								#owner = space_owner
							}
						}
						1 = {
							spawn_megastructure = {
								type = giga_juggernaut_ruined
								planet = PREV
								orbit_distance = 25
								random_pos = yes
								orbit_angle = 360
								graphical_culture = reptilian_01
								#owner = space_owner
							}
						}
						1 = {
							spawn_megastructure = {
								type = giga_juggernaut_ruined
								planet = PREV
								orbit_distance = 25
								random_pos = yes
								orbit_angle = 360
								graphical_culture = fungoid_01
								#owner = space_owner
							}
						}
						1 = {
							spawn_megastructure = {
								type = giga_juggernaut_ruined
								planet = PREV
								orbit_distance = 25
								random_pos = yes
								orbit_angle = 360
								graphical_culture = avian_01
								#owner = space_owner
							}
						}
						1 = {
							spawn_megastructure = {
								type = giga_juggernaut_ruined
								planet = PREV
								orbit_distance = 25
								random_pos = yes
								orbit_angle = 360
								graphical_culture = arthropoid_01
								#owner = space_owner
							}
						}
						1 = {
							spawn_megastructure = {
								type = giga_juggernaut_ruined
								planet = PREV
								orbit_distance = 25
								random_pos = yes
								orbit_angle = 360
								graphical_culture = mammalian_01
								#owner = space_owner
							}
						}
					}
				}
			}
		}
	}
}

#Colossuses (sus!)
country_event = {
	id = giga_wrecked_ships.1004
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				check_variable = {
					which = giga_wrecked_colossus_count
					value > 0
				}
			}
			subtract_variable = {
				which = giga_wrecked_colossus_count
				value = 1
			}
			random = {
				chance = 20
				subtract_variable = {
					which = giga_wrecked_colossus_count
					value = 1
				}
			}
			country_event = { id = giga_wrecked_ships.1004 }
			random_galaxy_planet = {
				limit = {
					is_colony = no
					is_artificial = no
					OR = {
						giga_is_barren_cn = yes
						giga_is_toxic = yes
						giga_is_frozen = yes 
						giga_is_molten = yes
					}
					giga_valid_planet_wrecked_ship = yes
				}
				set_planet_flag = has_giga_wrecked_ship
				change_pc = pc_shattered
				solar_system = {
					#set_name = "Colossus"
					random_list = {
						1 = {
							spawn_megastructure = {
								type = giga_colossus_ruined
								planet = PREV
								orbit_distance = 1
								random_pos = yes
								orbit_angle = 360
								graphical_culture = fungoid_01
								#owner = space_owner
							}
						}
						1 = {
							spawn_megastructure = {
								type = giga_colossus_ruined
								planet = PREV
								orbit_distance = 1
								random_pos = yes
								orbit_angle = 360
								graphical_culture = arthropoid_01
								#owner = space_owner
							}
						}
						1 = {
							spawn_megastructure = {
								type = giga_colossus_ruined
								planet = PREV
								orbit_distance = 1
								random_pos = yes
								orbit_angle = 360
								graphical_culture = molluscoid_01
								#owner = space_owner
							}
						}
					}
				}
			}
		}
	}
}


# Found Titan
ship_event = {
	id = giga_wrecked_ships.1010
	title = "giga_wrecked_ships.1010.name"
	desc = "giga_wrecked_ships.1010.desc"
	picture = GFX_evt_space_debris
	show_sound = event_radio_chatter
	location = from
	is_triggered_only = yes

	trigger = {
		from = {
			NOT = { has_star_flag = giga_special_ruined_system }
			any_system_megastructure = {
				is_megastructure_type = giga_titan_ruined
			}
		}
	}

	option = { 
		name = "giga_wrecked_ships.1010.a"
		controller = {
			add_resource = {
				engineering_research = 500
			}
		}
	}
}

# Repaired Titan
country_event = {
	id = giga_wrecked_ships.1011
	title = "giga_wrecked_ships.1011.name"
	desc = "giga_wrecked_ships.1011.desc"
	picture = GFX_evt_automated_dreadnought
	show_sound = event_ship_thrusters
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_wrecked_ships.1011.a"
		add_monthly_resource_mult = { resource = unity value = 1 }
		add_resource = { influence = 10 }
	}

	option = { 
		name = "giga_wrecked_ships.1011.b"
		trigger = { is_militarist = yes }
		add_monthly_resource_mult = { resource = unity value = 2 }
		add_resource = { influence = 20 }
	}
}

# Scrapped Titan
country_event = {
	id = giga_wrecked_ships.1012
	title = "giga_wrecked_ships.1012.name"
	desc = "giga_wrecked_ships.1012.desc"
	picture = GFX_evt_megastructure_construction
	show_sound = event_machinery
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_wrecked_ships.1022.a"
		add_monthly_resource_mult = { resource = engineering_research value = 4 }
		add_resource = { alloys = 2000 }
	}
}

# Found Juggernaut
ship_event = {
	id = giga_wrecked_ships.1020
	title = "giga_wrecked_ships.1020.name"
	desc = "giga_wrecked_ships.1020.desc"
	picture = GFX_evt_juggernaut
	show_sound = event_radio_chatter
	location = from
	is_triggered_only = yes

	trigger = {
		from = {
			NOT = { has_star_flag = giga_special_ruined_system }
			any_system_megastructure = {
				is_megastructure_type = giga_juggernaut_ruined
			}
		}
	}

	option = { 
		name = "giga_wrecked_ships.1020.a"
		controller = {
			add_resource = {
				engineering_research = 1000
			}
		}
	}
}

# Repaired Juggernaut
country_event = {
	id = giga_wrecked_ships.1021
	title = "giga_wrecked_ships.1021.name"
	desc = "giga_wrecked_ships.1021.desc"
	picture = GFX_evt_juggernaut
	show_sound = event_ringworld_build_complete
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_wrecked_ships.1021.a"
		add_monthly_resource_mult = { resource = unity value = 2 }
		add_resource = { influence = 20 }
	}

	option = { 
		name = "giga_wrecked_ships.1021.b"
		trigger = { is_militarist = yes }
		add_monthly_resource_mult = { resource = unity value = 6 }
		add_resource = { influence = 60 }
	}
}

# Scrapped Juggernaut
country_event = {
	id = giga_wrecked_ships.1022
	title = "giga_wrecked_ships.1022.name"
	desc = "giga_wrecked_ships.1022.desc"
	picture = GFX_evt_megastructure_construction
	show_sound = event_machinery
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_wrecked_ships.1022.a"
		add_monthly_resource_mult = { resource = engineering_research value = 6 }
		add_resource = { alloys = 4000 }
	}
}

# Found Battleships
ship_event = {
	id = giga_wrecked_ships.1030
	title = "giga_wrecked_ships.1030.name"
	desc = "giga_wrecked_ships.1030.desc"
	picture = GFX_evt_ship_in_orbit_3
	show_sound = event_radio_chatter
	location = from
	is_triggered_only = yes

	trigger = {
		from = {
			NOT = { has_star_flag = giga_special_ruined_system }
			any_system_megastructure = {
				is_megastructure_type = giga_battleship_ruined
			}
		}
	}

	option = { 
		name = "giga_wrecked_ships.1030.a"
		controller = {
			add_resource = {
				engineering_research = 500
			}
		}
	}
}

# Repaired Battleships
country_event = {
	id = giga_wrecked_ships.1031
	title = "giga_wrecked_ships.1031.name"
	desc = "giga_wrecked_ships.1031.desc"
	picture = GFX_evt_ship_in_orbit_3
	show_sound = event_ship_thrusters
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_wrecked_ships.1021.a"
		add_monthly_resource_mult = { resource = unity value = 1 }
		add_resource = { influence = 10 }
	}

	option = { 
		name = "giga_wrecked_ships.1021.b"
		trigger = { is_militarist = yes }
		add_monthly_resource_mult = { resource = unity value = 2 }
		add_resource = { influence = 20 }
	}
}

# Scrapped Battleships
country_event = {
	id = giga_wrecked_ships.1032
	title = "giga_wrecked_ships.1032.name"
	desc = "giga_wrecked_ships.1032.desc"
	picture = GFX_evt_megastructure_construction
	show_sound = event_machinery
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_wrecked_ships.1022.a"
		add_monthly_resource_mult = { resource = engineering_research value = 2 }
		add_resource = { alloys = 1800 }
	}
}


# Found Colossus
ship_event = {
	id = giga_wrecked_ships.1040
	title = "giga_wrecked_ships.1040.name"
	desc = "giga_wrecked_ships.1040.desc"
	picture = GFX_evt_ship_travel
	show_sound = event_radio_chatter
	location = from
	is_triggered_only = yes

	trigger = {
		from = {
			NOT = { has_star_flag = giga_special_ruined_system }
			any_system_megastructure = {
				is_megastructure_type = giga_colossus_ruined
			}
		}
	}

	option = { 
		name = "giga_wrecked_ships.1040.a"
		controller = {
			add_resource = {
				engineering_research = 2500
			}
		}
	}
}

# Repaired Colossus
country_event = {
	id = giga_wrecked_ships.1041
	title = "giga_wrecked_ships.1041.name"
	desc = "giga_wrecked_ships.1041.desc"
	picture = GFX_evt_ship_travel
	show_sound = event_ringworld_build_complete
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_wrecked_ships.1041.a"
		add_monthly_resource_mult = { resource = unity value = 6 }
		add_resource = { influence = 70 }
	}

	option = { 
		name = "giga_wrecked_ships.1041.b"
		trigger = { is_militarist = yes }
		add_monthly_resource_mult = { resource = unity value = 12 }
		add_resource = { influence = 140 }
	}
}

# Scrapped Colossus
country_event = {
	id = giga_wrecked_ships.1042
	title = "giga_wrecked_ships.1042.name"
	desc = "giga_wrecked_ships.1042.desc"
	picture = GFX_evt_megastructure_construction
	show_sound = event_machinery
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_wrecked_ships.1022.a"
		add_monthly_resource_mult = { resource = engineering_research value = 12 }
		add_resource = { alloys = 6000 }
	}
}

# Scrapped Attack Moon
country_event = {
	id = giga_wrecked_ships.1043
	title = "giga_wrecked_ships.1043.name"
	desc = "giga_wrecked_ships.1043.desc"
	picture = GFX_evt_megastructure_construction
	show_sound = event_machinery
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_wrecked_ships.1043.a"
		add_monthly_resource_mult = { resource = engineering_research value = 32 }
		add_resource = { 
			alloys = 15000
			minerals = 7500 
		}
	}
}

# Scrapped Planetcraft
country_event = {
	id = giga_wrecked_ships.1044
	title = "giga_wrecked_ships.1044.name"
	desc = "giga_wrecked_ships.1044.desc"
	picture = GFX_evt_megastructure_construction
	show_sound = event_machinery
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_wrecked_ships.1044.a"
		add_monthly_resource_mult = { resource = engineering_research value = 128 }
		add_resource = {
			alloys = 80000
			minerals = 40000
		}
	}
}

#eaw planet
#found eaw planet
ship_event = {
	id = giga_flavor_systems.2000
	title = "giga_flavor_systems.2000.name"
	desc = "giga_flavor_systems.2000.desc"
	picture = GFX_evt_binary_stars
	show_sound = event_radio_chatter
	location = from
	is_triggered_only = yes

	trigger = {
		from = {
			has_star_flag = eaw_system
			any_system_planet = {
				is_colony = yes
				owner = { is_country_type = primitive }
				has_planet_flag = giga_eaw_planet
			}
		}
	}

	option = { 
		name = "giga_flavor_systems.2000.a"
	}
}

#eaw planet enters nuclear age
country_event = {
	id = giga_flavor_systems.2001
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_country_type = primitive
		has_country_flag = machine_age
	}

	immediate = {
		random = {
			chance = 40
			country_event = { id = giga_flavor_systems.2003 days = 3000 random = 1200 } #Nuclear War, change
		}
		country_event = { id = giga_flavor_systems.2005 days = 6800 random = 1200 } #early space age Age, change to 20 years
		remove_country_flag = machine_age
		set_country_flag = atomic_age
		set_pre_ftl_age = atomic_age
		home_planet = {
			create_pop = {
				species = event_target:giga_equinean
				count = 5
			}
			create_pop = {
				species = event_target:giga_griffon
				count = 6
			}
			add_building = building_urban_dwellings
			add_deposit = d_decrepit_dwellings
			add_deposit = d_failing_infrastructure
			if = {
				limit = {
					exists = observation_outpost_owner
				}
				observation_outpost_owner = {
					country_event = { id = giga_flavor_systems.2002 }
				}
			}
		}
	}
}

country_event = {
	id = giga_flavor_systems.2002
	title = "giga_flavor_systems.2002.name"
	desc = "giga_flavor_systems.2002.desc"
	picture = GFX_evt_ground_combat
	show_sound = event_mystic_reveal
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_flavor_systems.2002.a"
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier3researchreward
			min = @tier3researchmin
			max = @tier3researchmax
		}
		add_monthly_resource_mult = {
			resource = physics_research
			value = @tier3researchreward
			min = @tier3researchmin
			max = @tier3researchmax
		}
	}
}

#eaw planet gets atomic war
country_event = {
	id = giga_flavor_systems.2003
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_country_type = primitive
		OR = {
			has_country_flag = atomic_age
			has_country_flag = early_space_age
		}
	}

	immediate = {
		home_planet = {
			if = {
				limit = {
					exists = observation_outpost_owner
				}
				observation_outpost_owner = { country_event = { id = giga_flavor_systems.2004 } }
				observation_outpost = { dismantle = yes }
			}
			destroy_colony = yes
			set_planet_flag = primitives_nuked_themselves
			change_pc = pc_shrouded
			remove_all_buildings = yes
			add_deposit = d_metal_boneyard
			set_planet_flag = eaw_planet_nuked_itself
			set_planet_flag = nuked_planet_anomalies_disabled
		}
		if = {
			limit = { exists = event_target:giga_eaw_country }
			event_target:giga_eaw_country = { destroy_country = yes }
		}
	}
}

country_event = {
	id = giga_flavor_systems.2004
	title = "giga_flavor_systems.2004.name"
	desc = "giga_flavor_systems.2004.desc"
	picture = GFX_evt_shrouded_planet
	show_sound = event_super_explosion
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_flavor_systems.2004.a"
		add_monthly_resource_mult = {
			resource = physics_research
			value = @tier4researchreward
			min = @tier4researchmin
			max = @tier4researchmax
		}
	}
}

#eaw planet enters early space age
country_event = {
	id = giga_flavor_systems.2005
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_country_type = primitive
		has_country_flag = atomic_age
	}

	immediate = {
		random = {
			chance = 20
			country_event = { id = giga_flavor_systems.2003 days = 3000 random = 600 } #Nuclear War, change
		}
		country_event = { id = giga_flavor_systems.2010 days = 6800 random = 1200 } #FTL
		remove_country_flag = atomic_age
		set_country_flag = early_space_age
		set_pre_ftl_age = early_space_age
		home_planet = {
			create_pop = {
				species = event_target:giga_equinean
				count = 3
			}
			create_pop = {
				species = event_target:giga_griffon
				count = 4
			}
			add_building = building_urban_dwellings
			add_building = building_urban_dwellings
			add_deposit = d_decrepit_dwellings
			add_deposit = d_failing_infrastructure
			if = {
				limit = {
					exists = observation_outpost_owner
				}
				observation_outpost_owner = {
					country_event = { id = giga_flavor_systems.2006 }
				}
				observation_outpost = { dismantle = yes }
			}
		}
	}
}

country_event = {
	id = giga_flavor_systems.2006
	title = "giga_flavor_systems.2006.name"
	desc = "giga_flavor_systems.2006.desc"
	picture = GFX_evt_space_walk
	show_sound = event_ship_thrusters
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_flavor_systems.2006.a"
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier3researchreward
			min = @tier3researchmin
			max = @tier3researchmax
		}
	}
}

#Faust incinerated
country_event = {
	id = giga_flavor_systems.2007
	title = "giga_flavor_systems.2007.name"
	desc = "giga_flavor_systems.2007.desc"
	picture = GFX_evt_supernova
	show_sound = event_air_raid_siren
	location = from
	is_triggered_only = yes

	option = { #Xenophile
		name = "giga_flavor_systems.2007.xenophile"
		custom_tooltip = "giga_flavor_systems.2007.xenophile.tooltip"
		if = {
			limit = { has_ethic = ethic_xenophile }
			add_modifier = {
				modifier = eaw_ignited_faust_modifier_bad
				multiplier = 5
				days = 3600 
			}
			add_resource = { influence = -100 }
		}
		if = {
			limit = { has_ethic = ethic_fanatic_xenophile }
			add_modifier = {
				modifier = eaw_ignited_faust_modifier_bad
				multiplier = 10
				days = 3600 
			}
			add_resource = { influence = -200 }
		}
		trigger = {
			OR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
		}
	}

	option = { #Xenophobe
		name = "giga_flavor_systems.2007.xenophobe"
		custom_tooltip = "giga_flavor_systems.2007.xenophobe.tooltip"
		if = {
			limit = { has_ethic = ethic_xenophobe }
			add_modifier = {
				modifier = eaw_ignited_faust_modifier_good
				multiplier = 5
				days = 3600 
			}
			add_resource = { influence = 100 }
		}
		if = {
			limit = { has_ethic = ethic_fanatic_xenophobe }
			add_modifier = {
				modifier = eaw_ignited_faust_modifier_good
				multiplier = 10
				days = 3600 
			}
			add_resource = { influence = 200 }
		}
		trigger = {
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}

	option = { #Exterminator
		name = "giga_flavor_systems.2007.exterminator"
		custom_tooltip = "giga_flavor_systems.2007.exterminator.tooltip"
		add_resource = { influence = 200 }
		trigger = {
			OR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
	}

	option = { #Other
		name = "giga_flavor_systems.2007.other"
		custom_tooltip = "giga_flavor_systems.2007.other.tooltip"
		add_modifier = {
			modifier = eaw_ignited_faust_modifier_bad
			multiplier = 5
			days = 1800
		}
		trigger = {
			NOR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
	}
}

#Unifiers:
#Jungle Trek the 3rd --> UN
#Grover IX --> Griffonian Empire
#Supreme Soviet

#Faust gets FTL
country_event = {
	id = giga_flavor_systems.2010
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_country_type = primitive
	}
	immediate = {
		#Determine unifier
		if = {
			limit = { NOT = { has_country_flag = eaw_unifier_determined } }
			random_list = {
				30 = { set_country_flag = giga_eaw_un_unifier }
				30 = { set_country_flag = giga_eaw_griffon_unifier }
				30 = { set_country_flag = giga_eaw_communist_unifier }
			}
			set_country_flag = eaw_unifier_determined
		}
		#All unifiers get this
		remove_country_flag = early_space_age
		set_country_type = default
		event_target:giga_eaw_planet = {
    		create_country = {
				name = "Subscribe to Equestria at War" #Best HOI4 mod
				type = giga_t2_tech_dump
				effect = { save_global_event_target_as = eaw_tech_dump }
			}
		}
		copy_techs_from = { target = event_target:eaw_tech_dump }
		event_target:eaw_tech_dump = { destroy_country = yes }
		set_country_flag = giga_faust_weaponry_possible
		country_event = {
			id = giga_flavor_systems.20101
			days = 1
		}
		force_remove_civic = civic_atmospheric_pollution
		force_remove_civic = civic_increasing_urbanization
		country_remove_ethic = ethic_fanatic_spiritualist
		country_remove_ethic = ethic_egalitarian
		create_ship_design = { design = "Griffonia" }
		add_ship_design = last_created_design
		create_ship_design = { design = "Zebrica" }
		add_ship_design = last_created_design
		add_resource = {
			minerals = 10000
			alloys = 5000
			energy = 25000
			food = 10000
			consumer_goods = 10000
			exotic_gases = 5000
			volatile_motes = 5000
			rare_crystals = 5000
			influence = 250
		}
		home_planet = {
			remove_all_buildings = yes
			add_building = building_major_capital
			set_capital = yes
			while = {
				count = 3
				add_district = {
					district_type = district_city
					ignore_cap = yes
				}
			}
			while = {
				count = 2
				add_district = {
					district_type = district_industrial
					ignore_cap = yes
				}
			}
			while = {
				count = 3
				add_district = {
					district_type = district_farming
					ignore_cap = yes
				}
			}
			while = {
				count = 3
				add_district = {
					district_type = district_mining
					ignore_cap = yes
				}
			}
			while = {
				count = 3
				add_district = {
					district_type = district_generator
					ignore_cap = yes
				}
			}
			add_building = building_research_lab_1
			add_building = building_research_lab_1
			add_building = building_foundry_1
			add_building = building_temple
			add_building = building_commercial_zone
			remove_all_armies = yes
			set_owner = event_target:giga_eaw_country
			set_controller = event_target:giga_eaw_country
		}
		every_country = {
			establish_communications_no_message = event_target:giga_eaw_country
		}
		every_country = {
			establish_contact = {
				who = event_target:giga_eaw_country
				location = event_target:giga_eaw_system
			}
		}
		#EaW UN
		if = {
			limit = { has_country_flag = giga_eaw_un_unifier }
			set_graphical_culture = reptilian_01
			create_leader = {
				class = official
				species = event_target:giga_equinean
				gender = male
				set_age = 37
				name = "Jungle Trek 3"
				effect = {
					save_event_target_as = giga_eaw_un_ruler
				}
			}
			set_leader = event_target:giga_eaw_un_ruler
			country_add_ethic = ethic_egalitarian
			country_add_ethic = ethic_spiritualist
			country_add_ethic = ethic_xenophile
			change_government = {
				remove_invalid_civics = yes
				authority = auth_oligarchic
				civics = {
					civic = civic_beacon_of_liberty
					civic = civic_environmentalist
				}
			}
			set_origin = origin_default
			change_country_flag = {
				icon={
					category="ornate"
					file="flag_ornate_6.dds"
				}
				background={
					category="backgrounds"
					file="new_dawn.dds"
				}
				colors={
					"teal"
					"dark_teal"
					"null"
					"null"
				}
			}
			set_male_ruler_title = "President"
			set_female_ruler_title = "President"
			set_name = "Grand Faustian Convocation"
			event_target:giga_eaw_planet = {
				while = { count = 6	create_army = { name = NAME_faust_guard	owner = event_target:giga_eaw_country species = event_target:giga_equinean  type = "eaw_early_army" } }
			}
			create_leader = {
				class = commander
				species = event_target:giga_equinean
				name = "Blueblood the 5th"
				skill = 2
				gender = male
				traits = {
					trait = leader_trait_adaptable 
				}
				effect = { save_event_target_as = eaw_admiral }
			}
			create_fleet = { #Spawn a fleet
				name = "1st Faust Fleet"
				settings = { uses_naval_capacity = no }
				effect = {
					set_owner = event_target:giga_eaw_country
					while = {
						count = 2
						create_ship = {
							name = random
							design = "Griffonia"
							prefix = no
							graphical_culture = reptilian_01
						}
					}
					while = {
						count = 9
						create_ship = {
							name = random
							design = "Zebrica"
							prefix = no
							graphical_culture = reptilian_01
						}
					}
					assign_leader = event_target:eaw_admiral
					set_location = {
						target = event_target:giga_eaw_planet
						distance = 15
						angle = random
					}
				}
			}
			create_leader = {
				class = commander
				species = event_target:giga_equinean
				name = "Ironside the 4th"
				skill = 3
				gender = male
				traits = {
					trait = leader_trait_engineer
				}
				effect = { save_event_target_as = eaw_admiral }
			}
			create_fleet = { #Spawn a fleet
				name = "2nd Faust Fleet"
				settings = { uses_naval_capacity = no }
				effect = {
					set_owner = event_target:giga_eaw_country
					while = {
						count = 2
						create_ship = {
							name = random
							design = "Griffonia"
							prefix = no
							graphical_culture = reptilian_01
						}
					}
					while = {
						count = 9
						create_ship = {
							name = random
							design = "Zebrica"
							prefix = no
							graphical_culture = reptilian_01
						}
					}
					assign_leader = event_target:eaw_admiral
					set_location = {
						target = event_target:giga_eaw_planet
						distance = 10
						angle = random
					}
				}
			}
		}
		#Griff Empire
		if = {
			limit = { has_country_flag = giga_eaw_griffon_unifier }
			set_graphical_culture = avian_01
			create_leader = {
				class = official
				species = event_target:giga_griffon
				gender = male
				set_age = 56
				name = "Grover XI"
				effect = {
					save_event_target_as = giga_eaw_un_ruler
				}
			}
			set_leader = event_target:giga_eaw_un_ruler
			country_add_ethic = ethic_authoritarian
			country_add_ethic = ethic_spiritualist
			country_add_ethic = ethic_militarist
			change_government = {
				remove_invalid_civics = yes
				authority = auth_imperial
				civics = {
					civic = civic_imperial_cult
					civic = civic_aristocratic_elite
				}
			}
			set_origin = origin_default
			change_country_flag = {
				icon={
					category="flusionian"
					file="griffon_flag.dds"
				}
				background={
					category="backgrounds"
					file="griffon.dds"
				}
				colors={
					"orange"
					"yellow"
					"null"
					"null"
				}
			}
			set_male_ruler_title = "Kaiser"
			set_female_ruler_title = "Kaiserin"
			set_name = "Griffonian Empire"
			event_target:giga_eaw_planet = {
				while = { count = 12	create_army = { name = NAME_reicsharmee_army	owner = event_target:giga_eaw_country species = event_target:giga_griffon  type = "eaw_early_army" } }
			}
			create_leader = {
				class = commander
				species = event_target:giga_griffon
				name = "Dawnclaw III"
				skill = 3
				gender = male
				traits = { trait = leader_trait_aggressive }
				effect = { save_event_target_as = eaw_admiral }
			}
			create_fleet = { #Spawn a fleet
				name = "Task Force Grover"
				settings = { uses_naval_capacity = no }
				effect = {
					set_owner = event_target:giga_eaw_country
					while = {
						count = 8
						create_ship = {
							name = random
							design = "Griffonia"
							prefix = no
							graphical_culture = avian_01
						}
					}
					while = {
						count = 24
						create_ship = {
							name = random
							design = "Zebrica"
							prefix = no
							graphical_culture = avian_01
						}
					}
					assign_leader = event_target:eaw_admiral
					set_location = {
						target = event_target:giga_eaw_planet
						distance = 15
						angle = random
					}
				}
			}
		}
		#Socialists
		if = {
			limit = { has_country_flag = giga_eaw_communist_unifier }
			set_graphical_culture = mammalian_01
			create_leader = {
				class = official
				species = event_target:giga_griffon
				gender = male
				set_age = 261
				immortal = yes
				name = "Asper Sickleclaw"
				effect = {
					save_event_target_as = giga_eaw_un_ruler
				}
			}
			set_leader = event_target:giga_eaw_un_ruler
			country_add_ethic = ethic_fanatic_egalitarian
			country_add_ethic = ethic_militarist
			change_government = {
				remove_invalid_civics = yes
				authority = auth_democratic
				civics = {
					civic = civic_shared_burden
					civic = civic_idealistic_foundation
				}
			}
			set_origin = origin_default
			change_country_flag = {
				icon={
					category="flusionian"
					file="eawsocialist_flag.dds"
				}
				background={
					category="backgrounds"
					file="circle.dds"
				}
				colors={
					"red"
					"red"
					"null"
					"null"
				}
			}
			set_male_ruler_title = "Supreme Soviet"
			set_female_ruler_title = "Supreme Soviet"
			set_name = "Faustwide Socialist Republic"
			event_target:giga_eaw_planet = {
				while = { count = 9	create_army = { name = NAME_faust_pdf	owner = event_target:giga_eaw_country species = event_target:giga_griffon  type = "eaw_early_army" } }
			}
			create_leader = {
				class = commander
				species = event_target:giga_griffon
				name = "Nova Sickleclaw"
				skill = 3
				set_age = 54
				gender = female
				traits = {
					trait = leader_trait_cautious 
				}
				effect = { save_event_target_as = eaw_admiral }
			}
			create_fleet = { #Spawn a fleet
				name = "Liberation Flotilla"
				settings = { uses_naval_capacity = no }
				effect = {
					set_owner = event_target:giga_eaw_country
					while = {
						count = 6
						create_ship = {
							name = random
							design = "Griffonia"
							prefix = no
							graphical_culture = mammalian_01
						}
					}
					while = {
						count = 20
						create_ship = {
							name = random
							design = "Zebrica"
							prefix = no
							graphical_culture = mammalian_01
						}
					}
					assign_leader = event_target:eaw_admiral
					set_location = {
						target = event_target:giga_eaw_planet
						distance = 15
						angle = random
					}
				}
			}
		}
		event_target:giga_eaw_system = {
			if = {
				limit = {
					exists = space_owner
					space_owner = { is_ai = no }
				}
				space_owner = { country_event = { id = giga_flavor_systems.2011 } }
			}
			if = {
				limit = { exists = starbase }
				starbase = { 
					set_owner = event_target:giga_eaw_country 
				}
			}
			else = {
				create_starbase = {
					size = starbase_starport
					owner = event_target:giga_eaw_country
				}
			}
		}
	}
}
country_event = {
	id = giga_flavor_systems.20101
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		give_technology = {
			tech = giga_tech_thaumaturgic_weaponry
		}
	}
}
#Determine unifier popup
country_event = {
	id = giga_flavor_systems.2011
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = { #EaW UN
			limit = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_un_unifier } }
			country_event = { id = giga_flavor_systems.2012 }
		}
		if = { #Griffons
			limit = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_griffon_unifier } }
			country_event = { id = giga_flavor_systems.2013 }
		}
		if = { #Communists
			limit = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_communist_unifier } }
			country_event = { id = giga_flavor_systems.2014 }
		}
	}
}

#EaW UN
country_event = {
	id = giga_flavor_systems.2012
	title = "giga_flavor_systems.2012.name"
	desc = {
		text = "giga_flavor_systems.2011.desc.eawun"
		trigger = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_un_unifier } }
	}
	picture = GFX_evt_diplomatic_visit
	show_sound = event_celebration
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_flavor_systems.2011.a"
		hidden_effect = { country_event = { id = giga_flavor_systems.2015 } }
	}
}

#Griffons
country_event = {
	id = giga_flavor_systems.2013
	title = "giga_flavor_systems.2013.name"
	desc = {
		text = "giga_flavor_systems.2011.desc.eawgriffon"
		trigger = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_griffon_unifier } }
	}
	picture = GFX_evt_alien_propaganda
	show_sound = event_celebration
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_flavor_systems.2011.a"
		hidden_effect = { country_event = { id = giga_flavor_systems.2015 } }
	}
}

#Communists
country_event = {
	id = giga_flavor_systems.2014
	title = "giga_flavor_systems.2014.name"
	desc = {
		text = "giga_flavor_systems.2011.desc.eawcommunist"
		trigger = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_communist_unifier } }
	}
	picture = GFX_evt_hand_shake
	show_sound = event_celebration
	location = from
	is_triggered_only = yes

	option = { 
		name = "giga_flavor_systems.2011.a"
		hidden_effect = { country_event = { id = giga_flavor_systems.2015 } }
	}
}

#They ask for the system
country_event = {
	id = giga_flavor_systems.2015
	title = "giga_flavor_systems.2015.name"
	desc = {
		text = "giga_flavor_systems.2015.desc.eawun"
		trigger = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_un_unifier } }
	}
	desc = {
		text = "giga_flavor_systems.2015.desc.eawgriffon"
		trigger = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_griffon_unifier } }
	}
	desc = {
		text = "giga_flavor_systems.2015.desc.eawcommunist"
		trigger = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_communist_unifier } }
	}	
	location = from
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:giga_eaw_country.ruler
		room = event_target:giga_eaw_country
		planet_background = event_target:giga_eaw_country.capital_scope
		city_level = event_target:giga_eaw_country.capital_scope
	}

	option = { #Sure
		name = "giga_flavor_systems.2015.a"
		custom_tooltip = "giga_flavor_systems.2015.a.tooltip"
		response_text = "giga_flavor_systems.2015.a.response"
		hidden_effect = {
			event_target:giga_eaw_system = {
				every_system_planet = {
					limit = { is_colony = yes }
					set_owner = event_target:giga_eaw_country
				}
			}
		}
		event_target:giga_eaw_country = {
			add_opinion_modifier = {
				who = root
				modifier = opinion_eaw_gave_system
			}
		}
		if = { 
			limit = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_un_unifier } }
			add_resource = {
				energy = 7500
			}
		}
		if = { 
			limit = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_communist_unifier }  }
			add_resource = {
				energy = 5000
				consumer_goods = 2500
			}
		}
	}

	option = { #Sure + neighbors
		name = "giga_flavor_systems.2015.b"
		custom_tooltip = "giga_flavor_systems.2015.b.tooltip"
		response_text = "giga_flavor_systems.2015.b.response"
		event_target:giga_eaw_country = {
			add_opinion_modifier = {
				who = root
				modifier = opinion_eaw_gave_system_neighbors
			}
		}
		if = { 
			limit = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_un_unifier } }
			add_resource = {
				energy = 7500
			}
		}
		if = { 
			limit = { event_target:giga_eaw_country = { has_country_flag = giga_eaw_communist_unifier }  }
			add_resource = {
				energy = 5000
				consumer_goods = 2500
			}
		}
		trigger = {
			event_target:giga_eaw_system = {
				any_neighbor_system = {
					exists = starbase
					starbase = { owner = { is_country = ROOT } }
				}
			}
		}
		hidden_effect = {
			event_target:giga_eaw_system = {
				every_system_planet = {
					limit = { is_colony = yes }
					set_owner = event_target:giga_eaw_country
				}
				every_neighbor_system = {
					limit = {
						exists = starbase
						starbase = { owner = { is_country = ROOT } }
					}
					starbase = { set_owner = event_target:eaw_country }
					every_system_planet = {
						limit = {
							is_colony = yes
							owner = { is_country = ROOT }
						}
						set_owner = event_target:eaw_country
					}
				}
			}
		}
	}

	option = {
		name = "giga_flavor_systems.005.c"
		custom_tooltip = "giga_flavor_systems.005.c.tooltip"
		response_text = "giga_flavor_systems.005.c.response"
		hidden_effect = {
			country_event = { id = giga_flavor_systems.2016 days = 1 }
		}
	}
}

#They seize the system
country_event = {
	id = giga_flavor_systems.2016
	title = "giga_flavor_systems.2016.name"
	desc = "giga_flavor_systems.2016.desc"
	show_sound = event_air_raid_siren
	picture = GFX_evt_machine_space_battle
	is_triggered_only = yes
	location = event_target:giga_eaw_system

	option = {
		name = "giga_flavor_systems.2016.a"
		custom_tooltip = "giga_flavor_systems.2016.a.tooltip"
		hidden_effect = {
			event_target:giga_eaw_system = {
				add_claims = { 
					who = ROOT
					num_of_claims = 1
					show_notification = yes 
				}
			}
			declare_war = {
				target = event_target:giga_eaw_country
				attacker_war_goal = wg_conquest
			}
		}
	}

	option = {
		name = "giga_flavor_systems.2016.b"
		custom_tooltip = "giga_flavor_systems.2016.b.tooltip"
	}
}

# Faust is invaded
country_event = {
	id = giga_flavor_systems.2100
	title = "giga_flavor_systems.2100.name"
	desc = "giga_flavor_systems.2100.desc"
	show_sound = event_ground_battle
	picture = GFX_evt_ground_combat
	is_triggered_only = yes

	trigger = {
		from = {
			has_country_flag = giga_eaw_country
			is_country_type = primitive
		}
		FromFrom = {
			has_planet_flag = giga_eaw_planet
		}
	}

	option = {
		name = "giga_flavor_systems.2100.a"
		hidden_effect = {
			event_target:giga_eaw_planet = {
				add_modifier = {
					modifier = giga_eaw_faust_harsh_resistance
					days = 3600
				}
			}
			country_event = { id = giga_flavor_systems.2101 days = 10 }
			set_country_flag = giga_faust_weaponry_possible
		}
	}
}

country_event = {
	id = giga_flavor_systems.2101
	title = "giga_flavor_systems.2101.name"
	desc = "giga_flavor_systems.2101.desc"
	show_sound = event_laboratory_sound
	picture = GFX_evt_engineering_research
	is_triggered_only = yes

	option = {
		name = "giga_flavor_systems.2101.a"
		add_research_option = giga_tech_thaumaturgic_weaponry #magical guns
	}
}